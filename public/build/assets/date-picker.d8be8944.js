var Ar=Object.defineProperty;var Tr=(e,t,n)=>t in e?Ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var I=(e,t,n)=>(Tr(e,typeof t!="symbol"?t+"":t,n),n);import{r as p,b6 as gt,b7 as nt,$ as X,b8 as vt,a as i,j as P,A as Ce,b9 as Nr,c as E,l as ne,h as L,ba as Or,g as q,bb as yt,aO as H,m as C,R as de,i as Dn,a1 as Re,a5 as bt,aS as In,aT as An,Z as fe,bc as Fr,bd as Tn,be as Q,bf as ue,bg as ye,bh as xe,bi as Oe,bj as Fe,bk as Nn,e as he,bl as He,k as Ee,bm as $r,aN as zr,bn as Lr,bo as Mr,bp as Br,bq as Hr,br as jr,bs as On,N as Vr,u as wt,bt as qr,bu as Kr,bv as Gr,T as O,n as xt,D as je,p as _t,M as Fn,B as te,t as St,Y as Ve,bw as $e,bx as Wr,aw as Xr,f as Yr,a3 as Zr,by as Qr,aM as $n,bz as Jr,s as zn,a2 as Ln,a6 as we,v as J,ak as Mn,I as kt,b as Bn,d as z,bA as ea,ah as Pt,a$ as ta,ai as se,ab as na,K as Hn,q as ra,o as aa,F as oa,U as jn,bB as sa,bC as Vn,bD as Ze,bE as le,bF as ia,bG as la,aq as ca,ar as ua,bH as _e,z as da,V as fa,bI as ha,aL as pa,bJ as ma,bK as ga,a0 as Ct,bL as va,bM as ya,b0 as ba}from"./main.2bad25cd.js";import{E as wa,C as xa}from"./Edit.2aa2741b.js";import{u as _a}from"./index.b7375da4.js";const Rt=p.exports.createContext(null);function Sa(){p.exports.useEffect(()=>(document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[])}function sl({children:e,leftSidenavStatus:t,onLeftSidenavChange:n,rightSidenavStatus:r,onRightSidenavChange:a,name:o,leftSidenavCanBeCompact:s,...l}){Sa();const u=gt("(max-width: 1024px)"),c=p.exports.useMemo(()=>o?nt(`${o}.sidenav.compact`):!1,[o])?"compact":"open",[f,h]=X(t,u?"closed":c,n),m=p.exports.useMemo(()=>{const w=nt(`${o}.sidenav.right.position`,"open");return u?"closed":w},[u,o]),[y,b]=X(r,m,a),v=p.exports.useCallback(w=>{b(w),vt(`${o}.sidenav.right.position`,w)},[b,o]),g=u&&(f==="open"||y==="open");return i(Rt.Provider,{value:{leftSidenavStatus:f,setLeftSidenavStatus:h,rightSidenavStatus:y,setRightSidenavStatus:v,leftSidenavCanBeCompact:s,name:o,isMobileMode:u},children:P("div",{...l,className:"dashboard-grid test-overflow h-full relative isolate",children:[e,i(Ce,{children:g&&i(Nr,{position:"fixed",onClick:()=>{h("closed"),v("closed")}},"dashboard-underlay")})]})})}function il({children:e}){return p.exports.cloneElement(e,{className:E(e.props.className,"dashboard-grid-content overflow-y-auto")})}function ll({className:e,position:t,children:n,...r}){const{isMobileMode:a,leftSidenavStatus:o,setLeftSidenavStatus:s,rightSidenavStatus:l,setRightSidenavStatus:u}=p.exports.useContext(Rt),d=t==="left"?o:l,c={open:{display:"flex",width:null},compact:{display:"flex",width:null},closed:{width:0,transitionEnd:{display:"none"}}},f=ka(d==="compact"?"compact":r.size);return i(ne.div,{variants:c,initial:!1,animate:d,transition:{type:"tween",duration:.15},onClick:h=>{const m=h.target;a&&(m.closest("button")||m.closest("a"))&&(s("closed"),u("closed"))},className:E(e,t==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right","overflow-hidden will-change-[width]",f.width,a&&"fixed top-0 bottom-0 z-20 shadow-xl",a&&t==="left"&&"left-0",a&&t==="right"&&"right-0"),children:p.exports.cloneElement(n,{className:E(n.props.className,f.minWidth,"h-full"),isCompactMode:d==="compact"})})}function ka(e){switch(e){case"compact":return{width:"w-80",minWidth:"min-w-80"};case"sm":return{width:"w-224",minWidth:"min-w-224"};case"lg":return{width:"w-288",minWidth:"min-w-288"};default:return{width:"w-240",minWidth:"min-w-240"}}}const Pa=L(i("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"MenuOutlined");function cl({children:e,className:t,hideToggleButton:n,...r}){const{isMobileMode:a,leftSidenavStatus:o,setLeftSidenavStatus:s,name:l,leftSidenavCanBeCompact:u}=p.exports.useContext(Rt),d=u&&!a,c=!n&&(a||u),f=()=>{s(o==="open"?"closed":"open")},h=()=>{const m=o==="compact"?"open":"compact";vt(`${l}.sidenav.compact`,m==="compact"),s(m)};return i(Or,{className:E("dashboard-grid-navbar",t),border:"border-b",size:"sm",color:"primary",darkModeColor:"bg-alt",toggleButton:c?i(q,{size:"md",onClick:()=>{d?h():f()},children:i(Pa,{})}):void 0,...r,children:e})}class ze{constructor(t){I(this,"defaultValue");I(this,"defaultOperator");I(this,"key");I(this,"label");I(this,"description");I(this,"type");I(this,"inputType");I(this,"options");I(this,"operators");I(this,"model");this.defaultValue=t.defaultValue!==void 0?t.defaultValue:"",this.key=t.key,this.label=t.label,this.description=t.description,this.defaultOperator=t.defaultOperator||Et.eq,this.type=t.type||B.Select,this.inputType=t.inputType,this.options=t.options||[],this.operators=t.operators||[],this.model=t.model}}var B=(e=>(e.Select="select",e.DatePicker="datePicker",e.SelectModel="selectModel",e.Input="input",e.BooleanToggle="booleanToggle",e))(B||{}),Et=(e=>(e.eq="=",e.ne="!=",e.gt=">",e.gte=">=",e.lt="<",e.lte="<=",e.has="has",e.doesntHave="doesntHave",e.between="between",e))(Et||{});const K=yt(H()),Ut=[{key:0,label:C("last 7 days"),getRangeValue:()=>({preset:0,start:K.subtract({days:7}),end:K})},{key:1,label:C("last 14 days"),getRangeValue:()=>({preset:1,start:K.subtract({days:14}),end:K})},{key:2,label:C("last 30 days"),getRangeValue:()=>({preset:2,start:K.subtract({days:30}),end:K})},{key:3,label:C("last 3 months"),getRangeValue:()=>({preset:3,start:K.subtract({months:3}),end:K})},{key:4,label:C("last 12 months"),getRangeValue:()=>({preset:4,start:K.subtract({months:12}),end:K})}],qn=L(i("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined"),Kn=de.forwardRef((e,t)=>{const{children:n,inputProps:r,wrapperProps:a,className:o,autoFocus:s,style:l,onClick:u}=e;return i("div",{...a,onClick:u,children:i("div",{...r,role:"group",className:E(o,"flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60"),ref:t,style:l,children:i(Dn,{autoFocus:s,children:n})})})}),Dt=de.forwardRef(({inputRef:e,wrapperProps:t,children:n,onBlur:r,...a},o)=>{const s=Re(a),l=bt(o),{fieldProps:u,inputProps:d}=In({...a,focusRef:l,labelElementType:"span"});return i(An,{wrapperProps:fe(t,{onBlur:c=>{l.current.contains(c.relatedTarget)||r==null||r(c)},onClick:()=>{Fr(l).focusFirst()}}),fieldClassNames:s,ref:l,...u,children:i(Kn,{inputProps:d,className:E(s.input,"gap-10"),ref:e,children:n})})});function Ca(e){return e instanceof Tn?"day":"minute"}function rt(e,t,n){return t!=null&&e.compare(t)<0||n!=null&&e.compare(n)>0}function Gn(e,t){var f;const[n,r]=p.exports.useState(!1),a=(f=t.closeDialogOnSelection)!=null?f:!0,o=Q(),s=p.exports.useMemo(()=>o.resolvedOptions(),[o]),l=p.exports.useMemo(()=>e&&"timeZone"in e?e.timeZone:s.timeZone,[e,s.timeZone]),u=t.granularity||Ca(e),d=t.min?ue(t.min,H()):void 0,c=t.max?ue(t.max,H()):void 0;return{timeZone:l,granularity:u,min:d,max:c,calendarIsOpen:n,setCalendarIsOpen:r,closeDialogOnSelection:a}}const Mt=yt(H());function Ra(e){var M,j;const[t,n]=p.exports.useState({start:(!e.value||!e.value.start)&&!((M=e.defaultValue)!=null&&M.start),end:(!e.value||!e.value.end)&&!((j=e.defaultValue)!=null&&j.end)}),[r,a]=X(e.value?Ht(e.value):void 0,e.value?void 0:Ht(e.defaultValue),e.onChange),{min:o,max:s,granularity:l,timeZone:u,calendarIsOpen:d,setCalendarIsOpen:c,closeDialogOnSelection:f}=Gn(r.start,e),[h,m]=p.exports.useState(null),[y,b]=p.exports.useState(!1),[v,g]=p.exports.useState(r),[w,S]=p.exports.useState(()=>Bt(r,s)),_=p.exports.useCallback((D,R)=>(o&&D.compare(o)<0?D=o:s&&D.compare(s)>0&&(D=s),R?R.set(D):ue(D,H())),[o,s]),k=p.exports.useCallback(D=>{const R={start:_(D.start),end:_(D.end),preset:D.preset};a(R),g(R),S(Bt(R,s)),n({start:!1,end:!1})},[a,_,s]),N=p.exports.useCallback(D=>!t.start&&ye(D,v.start)||!t.end&&ye(D,v.end),[v,t]),x=p.exports.useCallback(D=>(y||!t.start&&!t.end)&&D.compare(v.start)>=0&&D.compare(v.end)<=0,[v,t,y]),U=p.exports.useCallback(D=>ye(D,v.start),[v]),T=p.exports.useCallback(D=>ye(D,v.end),[v]),$=p.exports.useCallback((D,R)=>({onPointerEnter:()=>{y&&R&&g(Qe({start:h,end:D}))},onClick:()=>{if(!y)b(!0),m(D),g(Qe({start:D,end:D}));else{const A=Qe({start:h,end:D});b(!1),m(null),k==null||k(A),f&&(c==null||c(!1))}}}),[h,y,k,c,f]);return{selectedValue:r,setSelectedValue:k,calendarIsOpen:d,setCalendarIsOpen:c,dayIsActive:N,dayIsHighlighted:x,dayIsRangeStart:U,dayIsRangeEnd:T,getCellProps:$,calendarDates:w,setIsPlaceholder:n,isPlaceholder:t,setCalendarDates:S,min:o,max:s,granularity:l,timeZone:u,closeDialogOnSelection:f}}function Bt(e,t){let n=xe(Oe(e.start)),r=xe(Fe(e.end));return Nn(n,r)&&(r=Fe(r.add({months:1}))),t&&r.compare(t)>0&&(r=n,n=Oe(n.subtract({months:1}))),[n,r]}function Qe(e){const t=ue(e.start,H()),n=ue(e.end,H());return t.compare(n)>0?{start:n,end:t}:{start:t,end:n}}function Ht(e){return(e==null?void 0:e.start)&&(e==null?void 0:e.end)?e:!(e!=null&&e.start)&&(e==null?void 0:e.end)?(e.start=e.end.subtract({months:1}),e):!(e!=null&&e.end)&&(e==null?void 0:e.start)?(e.end=e.start.add({months:1}),e):{start:Mt,end:Mt.add({months:1})}}const Wn=L(i("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"}),"ArrowRightAltOutlined");function Ea(e,t,n,r){switch(t){case"era":case"year":case"month":case"day":return e.cycle(t,n,{round:t==="year"})}if("hour"in e)switch(t){case"dayPeriod":{const a=e.hour,o=a>=12;return e.set({hour:o?a-12:a+12})}case"hour":case"minute":case"second":return e.cycle(t,n,{round:t!=="hour",hourCycle:r.hour12?12:24})}return e}function Ua(e,t,n,r){switch(t){case"day":case"month":case"year":return e.set({[t]:n})}if("hour"in e)switch(t){case"dayPeriod":{const a=e.hour,o=a>=12;return n>=12===o?e:e.set({hour:o?a-12:a+12})}case"hour":if(r.hour12){const o=e.hour>=12;!o&&n===12&&(n=0),o&&n<12&&(n+=12)}case"minute":case"second":return e.set({[t]:n})}return e}const jt={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function Da({segment:e,domProps:t,value:n,onChange:r,isPlaceholder:a,state:{timeZone:o,calendarIsOpen:s,setCalendarIsOpen:l}}){const u=he(),d=p.exports.useRef(""),{localeCode:c}=He(),f=Ee(),h=Q({timeZone:o}),m=p.exports.useMemo(()=>new $r(c,{maximumFractionDigits:0}),[c]),y=x=>{r(Ua(n,e.type,x,h.resolvedOptions()))},b=x=>{r(Ea(n,e.type,x,h.resolvedOptions()))},v=()=>{if(m.isValidPartialNumber(e.text)){const x=e.text.slice(0,-1),U=m.parse(x);if(x.length===0||U===0){const T=zr(H());e.type in T&&y(T[e.type])}else y(U);d.current=x}else e.type==="dayPeriod"&&b(-1)},g=x=>{var U;if(!(x.ctrlKey||x.metaKey||x.shiftKey||x.altKey)){switch(x.key){case"ArrowLeft":x.preventDefault(),x.stopPropagation(),f.focusPrevious();break;case"ArrowRight":x.preventDefault(),x.stopPropagation(),f.focusNext();break;case"Enter":(U=x.target.closest("form"))==null||U.requestSubmit(),l(!s);break;case"Tab":break;case"Backspace":case"Delete":{x.preventDefault(),x.stopPropagation(),v();break}case"ArrowUp":x.preventDefault(),d.current="",b(1);break;case"ArrowDown":x.preventDefault(),d.current="",b(-1);break;case"PageUp":x.preventDefault(),d.current="",b(jt[e.type]||1);break;case"PageDown":x.preventDefault(),d.current="",b(-(jt[e.type]||1));break;case"Home":x.preventDefault(),d.current="",y(e.maxValue);break;case"End":x.preventDefault(),d.current="",y(e.minValue);break}k(x.key)}},w=Q({hour:"numeric",hour12:!0}),S=p.exports.useMemo(()=>{const x=new Date;return x.setHours(0),w.formatToParts(x).find(U=>U.type==="dayPeriod").value},[w]),_=p.exports.useMemo(()=>{const x=new Date;return x.setHours(12),w.formatToParts(x).find(U=>U.type==="dayPeriod").value},[w]),k=x=>{const U=d.current+x;switch(e.type){case"dayPeriod":if(S.toLowerCase().startsWith(x))y(0);else if(_.toLowerCase().startsWith(x))y(12);else break;f.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!m.isValidPartialNumber(U))return;let T=m.parse(U),$=T,M=e.minValue===0;if(e.type==="hour"&&h.resolvedOptions().hour12){switch(h.resolvedOptions().hourCycle){case"h11":T>11&&($=m.parse(x));break;case"h12":M=!1,T>12&&($=m.parse(x));break}e.value>=12&&T>1&&(T+=12)}else T>e.maxValue&&($=m.parse(x));if(Number.isNaN(T))return;const j=$!==0||M;j&&y($),Number(`${T}0`)>e.maxValue||U.length>=String(e.maxValue).length?(d.current="",j&&f.focusNext()):d.current=U;break}}},N=u?{}:{"aria-label":e.type,"aria-valuetext":a?void 0:`${e.value}`,"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":a?void 0:e.value,tabIndex:0,onKeyDown:g};return i("div",{...fe(t,{...N,onFocus:x=>{d.current="",x.target.scrollIntoView({block:"nearest"})},onClick:x=>{x.preventDefault(),x.stopPropagation()}}),className:"p-2 outline-none caret-transparent cursor-default rounded focus:bg-primary focus:text-on-primary select-none whitespace-nowrap box-content tabular-nums text-center",children:e.text.padStart(e.minLength,"0")})}function Ia({segment:e,domProps:t}){const n=Ee();return i("div",{...t,onPointerDown:r=>{r.pointerType==="mouse"&&(r.preventDefault(),n.focusNext({from:r.target})||n.focusPrevious({from:r.target}))},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:e.text})}function Aa(e,t,n){switch(t){case"year":return{value:e.year,placeholder:"yyyy",minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,placeholder:"mm",minValue:Mr(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:Lr(e),maxValue:e.calendar.getDaysInMonth(e),placeholder:"dd"}}if("hour"in e)switch(t){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(n.hour12){const r=e.hour>=12;return{value:e.hour,minValue:r?12:0,maxValue:r?23:11,placeholder:"--"}}return{value:e.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:e.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}function Se({segmentProps:e,state:t,value:n,onChange:r,isPlaceholder:a}){const{granularity:o}=t,s=p.exports.useMemo(()=>{const c={year:"numeric",month:"numeric",day:"numeric"};return o==="minute"&&(c.hour="numeric",c.minute="numeric"),c},[o]),l=Q(s),u=p.exports.useMemo(()=>n.toDate(),[n]),d=p.exports.useMemo(()=>l.formatToParts(u).map(c=>{const f=Aa(n,c.type,l.resolvedOptions()),h=a&&c.type!=="literal"?f.placeholder:c.value;return{type:c.type,text:c.value===", "?" ":h,...f,minLength:c.type!=="literal"?String(f.maxValue).length:1}}),[u,l,a,n]);return i("div",{className:"flex items-center",children:d.map((c,f)=>c.type==="literal"?i(Ia,{domProps:e,segment:c},f):i(Da,{isPlaceholder:a,domProps:e,state:t,value:n,onChange:r,segment:c},f))})}const Xn=L(i("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeftOutlined"),It=L(i("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRightOutlined");function Ta({date:e,currentMonth:t,state:{dayIsActive:n,dayIsHighlighted:r,dayIsRangeStart:a,dayIsRangeEnd:o,getCellProps:s,timeZone:l,min:u,max:d}}){const{localeCode:c}=He(),f=Br(e,c),h=n(e),m=r(e),y=a(e),b=o(e),v=Hr(e,l),g=Nn(e,t),w=rt(e,u,d);return P("div",{role:"button","aria-disabled":w,className:E("w-40 h-40 text-sm relative isolate flex-shrink-0",w&&"text-disabled pointer-events-none"),...s(e,g),children:[i("span",{className:E("absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer",!g&&"invisible",!h&&!v&&"hover:bg-hover",h&&"bg-primary text-on-primary font-semibold",v&&!h&&"bg-chip"),children:e.day}),m&&g&&i("span",{className:E("absolute w-full h-full inset-0 bg-primary/focus",(y||f===0||e.day===1)&&"rounded-l-full",(b||f===6||e.day===t.calendar.getDaysInMonth(t))&&"rounded-r-full")})]})}function Na({startDate:e,state:t,isFirst:n,isLast:r}){const{localeCode:a}=He(),o=jr(e,a),s=On(e,a);return P("div",{className:"w-280 flex-shrink-0",children:[i(Oa,{isFirst:n,isLast:r,state:t,currentMonth:e}),P("div",{className:"block",role:"grid",children:[i(Fa,{state:t,startDate:e}),[...new Array(o).keys()].map(l=>i(ne.div,{className:"flex mb-6",children:[...new Array(7).keys()].map(u=>i(Ta,{date:s.add({weeks:l,days:u}),currentMonth:e,state:t},u))},l))]})]})}function Oa({currentMonth:e,isFirst:t,isLast:n,state:{calendarDates:r,setCalendarDates:a,timeZone:o,min:s,max:l}}){const u=h=>{const m=r.length;let y;h==="forward"?y=r.map(b=>Fe(b.add({months:m}))):y=r.map(b=>Fe(b.subtract({months:m}))),a(y)},d=Q({month:"long",year:"numeric",era:e.calendar.identifier!=="gregory"?"long":void 0,calendar:e.calendar.identifier}),c=rt(e.subtract({days:1}),s,l),f=rt(Oe(e.add({months:1})),s,l);return P("div",{className:"flex items-center justify-between gap-10",children:[i(q,{size:"md",className:E("text-muted",!t&&"invisible"),disabled:!t||c,"aria-hidden":!t,onClick:()=>{u("backward")},children:i(Xn,{})}),i("div",{className:"text-sm font-semibold select-none",children:d.format(e.toDate(o))}),i(q,{size:"md",className:E("text-muted",!n&&"invisible"),disabled:!n||f,"aria-hidden":!n,onClick:()=>{u("forward")},children:i(It,{})})]})}function Fa({state:{timeZone:e},startDate:t}){const{localeCode:n}=He(),r=Q({weekday:"short"}),a=On(t,n);return i("div",{className:"flex",children:[...new Array(7).keys()].map(o=>{const l=a.add({days:o}).toDate(e),u=r.format(l);return i("div",{className:"w-40 h-40 text-sm font-semibold relative flex-shrink-0",children:i("div",{className:"absolute flex items-center justify-center w-full h-full select-none",children:u})},o)})})}function Yn({state:e,visibleMonths:t=1}){return he()&&(t=1),i(Vr,{children:[...new Array(t).keys()].map(r=>{const a=xe(Oe(e.calendarDates[r])),o=r===0,s=r===t-1;return i(Na,{state:e,startDate:a,isFirst:o,isLast:s},r)})})}const $a={numeric:{year:"numeric",month:"2-digit",day:"2-digit"},short:{year:"numeric",month:"short",day:"2-digit"},long:{month:"long",day:"2-digit",year:"numeric"}},Zn=p.exports.memo(({start:e,end:t,options:n})=>{const{dates:r}=wt(),a=Q(n||$a[(r==null?void 0:r.format)||"short"]),[o,s]=p.exports.useState();return p.exports.useEffect(()=>{if(!e||!t){s("");return}try{s(a.formatRange(Vt(e),Vt(t)))}catch{}},[e,t,a]),i(p.exports.Fragment,{children:o})},qr);function Vt(e){return e instanceof Tn?e.toDate(H()):typeof e=="string"?Kr(e,H()).toDate():e}function za({children:e,className:t}){return i(Dn,{children:i("ul",{className:E("py-4 text-base sm:text-sm outline-none",t),children:e})})}function La({children:e,onSelected:t,borderRadius:n,...r}){const a=Ee(),o=!!t,s=p.exports.useRef(null),[l,u]=p.exports.useState(!1),d=c=>{switch(c.key){case"ArrowDown":c.preventDefault(),a.focusNext();break;case"ArrowUp":c.preventDefault(),a.focusPrevious();break;case"Home":c.preventDefault(),a.focusFirst();break;case"End":c.preventDefault(),a.focusLast();break;case"Enter":case"Space":c.preventDefault(),t==null||t();break}};return i("li",{children:i(Gr,{className:n||"rounded",isActive:l,isDisabled:r.isDisabled,...r,onFocus:c=>{u(c.target.matches(":focus-visible"))},onBlur:()=>{u(!1)},onClick:()=>{t==null||t()},ref:s,role:o?"button":void 0,onKeyDown:o?d:void 0,tabIndex:o&&!r.isDisabled?0:void 0,children:e})})}function Ma({onPresetSelected:e,selectedValue:t}){return i(za,{className:"min-w-192 pt-14",children:Ut.map(n=>i(La,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(t==null?void 0:t.preset)===n.key,onSelected:()=>{const r=n.getRangeValue();e(r)},startIcon:n.key===6&&i(It,{}),children:i(O,{...n.label})},n.key))})}function Ba({state:e,showInlineDatePickerField:t=!1}){const n=he(),{close:r}=xt(),a=p.exports.useRef(e),o=e.isPlaceholder.start||e.isPlaceholder.end;return P(je,{size:"auto",children:[P(_t,{className:"flex",padding:"p-0",children:[!n&&i(Ma,{selectedValue:e.selectedValue,onPresetSelected:s=>{e.setSelectedValue(s),e.closeDialogOnSelection&&r(s)}}),i(Ce,{initial:!1,children:i(Ha,{state:e,showInlineDatePickerField:t})})]}),P(Fn,{dividerTop:!0,startAction:!o&&!n?i("div",{className:"text-xs",children:i(Zn,{start:e.selectedValue.start.toDate(),end:e.selectedValue.end.toDate(),options:{dateStyle:"medium"}})}):void 0,children:[i(te,{variant:"text",size:"xs",onClick:()=>{e.setSelectedValue(a.current.selectedValue),e.setIsPlaceholder(a.current.isPlaceholder),r()},children:i(O,{message:"Cancel"})}),i(te,{variant:"flat",color:"primary",size:"xs",onClick:()=>{r(e.selectedValue)},children:i(O,{message:"Select"})})]})]})}function Ha({state:e,showInlineDatePickerField:t}){return P(ne.div,{initial:{width:0,overflow:"hidden"},animate:{width:"auto"},exit:{width:0,overflow:"hidden"},transition:{type:"tween",duration:.125},className:"border-l px-20 pt-10 pb-20",children:[t&&i(ja,{state:e}),i("div",{className:"flex items-start gap-36",children:i(Yn,{state:e,visibleMonths:2})})]})}function ja({state:e}){const{selectedValue:t,setSelectedValue:n}=e;return P(Dt,{className:"mb-20 mt-10",children:[i(Se,{state:e,value:t.start,onChange:r=>{n({...t,start:r})}}),i(Wn,{className:"block flex-shrink-0 text-muted",size:"md"}),i(Se,{state:e,value:t.end,onChange:r=>{n({...t,end:r})}})]})}function Va({onDialogClose:e,...t}){var c,f;const n=Ra(t),r=p.exports.useRef(null),o=he()&&t.granularity!=="day",s=i(St,{offset:8,placement:"bottom-start",isOpen:n.calendarIsOpen,onOpenChange:n.setCalendarIsOpen,type:"popover",triggerRef:r,returnFocusToTrigger:!1,moveFocusToDialog:!1,onClose:e,children:i(Ba,{state:n,startExpanded:!0})}),l={onClick:h=>{h.stopPropagation(),h.preventDefault(),qa(h)?n.setCalendarIsOpen(!1):n.setCalendarIsOpen(!0)}},u=n.selectedValue,d=n.setSelectedValue;return P(p.exports.Fragment,{children:[P(Dt,{ref:r,wrapperProps:l,endAdornment:o?void 0:i(qn,{}),...t,children:[i(Se,{isPlaceholder:(c=n.isPlaceholder)==null?void 0:c.start,state:n,segmentProps:l,value:u.start,onChange:h=>{d({...u,start:h})}}),i(Wn,{className:"block flex-shrink-0 text-muted",size:"md"}),i(Se,{isPlaceholder:(f=n.isPlaceholder)==null?void 0:f.end,state:n,segmentProps:l,value:u.end,onChange:h=>{d({...u,end:h})}})]}),s]})}function qa(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}function Ka(e){const{field:{onChange:t,onBlur:n,value:r,ref:a},fieldState:{invalid:o,error:s}}=Ve({name:e.name}),l={onChange:u=>{t(Qn(u))},onBlur:n,value:Ga(r),invalid:o,errorMessage:s==null?void 0:s.message,inputRef:a};return i(Va,{...fe(l,e)})}function Ga({start:e,end:t,preset:n}={}){const r={preset:n};return e&&(r.start=typeof e=="string"?$e(e):e),t&&(r.end=typeof t=="string"?$e(t):t),r}function Qn({start:e,end:t,preset:n}={}){const r={preset:n};return e&&(r.start=e.toAbsoluteString()),t&&(r.end=t.toAbsoluteString()),r}class Jn extends ze{constructor(n){n.defaultValue||(n.defaultValue=Qn(Ut[0].getRangeValue()));super(n);I(this,"type",B.DatePicker);I(this,"defaultOperator",Et.between)}}class Wa extends Jn{constructor(){super(...arguments);I(this,"key","created_at");I(this,"label",C("Date created"))}}class Xa extends Jn{constructor(){super(...arguments);I(this,"key","updated_at");I(this,"label",C("Last updated"))}}const qe=p.exports.forwardRef(({className:e,circle:t,size:n="md",src:r,...a},o)=>i("img",{ref:o,src:r,alt:"",className:E(e,Ya(n),t?"rounded-full":"rounded"),...a}));function Ya(e){switch(e){case"xs":return"w-18 h-18";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";default:return e}}const Je="filters";function Za(e){if(!e)return[];let t=[];try{t=JSON.parse(atob(decodeURIComponent(e))),t.map(n=>(n.valueKey&&(n.value=n.valueKey),n))}catch{}return t}function Qa(e,t){return!e||(e=t?e.filter(n=>n.value!=="").map(n=>Ja(n,t)):e,e=e.filter(n=>!n.isInactive),!e.length)?"":encodeURIComponent(btoa(JSON.stringify(e)))}function Ja(e,t){const n=t.find(r=>r.key===e.key);if((n==null?void 0:n.type)==="select"){const r=(n.options||[]).find(a=>a.key===e.value);return{...e,value:r==null?void 0:r.value,valueKey:r==null?void 0:r.key}}return e}function eo(e,t){const[n]=Wr(),r=Xr(),a=n.get(Je),o=p.exports.useMemo(()=>{if(!e)return[];const c=Za(a);return(t||[]).forEach(f=>{if(!c.find(h=>h.key===f)){const h=e.find(m=>m.key===f);c.push({key:f,value:h.defaultValue,operator:h.defaultOperator,isInactive:!0})}}),c.sort((f,h)=>e.findIndex(m=>m.key===f.key)-e.findIndex(m=>m.key===h.key)),c},[a,t,e]),s=p.exports.useCallback(c=>{const f=[...o];return c.forEach(h=>{const m=typeof h=="object"?h.key:h,y=f.findIndex(b=>b.key===m);y>-1&&f.splice(y,1)}),f},[o]),l=p.exports.useCallback(c=>{const f=Qa(c,e);f?n.set(Je,f):n.delete(Je),r({search:`?${n}`},{replace:!0})},[e,r,n]),u=p.exports.useCallback(c=>{const h=[...s(c),...c];l(h)},[s,l]),d=p.exports.useCallback(c=>l(s([c])),[s,l]);return{add:u,remove:d,replaceAll:l,decodedFilters:o,encodedFilters:a}}function ul(e){let{value:t=0,minValue:n=0,maxValue:r=100,size:a="md",label:o,showValueLabel:s=!!o,isIndeterminate:l=!1,labelPosition:u="top",className:d,role:c,formatOptions:f={style:"percent"}}=e;const h=p.exports.useId();t=Zr(t,n,r);const m=(t-n)/(r-n),y=Yr(f);let b="";if(!l&&s){const _=f.style==="percent"?m:t;b=y.format(_)}const v={};l||(v.width=`${Math.round(m*100)}%`);const g=to(a),w=Re({size:a}),S=(o||b)&&P("div",{className:E("flex gap-10 justify-between my-4",w.label),children:[o&&i("span",{id:h,children:o}),b&&i("div",{children:b})]});return P("div",{"aria-valuenow":l?void 0:t,"aria-valuemin":n,"aria-valuemax":r,"aria-valuetext":l?void 0:b,"aria-labelledby":o?h:void 0,role:c||"progressbar",className:E(d,"min-w-42"),children:[u==="top"&&S,i("div",{className:`${g} rounded bg-primary-light overflow-hidden`,children:i("div",{className:E("fill h-full transition-width duration-200 rounded-l bg-primary",l&&"progress-bar-indeterminate-animate"),style:v})}),u==="bottom"&&S]})}function to(e){switch(e){case"sm":return"h-6";case"xs":return"h-4";default:return"h-8"}}function Ke({isFirst:e,isLast:t,isRowHeader:n,width:r,column:a}){const o=n?"col-w-2":"col-w-1",s=(a==null?void 0:a.width)||r||o,l=a==null?void 0:a.padding;let u="text-left";return(a==null?void 0:a.align)==="center"?u="text-center":(a==null?void 0:a.align)==="end"&&(u="text-right"),E("overflow-hidden whitespace-nowrap h-48 outline-none focus-visible:outline focus-visible:outline-offset-2 rounded",u,!l&&e&&"pl-24 pr-16",!l&&t&&"pr-24 pl-16",!e&&!t&&!l&&"px-16",l,s)}function er({isHeader:e,isSelected:t}){return E("break-inside-avoid border-b outline-none",t&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",!t&&!e&&"focus-visible:bg-focus hover:bg-hover")}function at(e){return Qr()?e.metaKey:e.ctrlKey}function no(e){const{cellCount:t,rowCount:n}=e;return{onKeyDown:a=>{switch(a.key){case"ArrowLeft":G(a,{cell:{op:"decrement"}},e);break;case"ArrowRight":G(a,{cell:{op:"increment"}},e);break;case"ArrowUp":G(a,{row:{op:"decrement"}},e);break;case"ArrowDown":G(a,{row:{op:"increment"}},e);break;case"PageUp":G(a,{row:{op:"decrement",count:5}},e);break;case"PageDown":G(a,{row:{op:"increment",count:5}},e);break;case"Tab":ro(a);break;case"Home":at(a)?G(a,{row:{op:"decrement",count:n},cell:{op:"decrement",count:t}},e):G(a,{cell:{op:"decrement",count:t}},e);break;case"End":at(a)?G(a,{row:{op:"increment",count:n},cell:{op:"increment",count:t}},e):G(a,{cell:{op:"increment",count:t}},e);break}}}}function G(e,t,{cellCount:n,rowCount:r}){var y,b,v,g,w,S,_,k,N;if(((y=document.activeElement)==null?void 0:y.tagName)==="input")return;e.preventDefault();const a=e.currentTarget,o=e.target.closest("[aria-colindex]");if(!o||!a)return;const s=o.closest("[aria-rowindex]");if(!s)return;let l=parseInt(s.getAttribute("aria-rowindex")),u=parseInt(o.getAttribute("aria-colindex"));if(Number.isNaN(l)||Number.isNaN(u))return;const d=(v=(b=t.row)==null?void 0:b.count)!=null?v:1;((g=t.row)==null?void 0:g.op)==="increment"?l=Math.min(r,l+d):((w=t.row)==null?void 0:w.op)==="decrement"&&(l=Math.max(1,l-d));const c=(_=(S=t.cell)==null?void 0:S.count)!=null?_:1;((k=t.cell)==null?void 0:k.op)==="increment"?u=Math.min(n,u+c):((N=t.cell)==null?void 0:N.op)==="decrement"&&(u=Math.max(1,u-c));const f=a.querySelector(`[aria-rowindex="${l}"] [aria-colindex="${u}"]`);if(!f)return;const m=$n(f).nextNode()||f;o.setAttribute("tabindex","-1"),m.setAttribute("tabindex","0"),m.focus()}function ro(e){const t=e.currentTarget;if(e.shiftKey)t.focus();else{const n=$n(t,{tabbable:!0});let r,a;do a=n.lastChild(),a&&(r=a);while(a);r&&!r.contains(document.activeElement)&&Jr(r)}}const pe=p.exports.createContext(null);function ao({item:e}){const t=he(),{selectedRows:n,enableSelection:r,toggleRow:a,selectionStyle:o}=p.exports.useContext(pe);return!r||o==="highlight"||t?null:i("td",{className:Ke({isFirst:!0,width:"w-64 flex-shrink-0 flex-grow-0"}),children:i(zn,{checked:n.includes(e.id),onChange:()=>{a(e)}})})}function oo({index:e,item:t,id:n}){const{enableSelection:r,columns:a,selectedRows:o}=p.exports.useContext(pe),s=r?!1:e===0,l=e===a.length-1,u=a[e];return i("td",{id:n,tabIndex:-1,className:Ke({isFirst:s,isLast:l,column:u}),children:u.body(t,o)})}function so({onMoveStart:e,onMove:t,onMoveEnd:n,minimumMovement:r=0,preventDefault:a,stopPropagation:o=!0,onPress:s,onLongPress:l,...u}){const c=p.exports.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:f,removeGlobalListener:h}=Ln(),m=g=>{!c.el||(e==null?void 0:e(g,c.el))===!1||(c.originalTouchAction=c.el.style.touchAction,c.el.style.touchAction="none",c.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",c.started=!0)},y=g=>{var w;if(g.button===0&&c.id==null){if(c.started=!1,((w=u.onPointerDown)==null?void 0:w.call(u,g))===!1)return;o&&g.stopPropagation(),a&&g.preventDefault(),c.id=g.pointerId,c.el=g.currentTarget,c.lastPosition={x:g.clientX,y:g.clientY},l&&(c.longPressTimer=setTimeout(()=>{l(g,c.el),c.longPressTriggered=!0},400)),(e||t)&&f(window,"pointermove",b,!1),f(window,"pointerup",v,!1),f(window,"pointercancel",v,!1)}},b=g=>{if(g.pointerId===c.id){const w=g.clientX-c.lastPosition.x,S=g.clientY-c.lastPosition.y;(Math.abs(w)>=r||Math.abs(S)>=r)&&!c.started&&m(g),c.started&&(t==null||t(g,w,S),c.lastPosition={x:g.clientX,y:g.clientY})}},v=g=>{var w;if(g.pointerId===c.id){c.longPressTimer&&clearTimeout(c.longPressTimer);const S=c.longPressTriggered;c.longPressTriggered=!1,c.started&&(n==null||n(g)),c.el&&(g.type!=="pointercancel"&&((w=u.onPointerUp)==null||w.call(u,g,c.el),g.target&&c.el.contains(g.target)&&(S?l==null||l(g,c.el):s==null||s(g,c.el))),document.documentElement.style.userSelect=c.originalUserSelect||"",c.el.style.touchAction=c.originalTouchAction||""),c.id=void 0,c.started=!1,h(window,"pointermove",b,!1),h(window,"pointerup",v,!1),h(window,"pointercancel",v,!1)}};return{domProps:{onPointerDown:we(y)}}}function io(e){return e.shiftKey||at(e)}function lo(){return gt("((hover: none) and (pointer: coarse))")}const co=["button","a","input","select","textarea"];function uo({item:e,index:t,renderAs:n}){const r=lo(),{selectedRows:a,columns:o,toggleRow:s,selectRow:l,onAction:u,enableSelection:d,selectionStyle:c}=p.exports.useContext(pe),f=a.includes(e.id),h=k=>k.target.closest(co.join(",")),m=k=>{c==="highlight"&&u&&!r&&!h(k)&&(k.preventDefault(),k.stopPropagation(),u(e,t))},y=!!a.length,b=k=>{h(k)||(c=="checkbox"?d&&(y||!u)?s(e):u&&u(e,t):c==="highlight"&&(r?d&&y?s(e):u==null||u(e,t):d&&l(e,io(k))))},{domProps:v}=so({onPress:b,onLongPress:r&&d?()=>s(e):void 0}),g=k=>{d&&k.key===" "?(k.preventDefault(),k.stopPropagation(),c==="checkbox"?s(e):l(e)):k.key==="Enter"&&!a.length&&u&&(k.preventDefault(),k.stopPropagation(),u(e,t))},w=k=>{r&&(k.preventDefault(),k.stopPropagation())},S={"aria-selected":f,className:er({isSelected:f}),onDoubleClick:we(m),onKeyDown:we(g),onContextMenu:we(w),...v};return P(n||"tr",{item:e,...S,children:[i(ao,{item:e}),o.map((k,N)=>i(oo,{index:N,item:e},`${e.id}-${k.key}`))]})}const fo=L(i("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function ho({index:e}){const{enableSelection:t,columns:n,sortDescriptor:r,onSortChange:a}=p.exports.useContext(pe),o=t?!1:e===0,s=e===n.length-1,l=n[e],u=Ke({isFirst:o,isLast:s,column:l}),[d,c]=p.exports.useState(!1),f=l.sortingKey||l.key,h=l.allowsSorting,{orderBy:m,orderDir:y}=r||{},b=h&&m===f;let v;b&&y==="asc"?v="ascending":b&&y==="desc"?v="descending":h&&(v="none");const g=()=>{if(!h)return;let _;b&&y==="desc"?_={orderDir:"asc",orderBy:f}:b&&y==="asc"?_={orderBy:void 0,orderDir:void 0}:_={orderDir:"desc",orderBy:f},a==null||a(_)},w=b||d,S={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return P("th",{onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},onKeyDown:_=>{(_.key===" "||_.key==="Enter")&&(_.preventDefault(),g())},onClick:g,tabIndex:-1,"aria-sort":v,className:E(u,"text-muted font-medium text-xs",h&&"cursor-pointer"),children:[l.hideHeader?i("div",{className:"sr-only",children:l.header()}):l.header(),i(Ce,{children:h&&i(ne.span,{variants:S,animate:w?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"inline-block ml-6 -mt-2",children:i(fo,{size:"xs",className:E("text-muted",y==="asc"&&m===f&&"rotate-180 transition-transform")})},"sort-icon")})]})}function po(){const e=he(),{trans:t}=J(),{data:n,selectedRows:r,onSelectionChange:a,enableSelection:o,selectionStyle:s}=p.exports.useContext(pe);if(!o||s==="highlight"||e)return null;const l=!!n.length&&n.length===r.length,u=!l&&!!r.length;return i("th",{"aria-colindex":1,className:Ke({width:"w-64 flex-shrink-0 flex-grow-0",isFirst:!0}),children:i(zn,{"aria-label":t({message:"Select all"}),isIndeterminate:u,checked:l,onChange:()=>{a(l?[]:n.map(d=>d.id))}})})}function dl({enableSelection:e=!0,columns:t,data:n,ariaLabelledBy:r,onAction:a,selectionStyle:o="checkbox",hideHeaderRow:s,renderRowAs:l,className:u,...d}){const[c,f]=X(d.selectedRows,d.defaultSelectedRows||[],d.onSelectionChange),[h,m]=X(d.sortDescriptor,void 0,d.onSortChange),y=p.exports.useCallback(S=>{const _=[...c];if(!_.includes(S.id))_.push(S.id);else{const k=_.indexOf(S.id);_.splice(k,1)}f(_)},[c,f]),b=p.exports.useCallback((S,_)=>{const k=_?[...c,S.id]:[S.id];f(k)},[c,f]),v=p.exports.useMemo(()=>({selectedRows:c,onSelectionChange:f,enableSelection:e,selectionStyle:o,data:n,columns:t,sortDescriptor:h,onSortChange:m,toggleRow:y,selectRow:b,onAction:a}),[t,n,e,o,a,f,m,c,h,y,b]),g=no({cellCount:e?t.length+1:t.length,rowCount:n.length+1}),w=s?null:i("thead",{children:P("tr",{"aria-rowindex":1,className:er({isHeader:!0}),children:[i(po,{}),t.map((S,_)=>i(ho,{index:_},S.key))]})});return i(pe.Provider,{value:v,children:P("table",{"aria-multiselectable":e?!0:void 0,"aria-labelledby":r,className:E(u,"select-none isolate outline-none text-sm w-full max-w-full align-top"),...g,children:[w,i("tbody",{children:n.map((S,_)=>i(uo,{item:S,index:_,renderAs:l},S.id))})]})})}const fl=L(i("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchOutlined");function mo({filter:e}){return i(Mn,{size:"sm",autoFocus:!0,name:`${e.key}.value`,selectionMode:"single",children:e.options.map(t=>i(kt,{value:t.key,children:i(O,{...t.label})},t.key))})}function go({filter:e}){return i(Ka,{size:"sm",name:`${e.key}.value`,autoFocus:!0,granularity:"day"})}const tr=e=>`normalized-models/${e}`;function vo(e,t,n){return Bn([tr(e),t],()=>yo(e,t),{keepPreviousData:!0,...n})}async function yo(e,t){return z.get(tr(e),{params:t}).then(n=>n.data)}const nr=(e,t)=>`normalized-models/${e}/${t}`;function rr(e,t){return Bn([nr(e,t)],()=>bo(e,t),{enabled:e!=null&&t!=null})}async function bo(e,t){return z.get(nr(e,t),{}).then(n=>n.data)}function wo({modelType:e,label:t,className:n,value:r,defaultValue:a="",onChange:o,description:s,errorMessage:l,invalid:u,openMenuOnFocus:d,autoFocus:c}){var S;const f=p.exports.useRef(null),[h,m]=p.exports.useState(""),[y,b]=X(r,a,o),v=vo(e,{query:h}),{trans:g}=J(),w=Re({size:"md"});return y?P("div",{className:n,children:[i("div",{className:w.label,children:t}),i("div",{className:E("p-10 border rounded mb-20",u&&"border-danger"),children:i(Ce,{initial:!1,mode:"wait",children:i(xo,{modelType:e,modelId:y,onEditClick:()=>{b(""),m(""),requestAnimationFrame(()=>{var _;(_=f.current)==null||_.focus()})}})})}),s&&!l&&i("div",{className:w.description,children:s}),l&&i("div",{className:w.error,children:l})]}):i(ea,{className:n,invalid:u,errorMessage:l,description:s,isAsync:!0,placeholder:g(C("Find item..")),label:t,isLoading:v.isFetching,items:(S=v.data)==null?void 0:S.results,inputValue:h,onInputValueChange:m,clearInputOnItemSelection:!0,selectionMode:"single",selectedValue:y,onSelectionChange:b,ref:f,openMenuOnFocus:d,autoFocus:c,children:_=>i(kt,{value:_.id,description:_.description,startIcon:i(qe,{src:_.image}),children:_.name},_.id)})}function xo({modelType:e,modelId:t,onEditClick:n}){const{data:r,isLoading:a}=rr(e,t);return a||!(r!=null&&r.model)?i(_o,{},"skeleton"):P(ne.div,{className:"flex items-center gap-10",...Pt,children:[i(qe,{src:r.model.image}),P("div",{children:[i("div",{children:r.model.name}),i("div",{className:"text-muted text-xs",children:r.model.description})]}),i(ta,{label:i(O,{message:"Change item"}),children:i(q,{className:"ml-auto text-muted",size:"sm",onClick:n,children:i(wa,{})})})]},"preview")}function _o(){return P(ne.div,{className:"flex items-center gap-10",...Pt,children:[i(se,{variant:"rect",size:"w-32 h-32"}),P("div",{className:"flex-auto max-h-[36px]",children:[i(se,{className:"text-xs"}),i(se,{className:"text-xs max-h-8"})]}),i(se,{variant:"icon",size:"w-24 h-24"})]})}function So({name:e,...t}){const{field:{onChange:n,value:r=""},fieldState:{invalid:a,error:o}}=Ve({name:e});return i(wo,{value:r,onChange:n,invalid:a,errorMessage:o==null?void 0:o.message,...t})}function ko({filter:e}){return i(So,{name:`${e.key}.value`,className:"mb-20",modelType:e.model,openMenuOnFocus:!0,autoFocus:!0})}const ar={"=":C("is"),"!=":C("is not"),">":C("is greater than"),">=":C("is greater than or equal to"),"<":C("is less than"),"<=":C("is less than or equal to"),has:C("Include"),doesntHave:C("Do not include"),between:C("Is between")};function Po({filter:e}){return P(p.exports.Fragment,{children:[i(Mn,{autoFocus:!0,selectionMode:"single",name:`${e.key}.operator`,className:"mb-14",size:"sm",required:!0,children:e.operators.map(t=>i(kt,{value:t,children:i(O,{...ar[t]})},t))}),i(na,{size:"sm",name:`${e.key}.value`,type:e.inputType,required:!0})]})}const or=p.exports.forwardRef((e,t)=>{const{isInactive:n,filter:r,...a}=e;return n?i(Co,{filter:r,...a,ref:t}):i(Ro,{filter:r,...a,ref:t})}),Co=p.exports.forwardRef(({filter:e,...t},n)=>i(te,{variant:"outline",size:"xs",color:"paper",radius:"rounded-md",border:"border",ref:n,endIcon:i(Hn,{}),...t,children:i(O,{...e.label})})),Ro=p.exports.forwardRef(({filter:e,children:t,...n},r)=>{const a=e.type===B.BooleanToggle;return P(te,{variant:"outline",size:"xs",color:"primary",radius:"rounded-r-md",border:"border-y border-r",endIcon:!a&&i(Hn,{}),ref:r,...n,children:[i("span",{className:E(!a&&"border-r border-r-primary-light mr-8 pr-8"),children:i(O,{...e.label})}),t]})});function Ge(e){const{onValueChange:t,isInactive:n,filter:r,label:a}=e;return P(St,{offset:10,type:"popover",onClose:o=>{o!==void 0&&t(o)},children:[i(or,{isInactive:n,filter:r,children:a}),i(Eo,{...e})]})}function Eo({filter:e,panel:t,value:n,operator:r}){const a=ra({defaultValues:{[e.key]:{value:n,operator:r}}}),{close:o,formId:s}=xt();return P(je,{size:"xs",children:[i(aa,{children:i(O,{...e.label})}),i(_t,{padding:"px-14 pt-14 pb-4",children:P(oa,{form:a,id:s,onSubmit:l=>{o(l[e.key])},children:[e.description&&i("div",{className:"text-muted text-xs mb-14",children:i(O,{...e.description})}),t]})}),i(Fn,{children:i(te,{form:s,type:"submit",variant:"flat",color:"primary",size:"xs",children:i(O,{message:"Apply"})})})]})}function Uo(e){switch(e.filter.type){case B.DatePicker:return i(Do,{...e});case B.BooleanToggle:return i(Io,{...e});case B.Select:return i(Ao,{...e});case B.Input:return i(To,{...e});case B.SelectModel:return i(No,{...e})}}function Do(e){const{value:t,filter:n}=e;let r;return t.preset!==void 0?r=i(O,{...Ut[t.preset].label}):r=i(Zn,{start:new Date(t.start),end:new Date(t.end),options:{dateStyle:"medium"}}),i(Ge,{...e,label:r,panel:i(go,{filter:n})})}function Io({filter:e,isInactive:t,onValueChange:n}){return i(or,{onClick:()=>{n({value:!0})},filter:e,isInactive:t})}function Ao(e){const{filter:t,value:n}=e,r=t.options.find(a=>a.key===n);return i(Ge,{...e,label:r?i(O,{...r.label}):null,panel:i(mo,{filter:t})})}function To(e){const{filter:t,value:n,operator:r}=e,a=r?i(O,{...ar[r]}):null;return i(Ge,{...e,label:P(p.exports.Fragment,{children:[a," ",n]}),panel:i(Po,{filter:t})})}function No(e){const{value:t,filter:n}=e,{isLoading:r,data:a}=rr(n.model,t),o=P(p.exports.Fragment,{children:[i(se,{variant:"avatar",size:"w-18 h-18 mr-6"}),i(se,{variant:"rect",size:"w-50"})]}),s=P(p.exports.Fragment,{children:[i(qe,{size:"xs",src:a==null?void 0:a.model.image,className:"mr-6"}),a==null?void 0:a.model.name]});return i(Ge,{...e,label:r||!a?o:s,panel:i(ko,{filter:n})})}function hl({filters:e,pinnedFilters:t,className:n}){const{decodedFilters:r,remove:a,replaceAll:o}=eo(e,t);return r.length?i("div",{className:E("flex items-center gap-6 overflow-x-auto",n),children:r.map((s,l)=>{const u=e.find(c=>c.key===s.key),d=c=>{const f=[...r];f.splice(l,1,{key:u.key,value:c.value,isInactive:!1,operator:c.operator||u.defaultOperator}),o(f)};return P("div",{children:[!s.isInactive&&i(q,{variant:"outline",color:"primary",size:"xs",radius:"rounded-l-md",onClick:()=>{a(s.key)},children:i(jn,{})}),i(Uo,{filter:u,isInactive:s.isInactive,value:s.valueKey||s.value,operator:s.operator,onValueChange:d})]},s.key)})}):null}const pl=L(i("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined"),qt=L(i("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined");function ot(e,t){const n=document.createElement("a");n.href=e,t&&(n.download=t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}function Oo({className:e,children:t,size:n,color:r,radius:a,selectable:o}){return i("div",{className:E(e,"flex items-center gap-8 flex-wrap"),children:p.exports.Children.map(t,s=>{if(p.exports.isValidElement(s))return p.exports.cloneElement(s,{size:n,color:r,selectable:o,radius:a})})})}function Fo(){const e=p.exports.createContext(void 0);return{Provider:({createStore:a,children:o})=>{const s=p.exports.useRef();return s.current||(s.current=a()),p.exports.createElement(e.Provider,{value:s.current},o)},useStore:(a,o)=>{const s=p.exports.useContext(e);if(!s)throw new Error("Seems like you have not used zustand provider as an ancestor.");return sa(s,a,o)},useStoreApi:()=>{const a=p.exports.useContext(e);if(!a)throw new Error("Seems like you have not used zustand provider as an ancestor.");return p.exports.useMemo(()=>({getState:a.getState,setState:a.setState,subscribe:a.subscribe,destroy:a.destroy}),[a])}}}const $o=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);var zo=e=>!$o.has(e&&e.code);function Kt(e,t,n,r,a,o,s){try{var l=e[o](s),u=l.value}catch(d){n(d);return}l.done?t(u):Promise.resolve(u).then(r,a)}function sr(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function s(u){Kt(o,r,a,s,l,"next",u)}function l(u){Kt(o,r,a,s,l,"throw",u)}s(void 0)})}}function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gt(Object(n),!0).forEach(function(r){Lo(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st="axios-retry";function ir(e){return!e.response&&Boolean(e.code)&&e.code!=="ECONNABORTED"&&zo(e)}var lr=["get","head","options"],Mo=lr.concat(["put","delete"]);function At(e){return e.code!=="ECONNABORTED"&&(!e.response||e.response.status>=500&&e.response.status<=599)}function Bo(e){return e.config?At(e)&&lr.indexOf(e.config.method)!==-1:!1}function cr(e){return e.config?At(e)&&Mo.indexOf(e.config.method)!==-1:!1}function ur(e){return ir(e)||cr(e)}function Ho(){return 0}function jo(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=Math.pow(2,e)*100,n=t*.2*Math.random();return t+n}function Xt(e){var t=e[st]||{};return t.retryCount=t.retryCount||0,e[st]=t,t}function Vo(e,t){return Wt(Wt({},t),e[st])}function qo(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}function Ko(e,t,n,r){return it.apply(this,arguments)}function it(){return it=sr(function*(e,t,n,r){var a=n.retryCount<e&&t(r);if(typeof a=="object")try{var o=yield a;return o!==!1}catch{return!1}return a}),it.apply(this,arguments)}function re(e,t){e.interceptors.request.use(n=>{var r=Xt(n);return r.lastRequestTime=Date.now(),n}),e.interceptors.response.use(null,function(){var n=sr(function*(r){var{config:a}=r;if(!a)return Promise.reject(r);var{retries:o=3,retryCondition:s=ur,retryDelay:l=Ho,shouldResetTimeout:u=!1,onRetry:d=()=>{}}=Vo(a,t),c=Xt(a);if(yield Ko(o,s,c,r)){c.retryCount+=1;var f=l(c.retryCount,r);if(qo(e,a),!u&&a.timeout&&c.lastRequestTime){var h=Date.now()-c.lastRequestTime;a.timeout=Math.max(a.timeout-h-f,1)}return a.transformRequest=[m=>m],d(c.retryCount,r,a),new Promise(m=>setTimeout(()=>m(e(a)),f))}return Promise.reject(r)});return function(r){return n.apply(this,arguments)}}())}re.isNetworkError=ir;re.isSafeRequestError=Bo;re.isIdempotentRequestError=cr;re.isNetworkOrIdempotentRequestError=ur;re.exponentialDelay=jo;re.isRetryableError=At;const dr=1024*1024,Go=20*dr,Wo=10,Xo=5;class We{constructor(t,n){I(this,"abortController");I(this,"chunks",[]);I(this,"uploadId");I(this,"fileKey");I(this,"chunkAxios");I(this,"abortedByUser",!1);I(this,"uploadedParts");this.file=t,this.config=n,this.abortController=new AbortController,this.chunkAxios=Vn.create(),re(this.chunkAxios,{retries:3})}get storageKey(){return`s3-multipart::${this.file.fingerprint}`}async start(){var r,a,o,s,l;const t=nt(this.storageKey);if(t&&await this.getUploadedParts(t),!((r=this.uploadedParts)!=null&&r.length)&&(await this.createMultipartUpload(),!this.uploadId))return;if(this.prepareChunks(),await this.uploadParts()==="done"){if(!await this.completeMultipartUpload())return;try{const d=await this.createFileEntry();if(d!=null&&d.fileEntry){(o=(a=this.config).onSuccess)==null||o.call(a,d==null?void 0:d.fileEntry),Ze(this.storageKey);return}}catch{}}this.abortController.signal.aborted||this.abortController.abort(),this.abortedByUser||(l=(s=this.config).onError)==null||l.call(s)}async abort(){this.abortedByUser=!0,this.abortController.abort(),await this.abortUploadOnS3()}async uploadParts(){const t=this.chunks.filter(r=>!r.done);if(!t.length)return Promise.resolve("done");const n=await this.batchSignUrls(t.slice(0,Wo));if(!!n){for(;n.length;){const a=n.splice(0,Xo).map(s=>this.uploadPartToS3(s));if(!(await Promise.all(a)).every(s=>s))return}return await this.uploadParts()}}async batchSignUrls(t){const n=await this.chunkAxios.post("api/v1/s3/multipart/batch-sign-part-urls",{partNumbers:t.map(r=>r.partNumber),uploadId:this.uploadId,key:this.fileKey},{signal:this.abortController.signal}).then(r=>r.data).catch(r=>{this.abortController.signal.aborted||this.abortController.abort()});return n==null?void 0:n.urls}async uploadPartToS3({url:t,partNumber:n}){const r=this.chunks.find(a=>a.partNumber===n);if(!!r)return this.chunkAxios.put(t,r.blob,{withCredentials:!1,signal:this.abortController.signal,onUploadProgress:a=>{var s,l;if(!a.lengthComputable)return;r.bytesUploaded=a.loaded;const o=this.chunks.reduce((u,d)=>u+d.bytesUploaded,0);(l=(s=this.config).onProgress)==null||l.call(s,{bytesUploaded:o,bytesTotal:this.file.size})}}).then(a=>{const o=a.headers.etag;if(o)return r.done=!0,r.etag=o,!0}).catch(a=>{!this.abortController.signal.aborted&&a!==void 0&&this.abortController.abort()})}async createMultipartUpload(){const t=await z.post("s3/multipart/create",{filename:this.file.name,mime:this.file.mime,size:this.file.size,extension:this.file.extension,...this.config.metadata}).then(n=>n.data).catch(n=>{var r,a;n.code!=="ERR_CANCELED"&&((a=(r=this.config).onError)==null||a.call(r,le(n)))});t&&(this.uploadId=t.uploadId,this.fileKey=t.key,vt(this.storageKey,{createdAt:new Date().toISOString(),fileKey:this.fileKey,uploadId:this.uploadId}))}async getUploadedParts({fileKey:t,uploadId:n}){var a;const r=await z.post("s3/multipart/get-uploaded-parts",{key:t,uploadId:n}).then(o=>o.data).catch(()=>(Ze(this.storageKey),null));(a=r==null?void 0:r.parts)!=null&&a.length&&(this.uploadedParts=r.parts,this.uploadId=n,this.fileKey=t)}async completeMultipartUpload(){return z.post("s3/multipart/complete",{key:this.fileKey,uploadId:this.uploadId,parts:this.chunks.map(t=>({ETag:t.etag,PartNumber:t.partNumber}))}).then(t=>t.data).catch(()=>{var t,n;(n=(t=this.config).onError)==null||n.call(t),this.abortUploadOnS3()}).finally(()=>{Ze(this.storageKey)})}async createFileEntry(){return await z.post("s3/entries",{...this.config.metadata,clientMime:this.file.mime,clientName:this.file.name,filename:this.fileKey.split("/").pop(),size:this.file.size,clientExtension:this.file.extension}).then(t=>t.data).catch()}prepareChunks(){var r;this.chunks=[];const t=Math.max(5*dr,Math.ceil(this.file.size/1e4)),n=Math.max(Go,t);if(this.file.size===0)this.chunks.push({blob:this.file.native,done:!1,partNumber:1,bytesUploaded:0});else{let a=1;for(let o=0;o<this.file.size;o+=n){const s=Math.min(this.file.size,o+n),l=(r=this.uploadedParts)==null?void 0:r.find(u=>u.PartNumber===a);this.chunks.push({blob:this.file.native.slice(o,s),done:!!l,partNumber:a,etag:l?l.ETag:void 0,bytesUploaded:l!=null&&l.Size?parseInt(l==null?void 0:l.Size):0}),a++}}}abortUploadOnS3(){return z.post("s3/multipart/abort",{key:this.fileKey,uploadId:this.uploadId})}static async create(t,n){return new We(t,n)}}var Le=(e=>(e.public="public",e.uploads="uploads",e))(Le||{});const fr="3.7.2",Yo=fr,Zo=typeof atob=="function",Qo=typeof btoa=="function",me=typeof Buffer=="function",Yt=typeof TextDecoder=="function"?new TextDecoder:void 0,Zt=typeof TextEncoder=="function"?new TextEncoder:void 0,Jo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",be=Array.prototype.slice.call(Jo),Ue=(e=>{let t={};return e.forEach((n,r)=>t[n]=r),t})(be),es=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,F=String.fromCharCode.bind(String),Qt=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):(e,t=n=>n)=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),hr=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),pr=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),mr=e=>{let t,n,r,a,o="";const s=e.length%3;for(let l=0;l<e.length;){if((n=e.charCodeAt(l++))>255||(r=e.charCodeAt(l++))>255||(a=e.charCodeAt(l++))>255)throw new TypeError("invalid character found");t=n<<16|r<<8|a,o+=be[t>>18&63]+be[t>>12&63]+be[t>>6&63]+be[t&63]}return s?o.slice(0,s-3)+"===".substring(s):o},Tt=Qo?e=>btoa(e):me?e=>Buffer.from(e,"binary").toString("base64"):mr,lt=me?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let r=0,a=e.length;r<a;r+=4096)n.push(F.apply(null,e.subarray(r,r+4096)));return Tt(n.join(""))},Ae=(e,t=!1)=>t?hr(lt(e)):lt(e),ts=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?F(192|t>>>6)+F(128|t&63):F(224|t>>>12&15)+F(128|t>>>6&63)+F(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return F(240|t>>>18&7)+F(128|t>>>12&63)+F(128|t>>>6&63)+F(128|t&63)}},ns=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,gr=e=>e.replace(ns,ts),Jt=me?e=>Buffer.from(e,"utf8").toString("base64"):Zt?e=>lt(Zt.encode(e)):e=>Tt(gr(e)),ce=(e,t=!1)=>t?hr(Jt(e)):Jt(e),en=e=>ce(e,!0),rs=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,as=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return F((n>>>10)+55296)+F((n&1023)+56320);case 3:return F((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return F((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},vr=e=>e.replace(rs,as),yr=e=>{if(e=e.replace(/\s+/g,""),!es.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",r,a;for(let o=0;o<e.length;)t=Ue[e.charAt(o++)]<<18|Ue[e.charAt(o++)]<<12|(r=Ue[e.charAt(o++)])<<6|(a=Ue[e.charAt(o++)]),n+=r===64?F(t>>16&255):a===64?F(t>>16&255,t>>8&255):F(t>>16&255,t>>8&255,t&255);return n},Nt=Zo?e=>atob(pr(e)):me?e=>Buffer.from(e,"base64").toString("binary"):yr,br=me?e=>Qt(Buffer.from(e,"base64")):e=>Qt(Nt(e),t=>t.charCodeAt(0)),wr=e=>br(xr(e)),os=me?e=>Buffer.from(e,"base64").toString("utf8"):Yt?e=>Yt.decode(br(e)):e=>vr(Nt(e)),xr=e=>pr(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),ct=e=>os(xr(e)),ss=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},_r=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),Sr=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,_r(n));e("fromBase64",function(){return ct(this)}),e("toBase64",function(t){return ce(this,t)}),e("toBase64URI",function(){return ce(this,!0)}),e("toBase64URL",function(){return ce(this,!0)}),e("toUint8Array",function(){return wr(this)})},kr=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,_r(n));e("toBase64",function(t){return Ae(this,t)}),e("toBase64URI",function(){return Ae(this,!0)}),e("toBase64URL",function(){return Ae(this,!0)})},is=()=>{Sr(),kr()},ls={version:fr,VERSION:Yo,atob:Nt,atobPolyfill:yr,btoa:Tt,btoaPolyfill:mr,fromBase64:ct,toBase64:ce,encode:ce,encodeURI:en,encodeURL:en,utob:gr,btou:vr,decode:ct,isValid:ss,fromUint8Array:Ae,toUint8Array:wr,extendString:Sr,extendUint8Array:kr,extendBuiltins:is};function ut(e){return ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(e)}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cs(e,t,n){return t&&tn(e.prototype,t),n&&tn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function us(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ds(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}function fs(e){var t=Pr();return function(){var r=Pe(e),a;if(t){var o=Pe(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return hs(this,a)}}function hs(e,t){if(t&&(ut(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ps(e)}function ps(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(e){var t=typeof Map=="function"?new Map:void 0;return dt=function(r){if(r===null||!ms(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,a)}function a(){return Te(r,arguments,Pe(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),ke(a,r)},dt(e)}function Te(e,t,n){return Pr()?Te=Reflect.construct.bind():Te=function(a,o,s){var l=[null];l.push.apply(l,o);var u=Function.bind.apply(a,l),d=new u;return s&&ke(d,s.prototype),d},Te.apply(null,arguments)}function Pr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ms(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function ke(e,t){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ke(e,t)}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pe(e)}var De=function(e){ds(n,e);var t=fs(n);function n(r){var a,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(us(this,n),a=t.call(this,r),a.originalRequest=s,a.originalResponse=l,a.causingError=o,o!=null&&(r+=", caused by ".concat(o.toString())),s!=null){var u=s.getHeader("X-Request-ID")||"n/a",d=s.getMethod(),c=s.getURL(),f=l?l.getStatus():"n/a",h=l?l.getBody()||"":"n/a";r+=", originated from request (method: ".concat(d,", url: ").concat(c,", response code: ").concat(f,", response text: ").concat(h,", request id: ").concat(u,")")}return a.message=r,a}return cs(n)}(dt(Error));function gs(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}function Cr(e,t){return ws(e)||bs(e,t)||ys(e,t)||vs()}function vs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ys(e,t){if(!!e){if(typeof e=="string")return nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nn(e,t)}}function nn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bs(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,o=!1,s,l;try{for(n=n.call(e);!(a=(s=n.next()).done)&&(r.push(s.value),!(t&&r.length===t));a=!0);}catch(u){o=!0,l=u}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw l}}return r}}function ws(e){if(Array.isArray(e))return e}function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rn(Object(n),!0).forEach(function(r){xs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function an(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ss(e,t,n){return t&&an(e.prototype,t),n&&an(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var ks={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},Me=function(){function e(t,n){_s(this,e),"resume"in n&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=n,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return Ss(e,[{key:"findPreviousUploads",value:function(){var n=this;return this.options.fingerprint(this.file,this.options).then(function(r){return n._urlStorage.findUploadsByFingerprint(r)})}},{key:"resumeFromPreviousUpload",value:function(n){this.url=n.uploadUrl||null,this._parallelUploadUrls=n.parallelUploadUrls||null,this._urlStorageKey=n.urlStorageKey}},{key:"start",value:function(){var n=this,r=this.file;if(!r){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var a=this.options.retryDelays;if(a!=null&&Object.prototype.toString.call(a)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var o=0,s=["uploadUrl","uploadSize","uploadLengthDeferred"];o<s.length;o++){var l=s[o];if(this.options[l]){this._emitError(new Error("tus: cannot use the ".concat(l," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(r,this.options).then(function(u){return n._fingerprint=u,n._source?n._source:n.options.fileReader.openFile(r,n.options.chunkSize)}).then(function(u){if(n._source=u,n.options.uploadLengthDeferred)n._size=null;else if(n.options.uploadSize!=null){if(n._size=Number(n.options.uploadSize),Number.isNaN(n._size)){n._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(n._size=n._source.size,n._size==null){n._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}n.options.parallelUploads>1||n._parallelUploadUrls!=null?n._startParallelUpload():n._startSingleUpload()}).catch(function(u){n._emitError(u)})}},{key:"_startParallelUpload",value:function(){var n,r=this,a=this._size,o=0;this._parallelUploads=[];var s=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,l=(n=this.options.parallelUploadBoundaries)!==null&&n!==void 0?n:Cs(this._source.size,s);this._parallelUploadUrls&&l.forEach(function(c,f){c.uploadUrl=r._parallelUploadUrls[f]||null}),this._parallelUploadUrls=new Array(l.length);var u=l.map(function(c,f){var h=0;return r._source.slice(c.start,c.end).then(function(m){var y=m.value;return new Promise(function(b,v){var g=ae(ae({},r.options),{},{uploadUrl:c.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:ae(ae({},r.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:b,onError:v,onProgress:function(_){o=o-h+_,h=_,r._emitProgress(o,a)},_onUploadUrlAvailable:function(){r._parallelUploadUrls[f]=w.url,r._parallelUploadUrls.filter(function(_){return Boolean(_)}).length===l.length&&r._saveUploadInUrlStorage()}}),w=new e(y,g);w.start(),r._parallelUploads.push(w)})})}),d;Promise.all(u).then(function(){d=r._openRequest("POST",r.options.endpoint),d.setHeader("Upload-Concat","final;".concat(r._parallelUploadUrls.join(" ")));var c=on(r.options.metadata);return c!==""&&d.setHeader("Upload-Metadata",c),r._sendRequest(d,null)}).then(function(c){if(!oe(c.getStatus(),200)){r._emitHttpError(d,c,"tus: unexpected response while creating upload");return}var f=c.getHeader("Location");if(f==null){r._emitHttpError(d,c,"tus: invalid or missing Location header");return}r.url=un(r.options.endpoint,f),"Created upload at ".concat(r.url),r._emitSuccess()}).catch(function(c){r._emitError(c)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,this.url!=null){"Resuming upload from previous URL: ".concat(this.url),this._resumeUpload();return}if(this.options.uploadUrl!=null){"Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,this._resumeUpload();return}this._createUpload()}},{key:"abort",value:function(n){var r=this;return this._parallelUploads!=null&&this._parallelUploads.forEach(function(a){a.abort(n)}),this._req!==null&&this._req.abort(),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!n||this.url==null?Promise.resolve():e.terminate(this.url,this.options).then(function(){return r._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(n,r,a,o){this._emitError(new De(a,o,n,r))}},{key:"_emitError",value:function(n){var r=this;if(!this._aborted){if(this.options.retryDelays!=null){var a=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(a&&(this._retryAttempt=0),cn(n,this._retryAttempt,this.options)){var o=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){r.start()},o);return}}if(typeof this.options.onError=="function")this.options.onError(n);else throw n}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess()}},{key:"_emitProgress",value:function(n,r){typeof this.options.onProgress=="function"&&this.options.onProgress(n,r)}},{key:"_emitChunkComplete",value:function(n,r,a){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(n,r,a)}},{key:"_createUpload",value:function(){var n=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var r=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?r.setHeader("Upload-Defer-Length",1):r.setHeader("Upload-Length",this._size);var a=on(this.options.metadata);a!==""&&r.setHeader("Upload-Metadata",a);var o;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,o=this._addChunkToRequest(r)):o=this._sendRequest(r,null),o.then(function(s){if(!oe(s.getStatus(),200)){n._emitHttpError(r,s,"tus: unexpected response while creating upload");return}var l=s.getHeader("Location");if(l==null){n._emitHttpError(r,s,"tus: invalid or missing Location header");return}if(n.url=un(n.options.endpoint,l),"Created upload at ".concat(n.url),typeof n.options._onUploadUrlAvailable=="function"&&n.options._onUploadUrlAvailable(),n._size===0){n._emitSuccess(),n._source.close();return}n._saveUploadInUrlStorage().then(function(){n.options.uploadDataDuringCreation?n._handleUploadResponse(r,s):(n._offset=0,n._performUpload())})}).catch(function(s){n._emitHttpError(r,null,"tus: failed to create upload",s)})}},{key:"_resumeUpload",value:function(){var n=this,r=this._openRequest("HEAD",this.url),a=this._sendRequest(r,null);a.then(function(o){var s=o.getStatus();if(!oe(s,200)){if(s===423){n._emitHttpError(r,o,"tus: upload is currently locked; retry later");return}if(oe(s,400)&&n._removeFromUrlStorage(),!n.options.endpoint){n._emitHttpError(r,o,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}n.url=null,n._createUpload();return}var l=parseInt(o.getHeader("Upload-Offset"),10);if(Number.isNaN(l)){n._emitHttpError(r,o,"tus: invalid or missing offset value");return}var u=parseInt(o.getHeader("Upload-Length"),10);if(Number.isNaN(u)&&!n.options.uploadLengthDeferred){n._emitHttpError(r,o,"tus: invalid or missing length value");return}typeof n.options._onUploadUrlAvailable=="function"&&n.options._onUploadUrlAvailable(),n._saveUploadInUrlStorage().then(function(){if(l===u){n._emitProgress(u,u),n._emitSuccess();return}n._offset=l,n._performUpload()})}).catch(function(o){n._emitHttpError(r,null,"tus: failed to resume upload",o)})}},{key:"_performUpload",value:function(){var n=this;if(!this._aborted){var r;this.options.overridePatchMethod?(r=this._openRequest("POST",this.url),r.setHeader("X-HTTP-Method-Override","PATCH")):r=this._openRequest("PATCH",this.url),r.setHeader("Upload-Offset",this._offset);var a=this._addChunkToRequest(r);a.then(function(o){if(!oe(o.getStatus(),200)){n._emitHttpError(r,o,"tus: unexpected response while uploading chunk");return}n._handleUploadResponse(r,o)}).catch(function(o){n._aborted||n._emitHttpError(r,null,"tus: failed to upload chunk at offset ".concat(n._offset),o)})}}},{key:"_addChunkToRequest",value:function(n){var r=this,a=this._offset,o=this._offset+this.options.chunkSize;return n.setProgressHandler(function(s){r._emitProgress(a+s,r._size)}),n.setHeader("Content-Type","application/offset+octet-stream"),(o===1/0||o>this._size)&&!this.options.uploadLengthDeferred&&(o=this._size),this._source.slice(a,o).then(function(s){var l=s.value,u=s.done;return r.options.uploadLengthDeferred&&u&&(r._size=r._offset+(l&&l.size?l.size:0),n.setHeader("Upload-Length",r._size)),l===null?r._sendRequest(n):(r._emitProgress(r._offset,r._size),r._sendRequest(n,l))})}},{key:"_handleUploadResponse",value:function(n,r){var a=parseInt(r.getHeader("Upload-Offset"),10);if(Number.isNaN(a)){this._emitHttpError(n,r,"tus: invalid or missing offset value");return}if(this._emitProgress(a,this._size),this._emitChunkComplete(a-this._offset,a,this._size),this._offset=a,a===this._size){this._emitSuccess(),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(n,r){var a=sn(n,r,this.options);return this._req=a,a}},{key:"_removeFromUrlStorage",value:function(){var n=this;!this._urlStorageKey||(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(r){n._emitError(r)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var n=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||this._urlStorageKey!==null)return Promise.resolve();var r={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?r.parallelUploadUrls=this._parallelUploadUrls:r.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,r).then(function(a){n._urlStorageKey=a})}},{key:"_sendRequest",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return ln(n,r,this.options)}}],[{key:"terminate",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=sn("DELETE",n,r);return ln(a,null,r).then(function(o){if(o.getStatus()!==204)throw new De("tus: unexpected response while terminating upload",null,a,o)}).catch(function(o){if(o instanceof De||(o=new De("tus: failed to terminate upload",o,a,null)),!cn(o,0,r))throw o;var s=r.retryDelays[0],l=r.retryDelays.slice(1),u=ae(ae({},r),{},{retryDelays:l});return new Promise(function(d){return setTimeout(d,s)}).then(function(){return e.terminate(n,u)})})}}]),e}();function on(e){return Object.entries(e).map(function(t){var n=Cr(t,2),r=n[0],a=n[1];return"".concat(r," ").concat(ls.encode(String(a)))}).join(",")}function oe(e,t){return e>=t&&e<t+100}function sn(e,t,n){var r=n.httpStack.createRequest(e,t);r.setHeader("Tus-Resumable","1.0.0");var a=n.headers||{};if(Object.entries(a).forEach(function(s){var l=Cr(s,2),u=l[0],d=l[1];r.setHeader(u,d)}),n.addRequestId){var o=gs();r.setHeader("X-Request-ID",o)}return r}function ln(e,t,n){var r=typeof n.onBeforeRequest=="function"?Promise.resolve(n.onBeforeRequest(e)):Promise.resolve();return r.then(function(){return e.send(t).then(function(a){var o=typeof n.onAfterResponse=="function"?Promise.resolve(n.onAfterResponse(e,a)):Promise.resolve();return o.then(function(){return a})})})}function Ps(){var e=!0;return typeof window<"u"&&"navigator"in window&&window.navigator.onLine===!1&&(e=!1),e}function cn(e,t,n){if(n.retryDelays==null||t>=n.retryDelays.length||e.originalRequest==null)return!1;if(n&&typeof n.onShouldRetry=="function")return n.onShouldRetry(e,t,n);var r=e.originalResponse?e.originalResponse.getStatus():0;return(!oe(r,400)||r===409||r===423)&&Ps()}function un(e,t){return new _a(t,e).toString()}function Cs(e,t){for(var n=Math.floor(e/t),r=[],a=0;a<t;a++)r.push({start:n*a,end:n*(a+1)});return r[t-1].end=e,r}Me.defaultOptions=ks;function Rs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Es(e,t,n){return t&&dn(e.prototype,t),n&&dn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Us=function(){function e(){Rs(this,e)}return Es(e,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(n){return Promise.resolve([])}},{key:"removeUpload",value:function(n){return Promise.resolve()}},{key:"addUpload",value:function(n,r){return Promise.resolve(null)}}]),e}();function Ds(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Is(e,t,n){return t&&fn(e.prototype,t),n&&fn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var ft=!1;try{ft="localStorage"in window;var hn="tusSupport";localStorage.setItem(hn,localStorage.getItem(hn))}catch(e){if(e.code===e.SECURITY_ERR||e.code===e.QUOTA_EXCEEDED_ERR)ft=!1;else throw e}var As=ft,Ts=function(){function e(){Ds(this,e)}return Is(e,[{key:"findAllUploads",value:function(){var n=this._findEntries("tus::");return Promise.resolve(n)}},{key:"findUploadsByFingerprint",value:function(n){var r=this._findEntries("tus::".concat(n,"::"));return Promise.resolve(r)}},{key:"removeUpload",value:function(n){return localStorage.removeItem(n),Promise.resolve()}},{key:"addUpload",value:function(n,r){var a=Math.round(Math.random()*1e12),o="tus::".concat(n,"::").concat(a);return localStorage.setItem(o,JSON.stringify(r)),Promise.resolve(o)}},{key:"_findEntries",value:function(n){for(var r=[],a=0;a<localStorage.length;a++){var o=localStorage.key(a);if(o.indexOf(n)===0)try{var s=JSON.parse(localStorage.getItem(o));s.urlStorageKey=o,r.push(s)}catch{}}return r}}]),e}();function Ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ft(e,t,n){return t&&pn(e.prototype,t),n&&pn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Ns=function(){function e(){Ot(this,e)}return Ft(e,[{key:"createRequest",value:function(n,r){return new Os(n,r)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),Os=function(){function e(t,n){Ot(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,n,!0),this._method=t,this._url=n,this._headers={}}return Ft(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(n,r){this._xhr.setRequestHeader(n,r),this._headers[n]=r}},{key:"getHeader",value:function(n){return this._headers[n]}},{key:"setProgressHandler",value:function(n){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(r){!r.lengthComputable||n(r.loaded)})}},{key:"send",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(a,o){n._xhr.onload=function(){a(new Fs(n._xhr))},n._xhr.onerror=function(s){o(s)},n._xhr.send(r)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),Fs=function(){function e(t){Ot(this,e),this._xhr=t}return Ft(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(n){return this._xhr.getResponseHeader(n)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),Rr=function(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"};function $s(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var a=r.response;t(a)},r.onerror=function(a){n(a)},r.open("GET",e),r.send()})}var zs=function(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")};function Ls(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){var a=new Uint8Array(r.result);t({value:a})},r.onerror=function(a){n(a)},r.readAsArrayBuffer(e)})}function Ms(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bs(e,t,n){return t&&mn(e.prototype,t),n&&mn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var gn=function(){function e(t){Ms(this,e),this._file=t,this.size=t.size}return Bs(e,[{key:"slice",value:function(n,r){if(zs())return Ls(this._file.slice(n,r));var a=this._file.slice(n,r);return Promise.resolve({value:a})}},{key:"close",value:function(){}}]),e}();function Hs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function js(e,t,n){return t&&vn(e.prototype,t),n&&vn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function yn(e){return e===void 0?0:e.size!==void 0?e.size:e.length}function Vs(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}throw new Error("Unknown data type")}var qs=function(){function e(t){Hs(this,e),this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return js(e,[{key:"slice",value:function(n,r){return n<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(n,r)}},{key:"_readUntilEnoughDataOrDone",value:function(n,r){var a=this,o=r<=this._bufferOffset+yn(this._buffer);if(this._done||o){var s=this._getDataFromBuffer(n,r),l=s==null?this._done:!1;return Promise.resolve({value:s,done:l})}return this._reader.read().then(function(u){var d=u.value,c=u.done;return c?a._done=!0:a._buffer===void 0?a._buffer=d:a._buffer=Vs(a._buffer,d),a._readUntilEnoughDataOrDone(n,r)})}},{key:"_getDataFromBuffer",value:function(n,r){n>this._bufferOffset&&(this._buffer=this._buffer.slice(n-this._bufferOffset),this._bufferOffset=n);var a=yn(this._buffer)===0;return this._done&&a?null:this._buffer.slice(0,r-n)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),e}();function Ks(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gs(e,t,n){return t&&bn(e.prototype,t),n&&bn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Ws=function(){function e(){Ks(this,e)}return Gs(e,[{key:"openFile",value:function(n,r){return Rr()&&n&&typeof n.uri<"u"?$s(n.uri).then(function(a){return new gn(a)}).catch(function(a){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(a))}):typeof n.slice=="function"&&typeof n.size<"u"?Promise.resolve(new gn(n)):typeof n.read=="function"?(r=Number(r),Number.isFinite(r)?Promise.resolve(new qs(n,r)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"))}}]),e}();function Xs(e,t){return Rr()?Promise.resolve(Ys(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}function Ys(e,t){var n=e.exif?Zs(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",n,t.endpoint].join("/")}function Zs(e){var t=0;if(e.length===0)return t;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);t=(t<<5)-t+r,t&=t}return t}function ht(e){return ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(e)}function Qs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Js(e,t,n){return t&&wn(e.prototype,t),n&&wn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ei(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}function pt(e,t){return pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},pt(e,t)}function ti(e){var t=ai();return function(){var r=Be(e),a;if(t){var o=Be(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return ni(this,a)}}function ni(e,t){if(t&&(ht(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ri(e)}function ri(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ai(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Be(e)}function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xn(Object(n),!0).forEach(function(r){oi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _n=ie(ie({},Me.defaultOptions),{},{httpStack:new Ns,fileReader:new Ws,urlStorage:As?new Ts:new Us,fingerprint:Xs}),si=function(e){ei(n,e);var t=ti(n);function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Qs(this,n),a=ie(ie({},_n),a),t.call(this,r,a)}return Js(n,null,[{key:"terminate",value:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o=ie(ie({},_n),o),Me.terminate(a,o)}}]),n}(Me);class Xe{constructor(t){this.upload=t}start(){this.upload.start()}abort(){return this.upload.abort(!0)}static async create(t,{onProgress:n,onSuccess:r,onError:a,metadata:o,chunkSize:s}){const l=["tus",t.fingerprint,"drive"].join("-"),u=new si(t.native,{fingerprint:()=>Promise.resolve(l),removeFingerprintOnSuccess:!0,endpoint:"api/v1/tus/upload",chunkSize:s,retryDelays:[0,3e3,5e3,1e4,2e4],overridePatchMethod:!0,metadata:{name:window.btoa(t.id),clientName:t.name,clientExtension:t.extension,clientMime:t.mime||"",clientSize:`${t.size}`,...o},headers:{"X-XSRF-TOKEN":ia.getCookie("XSRF-TOKEN")},onError:c=>{var f;if("originalResponse"in c)try{const h=(f=JSON.parse(c.originalResponse.getBody()))==null?void 0:f.message;a==null||a(h)}catch{a==null||a()}else a==null||a()},onProgress(c,f){n==null||n({bytesUploaded:c,bytesTotal:f})},onSuccess:async()=>{var f;const c=(f=u.url)==null?void 0:f.split("/").pop();try{if(c){const h=await ii(c);r==null||r(h.fileEntry)}}catch(h){localStorage.removeItem(l),a==null||a(le(h))}}}),d=await u.findPreviousUploads();return d.length&&u.resumeFromPreviousUpload(d[0]),new Xe(u)}}function ii(e){return z.post("tus/entries",{uploadKey:e}).then(t=>t.data)}class $t{constructor(t,n){I(this,"abortController");this.file=t,this.config=n,this.abortController=new AbortController}async start(){const t=new FormData,{onSuccess:n,onError:r,onProgress:a,metadata:o}=this.config;t.set("file",this.file.native),o&&Object.entries(o).forEach(([l,u])=>{t.set(l,`${u}`)});const s=await z.post("file-entries",t,{onUploadProgress:l=>{l.lengthComputable&&(a==null||a({bytesUploaded:l.loaded,bytesTotal:l.total}))},signal:this.abortController.signal,headers:{"Content-Type":"multipart/form-data"}}).catch(l=>{l.code!=="ERR_CANCELED"&&(r==null||r(le(l)))});this.abortController.signal.aborted||s&&s.data.fileEntry&&(n==null||n(s.data.fileEntry))}abort(){return this.abortController.abort(),Promise.resolve()}static async create(t,n){return new $t(t,n)}}class zt{constructor(t,n){I(this,"abortController");I(this,"presignedRequest");this.file=t,this.config=n,this.abortController=new AbortController}async start(){var r,a,o,s;if(this.presignedRequest=await this.presignPostUrl(),!this.presignedRequest||await this.uploadFileToS3()!=="uploaded")return;const n=await this.createFileEntry();n!=null&&n.fileEntry?(a=(r=this.config).onSuccess)==null||a.call(r,n.fileEntry):this.abortController.signal||(s=(o=this.config).onError)==null||s.call(o)}abort(){return this.abortController.abort(),Promise.resolve()}presignPostUrl(){var t;return z.post("s3/simple/presign",{filename:this.file.name,mime:this.file.mime,disk:(t=this.config.metadata)==null?void 0:t.disk,size:this.file.size,extension:this.file.extension,...this.config.metadata},{signal:this.abortController.signal}).then(n=>n.data).catch(n=>{var r,a;n.code!=="ERR_CANCELED"&&((a=(r=this.config).onError)==null||a.call(r,le(n)))})}uploadFileToS3(){const{url:t,acl:n}=this.presignedRequest;return Vn.put(t,this.file.native,{signal:this.abortController.signal,withCredentials:!1,headers:{"Content-Type":this.file.mime,"x-amz-acl":n},onUploadProgress:r=>{var a,o;r.lengthComputable&&((o=(a=this.config).onProgress)==null||o.call(a,{bytesUploaded:r.loaded,bytesTotal:r.total}))}}).then(()=>"uploaded").catch(r=>{var a,o;r.code!=="ERR_CANCELED"&&((o=(a=this.config).onError)==null||o.call(a,le(r)))})}async createFileEntry(){return await z.post("s3/entries",{...this.config.metadata,clientMime:this.file.mime,clientName:this.file.name,filename:this.presignedRequest.key.split("/").pop(),size:this.file.size,clientExtension:this.file.extension}).then(t=>t.data).catch(t=>{var n,r;t.code!=="ERR_CANCELED"&&((r=(n=this.config).onError)==null||r.call(n,le(t)))})}static async create(t,n){return new zt(t,n)}}class li{constructor(){I(this,"aliveTimer");I(this,"isDone",!1);I(this,"timeout",3e4);I(this,"timeoutHandler",null)}progress(){this.isDone||!this.timeoutHandler||this.timeout>0&&(clearTimeout(this.aliveTimer),this.aliveTimer=setTimeout(this.timeoutHandler,this.timeout))}done(){this.isDone||(clearTimeout(this.aliveTimer),this.aliveTimer=null,this.isDone=!0)}}function ci(e){if(e==null||Number.isNaN(e))return"";const t=e<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return`${(t?"-":"")+e} B`;const r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);e=Number(e/Math.pow(1024,r));const a=n[r];return e>=10||e%1===0?`${(t?"-":"")+e.toFixed(0)} ${a}`:`${(t?"-":"")+e.toFixed(1)} ${a}`}function Er(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}Er.prototype.match=function(e){var t=!0,n=this.parts,r,a=n.length,o;if(typeof e=="string"||e instanceof String)if(!this.hasWild&&this.text!=e)t=!1;else{for(o=(e||"").split(this.separator),r=0;t&&r<a;r++)n[r]!=="*"&&(r<o.length?t=n[r]===o[r]:t=!1);t=t&&o}else if(typeof e.splice=="function")for(t=[],r=e.length;r--;)this.match(e[r])&&(t[t.length]=e[r]);else if(typeof e=="object"){t={};for(var s in e)this.match(s)&&(t[s]=e[s])}return t};var ui=function(e,t,n){var r=new Er(e,n||/[\/\.]/);return typeof t<"u"?r.match(t):r},di=ui,fi=/[\/\+\.]/,hi=function(e,t){function n(r){var a=di(r,e,fi);return a&&a.length>=2}return t?n(t.split(";")[0]):n};function pi(e,t){if(!t)return;const{maxFileSize:n,allowedFileTypes:r,blockedFileTypes:a}=t;if(n&&e.size!=null&&e.size>n)return C("`:file` exceeds maximum allowed size of :size",{values:{file:e.name,size:ci(n)}});if(r!=null&&r.length&&!Sn(e,r))return C("This file type is not allowed");if(a!=null&&a.length&&Sn(e,a))return C("This file type is not allowed")}function Sn(e,t){return t.some(n=>n.includes("/")?e.mime?hi(e.mime.replace(/;.*?$/,""),n):!1:n.replace(".","")&&e.extension?e.extension.toLowerCase()===n.toLowerCase():!1)}la();const mi=({settings:e})=>ca()(ua((t,n)=>({concurrency:3,fileUploads:new Map,inProgressUploadsCount:0,completedUploadsCount:0,clearInactive(){t(r=>{r.fileUploads.forEach((a,o)=>{a.status!=="inProgress"&&r.fileUploads.delete(o)})}),n().runQueue()},abortUpload(r){var o;const a=n().fileUploads.get(r);a&&((o=a.request)==null||o.abort(),n().updateFileUpload(r,{status:"aborted"}),n().runQueue())},updateFileUpload(r,a){t(o=>{const s=o.fileUploads.get(r);s&&(o.fileUploads.set(r,{...s,...a}),"status"in a&&kn(o))})},addFileUpload(r,a){t(o=>{a.timer&&a.request&&(a.timer.timeoutHandler=()=>{var s;(s=a.request)==null||s.abort(),n().updateFileUpload(r.id,{status:"failed",errorMessage:C("Upload timed out")}),n().runQueue()}),o.fileUploads.set(r.id,{file:r,percentage:0,bytesUploaded:0,status:"pending",...a}),kn(o)})},runQueue(){const r=[...n().fileUploads.values()],a=r.filter(s=>s.status==="inProgress");let o=n().concurrency;if(a.filter(s=>s.file.relativePath||s.request instanceof We||s.request instanceof Xe&&e.uploads.chunk_size&&s.file.size>e.uploads.chunk_size).length&&(o=1),a.length<o){const l=r.filter(u=>u.status==="pending").find(u=>!!u.request);l&&(n().updateFileUpload(l.file.id,{status:"inProgress"}),l.request.start())}},uploadSingle(r,a){var d,c;const o=r instanceof _e?r:new _e(r);if(a!=null&&a.restrictions){const f=pi(o,a.restrictions);if(f)return n().addFileUpload(o,{errorMessage:f,status:"failed"}),a.showToastOnRestrictionFail&&da.danger(f),n().runQueue(),o.id}const s=new li,l={metadata:{...a==null?void 0:a.metadata,relativePath:o.relativePath,disk:((d=a==null?void 0:a.metadata)==null?void 0:d.disk)||Le.uploads,parentId:((c=a==null?void 0:a.metadata)==null?void 0:c.parentId)||""},chunkSize:e.uploads.chunk_size,onError:f=>{var h;n().updateFileUpload(o.id,{errorMessage:f,status:"failed"}),n().runQueue(),s.done(),(h=a==null?void 0:a.onError)==null||h.call(a)},onSuccess:f=>{var h;n().updateFileUpload(o.id,{status:"completed",entry:f}),n().runQueue(),s.done(),(h=a==null?void 0:a.onSuccess)==null||h.call(a,f)},onProgress:({bytesUploaded:f,bytesTotal:h})=>{var y;const m=f/h*100;n().updateFileUpload(o.id,{percentage:m,bytesUploaded:f}),s.progress(),(y=a==null?void 0:a.onProgress)==null||y.call(a,{bytesUploaded:f,bytesTotal:h})}};return yi({settings:e,file:o,strategyConfig:l}).create(o,l).then(f=>{n().addFileUpload(o,{request:f,timer:s}),n().runQueue()}),o.id},uploadMultiple:(r,a)=>[...r].map(o=>n().uploadSingle(o,a))}))),Ur=1024*1024,gi=4*Ur,vi=100*Ur,yi=({settings:e,strategyConfig:t,file:n})=>{var o;const a=(((o=t.metadata)==null?void 0:o.disk)||Le.uploads)===Le.uploads?e.uploads.uploads_driver:e.uploads.public_driver;return(a==null?void 0:a.endsWith("s3"))&&e.uploads.s3_direct_upload?n.size>=vi?We:zt:n.size>=gi&&!e.uploads.disable_tus?Xe:$t},kn=e=>{e.completedUploadsCount=[...e.fileUploads.values()].filter(t=>t.status==="completed").length,e.inProgressUploadsCount=[...e.fileUploads.values()].filter(t=>t.status==="inProgress").length},{Provider:bi,useStore:wi}=Fo(),ml=wi;function gl({children:e}){const t=wt();return i(bi,{createStore:()=>mi({settings:t}),children:e})}function mt(e){return{id:e,name:`${e}`,description:`${e}`}}function xi(e,t){const n=p.exports.useRef(null),r=bt(t),{displayWith:a=A=>A.name,validateWith:o,children:s,suggestions:l,isLoading:u,inputValue:d,onInputValueChange:c,onItemSelected:f,placeholder:h,onOpenChange:m,chipSize:y="md",openMenuOnFocus:b=!0,showEmptyMessage:v,value:g,defaultValue:w,onChange:S,valueKey:_,isAsync:k,...N}=e,x=Re({...e,flexibleHeight:!0}),[U,T]=ki(e),[$,M]=p.exports.useState(!1),j=i(Ct,{isIndeterminate:!0,size:"sm","aria-label":"loading..."}),{fieldProps:D,inputProps:R}=In({...N,focusRef:r,endAdornment:u&&$?j:null});return i(An,{fieldClassNames:x,...D,children:P(Kn,{ref:n,className:E("flex items-center flex-wrap",x.input),onClick:()=>{var A;(A=r.current)==null||A.focus()},children:[i(_i,{displayChipUsing:a,items:U,setItems:T,chipSize:y}),i(Si,{showEmptyMessage:v,inputProps:R,inputValue:d,onInputValueChange:c,fieldRef:n,inputRef:r,chips:U,setChips:T,validateWith:o,isLoading:u,suggestions:l,placeholder:h,openMenuOnFocus:b,listboxIsOpen:$,setListboxIsOpen:M,children:s})]})})}function _i({items:e,setItems:t,displayChipUsing:n,chipSize:r}){const a=Ee(),o=p.exports.useCallback(s=>{const l=e.findIndex(d=>d.id===s),u=[...e];return l>-1&&(u.splice(l,1),t(u)),u},[e,t]);return i(Oo,{className:"flex-shrink-0 flex-wrap max-w-full my-8",size:r,selectable:!0,children:e.map(s=>i(fa,{errorMessage:s.errorMessage,adornment:s.image?i(qe,{circle:!0,src:s.image}):null,onRemove:()=>{o(s.id).length?a.focusPrevious({tabbable:!0}):a.focusLast()},children:n(s)},s.id))})}function Si(e){const{inputRef:t,fieldRef:n,validateWith:r,setChips:a,chips:o,suggestions:s,inputProps:l,placeholder:u,openMenuOnFocus:d,listboxIsOpen:c,setListboxIsOpen:f}=e,h="outline-none text-sm mx-8 my-4 h-30 flex-auto",m=Ee(),y=p.exports.useCallback(R=>{R=(R||[]).filter(A=>{const ge=!A||!A.id||!A.name;return!(o.findIndex(Ye=>Ye.id===(A==null?void 0:A.id))>-1)&&!ge}),R.length&&(r&&(R=R.map(A=>r(A))),a([...o,...R]))},[o,a,r]),b=ha({...e,clearInputOnItemSelection:!0,isOpen:c,onOpenChange:f,items:s,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:R=>{$(R)}}),{state:{activeIndex:v,setActiveIndex:g,isOpen:w,setIsOpen:S,inputValue:_,setInputValue:k},refs:N,listboxId:x,collection:U,onInputChange:T}=b,$=R=>{const A=U.size&&v!=null?[...U.values()][v]:null;A!=null&&A.item?y([A.item]):y([mt(A?A.value:R)]),k(""),g(null),S(!1)};pa(()=>{n.current&&N.reference.current!==n.current&&b.reference(n.current)},[n,b,N]);const{handleTriggerKeyDown:M,handleListboxKeyboardNavigation:j}=va(b),D=we(()=>{d&&!w&&S(!0)});return i(ma,{listbox:b,mobileOverlay:ga,onPointerDown:R=>{R.preventDefault()},children:i("input",{type:"text",className:E(h,"bg-transparent"),placeholder:u,...fe(l,{ref:t,value:_,onChange:T,onPaste:R=>{const ge=R.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(ge){R.preventDefault();const ve=window.getSelection();ve!=null&&ve.rangeCount&&(ve.deleteFromDocument(),y(ge.map(Ye=>mt(Ye))))}},"aria-autocomplete":"list","aria-controls":w?x:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:R=>{const A=R.target;if(R.key==="Enter"){R.preventDefault(),$(A.value);return}if(R.key==="Escape"&&w&&(S(!1),k("")),R.key==="ArrowUp"&&w&&(v===0||v==null)){g(null);return}if(v!=null&&(R.key==="ArrowLeft"||R.key==="ArrowRight")){R.preventDefault();return}if((R.key==="ArrowLeft"||R.key==="Backspace"||R.key==="Delete")&&A.selectionStart===0&&v==null&&o.length){m.focusPrevious({tabbable:!0});return}M(R)||j(R)},onFocus:D,onClick:D})})})}function ki({onChange:e,value:t,defaultValue:n,valueKey:r}){const a=p.exports.useMemo(()=>Pn(t),[t]),o=p.exports.useMemo(()=>Pn(n),[n]),s=p.exports.useCallback(l=>{const u=r?l.map(d=>d[r]):l;e==null||e(u)},[e,r]);return X(a||void 0,o||[],s)}function Pn(e){if(e!=null)return typeof e[0]!="object"?e.map(t=>mt(t)):e}const vl=de.forwardRef(xi),Pi=de.forwardRef((e,t)=>{const{children:n,size:r="sm",description:a,className:o,invalid:s,autoFocus:l,errorMessage:u,...d}=e,c=bt(t);ya({autoFocus:l},c);const f=Ci(r),h=Re(e),m=p.exports.useId();return P("div",{className:E(o,"isolate"),children:[P("label",{className:"flex items-center select-none",children:[i("input",{...d,type:"checkbox",role:"switch","aria-invalid":s||void 0,"aria-describedby":a?m:void 0,ref:c,className:E(f,!s&&"checked:bg-primary dark:checked:bg-primary-dark checked:border-primary dark:checked:border-primary-dark",s&&"checked:bg-danger checked:border-danger","outline-none cursor-pointer bg-chip border-chip border checked:bg-primary checked:border-primary p-0 overflow-hidden relative rounded-3xl appearance-none transition-colors flex-shrink-0 flex items-center outline-none","before:z-10 before:border before:rounded-3xl before:block before:bg-white before:transition-transform before:translate-x-2","checked:before:border-white","focus-visible:ring",e.disabled&&"opacity-80 cursor-not-allowed")}),n&&i("span",{className:E(h.size.font,"ml-12",s&&"text-danger",e.disabled&&"text-disabled"),children:n})]}),a&&!u&&i("div",{id:m,className:h.description,children:a}),u&&i("div",{id:m,className:h.error,children:u})]})});function yl(e){const{field:{onChange:t,onBlur:n,value:r=!1,ref:a},fieldState:{invalid:o,error:s}}=Ve({name:e.name}),l={onChange:t,onBlur:n,checked:r,invalid:o,errorMessage:s==null?void 0:s.message};return i(Pi,{ref:a,...fe(e,l)})}function Ci(e){switch(e){case"xl":return"w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36";case"lg":return"w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30";case"md":return"w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24";case"xs":return"w-30 h-16 before:w-12 before:h-12 checked:before:translate-x-16";default:return"w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20"}}function bl(e=36){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<e;r+=1)t+=n.charAt(Math.floor(Math.random()*n.length));return t}const wl=L(i("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),W=new Map,Ne=new Map,Ri=new Map,V={status:"inactive"};function et({e,rect:t,deltaX:n,deltaY:r}){return{rect:t,x:e.clientX,y:e.clientY,deltaX:n!=null?n:0,deltaY:r!=null?r:0,nativeEvent:e}}let Dr=null;function Cn(e){Dr=e}function Ei(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}function Ui(e){const t=new IntersectionObserver(n=>{n.forEach(r=>{const{width:a,height:o,left:s,top:l}=r.boundingClientRect,[u,d]=[...e].find(([,f])=>f.ref.current===r.target)||[];if(u==null||d==null)return;const c={width:a,height:o,left:s,top:l};e.set(u,{...d,rect:c})}),t.disconnect()});[...e.values()].forEach(n=>{n.ref.current&&t.observe(n.ref.current)})}function xl({id:e,disabled:t,ref:n,preview:r,hidePreview:a,...o}){const s=p.exports.useRef(null),{addGlobalListener:l,removeAllGlobalListeners:u}=Ln(),d=p.exports.useRef({lastPosition:{x:0,y:0}}).current,c=p.exports.useRef(o);c.current=o,p.exports.useLayoutEffect(()=>(t?W.delete(e):W.set(e,{...W.get(e),id:e,ref:n,type:c.current.type,getData:c.current.getData}),()=>{W.delete(e)}),[e,t,c,n]);const f=v=>{Ri.forEach(g=>{var w;g.type===((w=W.get(e))==null?void 0:w.type)&&v(g)})},h=v=>{var k,N;const g=W.get(e),w=n.current,S=!s.current||!d.clickedEl||s.current.contains(d.clickedEl);if(Dr||!w||!g||!S){v.preventDefault(),v.stopPropagation();return}Ui(Ne),Cn("drag"),a&&Di(v),v.dataTransfer.effectAllowed="move",d.lastPosition={x:v.clientX,y:v.clientY},d.currentRect=Ei(w.getBoundingClientRect());const _=et({rect:d.currentRect,e:v});r!=null&&r.current&&r.current(g,x=>{const U=x.getBoundingClientRect(),T=v.currentTarget.getBoundingClientRect();let $=v.clientX-T.x,M=v.clientY-T.y;($>U.width||M>U.height)&&($=U.width/2,M=U.height/2);const j=2*Math.round(T.height/2);x.style.height=`${j}px`,v.dataTransfer.setDragImage(x,0,0)}),V.status="dragging",V.dragTargetId=e,n.current&&(n.current.dataset.dragging="true"),(N=(k=c.current).onDragStart)==null||N.call(k,_,g),requestAnimationFrame(()=>{f(x=>{var U;return(U=x.onDragStart)==null?void 0:U.call(x,_,g)})}),l(window,"dragover",m,!0)},m=v=>{var N,x;if(v.preventDefault(),v.stopPropagation(),!d.currentRect)return;const g=v.clientX-d.lastPosition.x,w=v.clientY-d.lastPosition.y,S={...d.currentRect,left:d.currentRect.left+g,top:d.currentRect.top+w},_=et({rect:S,e:v,deltaX:g,deltaY:w}),k=W.get(e);k&&((x=(N=c.current).onDragMove)==null||x.call(N,_,k),f(U=>{var T;return(T=U.onDragMove)==null?void 0:T.call(U,_,k)})),d.lastPosition={x:v.clientX,y:v.clientY},d.currentRect=S};return{draggableProps:{draggable:!0,onDragStart:h,onDragEnd:v=>{var S,_;if(u(),!d.currentRect)return;Cn(null),ee&&ee.remove();const g=et({rect:d.currentRect,e:v}),w=W.get(e);w&&((_=(S=c.current).onDragEnd)==null||_.call(S,g,w),f(k=>{var N;return(N=k.onDragEnd)==null?void 0:N.call(k,g,w,V.status)})),requestAnimationFrame(()=>{V.dragTargetId=void 0,V.status="inactive",n.current&&delete n.current.dataset.dragging})},onPointerDown:v=>{d.clickedEl=v.target}},dragHandleRef:s}}let ee;function Di(e){ee||(ee=new Image,document.body.append(ee),ee.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),e.dataTransfer.setDragImage(ee,0,0)}async function*Ii(e){for(const t of e.items)if(t.kind==="file")if(typeof t.webkitGetAsEntry=="function"){const n=t.webkitGetAsEntry();if(!n)continue;if(n.isFile){if(n.name===".DS_Store")continue;yield new _e(t.getAsFile(),n.fullPath)}else n.isDirectory&&(yield*Ir(n))}else{const n=t.getAsFile();if(!n||n.name===".DS_Store")continue;yield new _e(n,t.fullPath)}}async function*Ir(e){const t=e.createReader();let n;do{n=await new Promise((r,a)=>{t.readEntries(r,a)});for(const r of n)if(r.isFile){if(r.name===".DS_Store")continue;const a=await Ai(r);yield new _e(a,r.fullPath)}else r.isDirectory&&(yield*Ir(r))}while(n.length>0)}function Ai(e){return new Promise((t,n)=>e.file(t,n))}async function Ti(e){const t=[];for await(const n of e)t.push(n);return t}const Ni=400;function _l({id:e,disabled:t,ref:n,...r}){const a=p.exports.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,o=p.exports.useRef(r);o.current=r,p.exports.useLayoutEffect(()=>(Ne.set(e,{...Ne.get(e),disabled:t,id:e,ref:n}),()=>{Ne.delete(e)}),[e,o,t,n]);const s=h=>{var y;const m=o.current;return!!((h==null?void 0:h.type)&&n.current!==((y=h.ref)==null?void 0:y.current)&&m.types.includes(h.type)&&(!m.acceptsDrop||m.acceptsDrop(h)))},l=h=>{var y,b;const m=Ie(h);m&&((b=(y=o.current).onDragLeave)==null||b.call(y,m))};return{droppableProps:t?{}:{onDragOver:h=>{h.preventDefault(),h.stopPropagation()},onDragEnter:h=>{var y,b;if(h.stopPropagation(),a.dragOverElements.add(h.target),a.dragOverElements.size>1)return;const m=Ie(h);m&&s(m)&&((b=(y=o.current).onDragEnter)==null||b.call(y,m),clearTimeout(a.dropActivateTimer),typeof o.current.onDropActivate=="function"&&(a.dropActivateTimer=setTimeout(()=>{var v,g;m&&((g=(v=o.current).onDropActivate)==null||g.call(v,m))},Ni)))},onDragLeave:h=>{h.stopPropagation(),a.dragOverElements.delete(h.target);for(const y of a.dragOverElements)h.currentTarget.contains(y)||a.dragOverElements.delete(y);if(a.dragOverElements.size>0)return;const m=Ie(h);m&&s(m)&&(l(h),clearTimeout(a.dropActivateTimer))},onDrop:async h=>{var y,b,v,g;h.preventDefault(),h.stopPropagation(),a.dragOverElements.clear(),l(h),clearTimeout(a.dropActivateTimer);const m=Ie(h);if(m)if((b=(y=o.current).onDragLeave)==null||b.call(y,m),!s(m))V.status!=="inactive"&&(V.status="dropFail");else{const w=(g=(v=o.current).onDrop)==null?void 0:g.call(v,m);V.status!=="inactive"&&(V.status=w===!1?"dropFail":"dropSuccess")}}}}}function Ie(e){if(V.dragTargetId!=null)return W.get(V.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Ti(Ii(e.dataTransfer))}}const Oi="user",Sl=L(i("path",{d:"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z"}),"LinkOutlined"),kl=L(i("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined");function Z(e,t){const{base_url:n}=wt(),r=p.exports.useContext(Fi);if(!e)return{};const a={previewUrl:`${n}/${e.url}`,downloadUrl:`${n}/api/v1/file-entries/download/${(t==null?void 0:t.downloadHashes)||e.hash}`};return r&&(a.previewUrl=Rn(a.previewUrl,{...r,thumbnail:t!=null&&t.thumbnail?"true":""},n),a.downloadUrl=Rn(a.downloadUrl,r,n)),a}const Fi=de.createContext(null);function Rn(e,t,n){const r=new URL(e,n);return Object.entries(t).forEach(([a,o])=>{r.searchParams.append(a,o)}),r.toString()}const Lt=de.createContext(null);function Y({message:e,className:t,allowDownload:n}){const{entries:r,activeIndex:a}=p.exports.useContext(Lt),o=r[a],s=e||i(O,{message:"No file preview available"}),{downloadUrl:l}=Z(o);return P("div",{className:E(t,"shadow bg-paper max-w-400 w-[calc(100%-40px)] text-center p-40 rounded"),children:[i("div",{className:"text-lg",children:s}),n&&i("div",{className:"block mt-20 text-center",children:i(te,{variant:"flat",color:"primary",onClick:()=>{l&&ot(l)},children:i(O,{message:"Download"})})})]})}function $i(e){const{entry:t,className:n}=e,{trans:r}=J(),{previewUrl:a}=Z(t);return a?i("img",{className:E(n,"shadow"),src:a,alt:r({message:"Preview for :name",values:{name:t.name}})}):i(Y,{...e})}const zi=5242880;function Li(e){const{entry:t,className:n}=e,{trans:r}=J(),[a,o]=p.exports.useState(!1),[s,l]=p.exports.useState(!0),[u,d]=p.exports.useState(!1),[c,f]=p.exports.useState(null),{previewUrl:h}=Z(t);return p.exports.useEffect(()=>{!t||(h?t.file_size>=zi?(o(!0),l(!1)):Mi(h).then(m=>{f(m.data)}).catch(()=>{d(!0)}).finally(()=>{l(!1)}):d(!0))},[t,h]),s?i(Ct,{isIndeterminate:!0,"aria-label":r({message:"Loading file contents"})}):a?i(Y,{...e,message:i(O,{message:"This file is too large to preview."})}):u?i(Y,{...e,message:i(O,{message:"There was an issue previewing this file"})}):i("pre",{className:E("rounded bg-paper p-20 text-sm whitespace-pre-wrap break-words h-full overflow-y-auto w-full",n),children:i("div",{className:"container mx-auto",children:c})})}function Mi(e){return z.get(e,{responseType:"text"})}function Bi(e){const{entry:t,className:n}=e,{previewUrl:r}=Z(t),a=p.exports.useRef(null),[o,s]=p.exports.useState(!1);return p.exports.useEffect(()=>{var l;s(!((l=a.current)!=null&&l.canPlayType(t.mime)))},[t]),o||!r?i(Y,{...e}):i("video",{className:n,ref:a,controls:!0,controlsList:"nodownload noremoteplayback",playsInline:!0,autoPlay:!0,children:i("source",{src:r,type:t.mime,onError:()=>{s(!0)}})})}function Hi(e){const{entry:t,className:n}=e,{previewUrl:r}=Z(t),a=p.exports.useRef(null),[o,s]=p.exports.useState(!1);return p.exports.useEffect(()=>{var l;s(!((l=a.current)!=null&&l.canPlayType(t.mime)))},[t]),o||!r?i(Y,{...e}):i("audio",{className:n,ref:a,controls:!0,controlsList:"nodownload noremoteplayback",autoPlay:!0,children:i("source",{src:r,type:t.mime,onError:()=>{s(!0)}})})}function ji(e){const{entry:t,className:n}=e,{trans:r}=J(),{previewUrl:a}=Z(t);return a?i("iframe",{title:r({message:"Preview for :name",values:{name:t.name}}),className:E(n,"w-full h-full"),src:`${a}#toolbar=0`}):i(Y,{...e})}function tt(e){const{entry:t,className:n}=e,{trans:r}=J(),a=p.exports.useRef(null),[o,s]=p.exports.useState(!1),l=p.exports.useRef(),[u,d]=p.exports.useState(!1),{previewUrl:c}=Z(t);return p.exports.useEffect(()=>{c?t.file_size&&t.file_size>25e6?s(!0):a.current&&(a.current.onload=()=>{clearTimeout(l.current),d(!1)},Vi(c,t).then(f=>{a.current&&(a.current.src=f)}),l.current=setTimeout(()=>{s(!0)},5e3)):s(!0)},[t,c]),o?i(Y,{...e}):P("div",{className:E(n,"w-full h-full"),children:[u&&i(Ct,{}),i("iframe",{ref:a,title:r({message:"Preview for :name",values:{name:t.name}}),className:E("w-full h-full",u&&"hidden")})]})}async function Vi(e,t){const n=new URL(e);if(!n.searchParams.has("shareable_link")){const{data:r}=await z.post(`file-entries/${t.id}/add-preview-token`);n.searchParams.append("preview_token",r.preview_token)}return qi(n)}function qi(e){return`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(e.toString())}`}const En={text:Li,video:Bi,audio:Hi,image:$i,pdf:ji,spreadsheet:tt,powerPoint:tt,word:tt,"text/rtf":Y};function Ki(e){const t=e==null?void 0:e.mime,n=e==null?void 0:e.type;return En[t]||En[n]||Y}const Gi=L(i("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"}),"ChevronLeftOutlined");function Wi({file:e,className:t,iconClassName:n,showImage:r=!0}){const{trans:a}=J(),{previewUrl:o}=Z(e,{thumbnail:!0});if(r&&e.type==="image"&&o){const s=a({message:":fileName thumbnail",values:{fileName:e.name}});return i("img",{className:E(t,"object-cover"),src:o,alt:s,draggable:!1})}return i(ba,{className:n,type:e.type})}function Xi({entries:e,onClose:t,showHeader:n=!0,className:r,headerActionsLeft:a,allowDownload:o=!0,...s}){const l=gt("(max-width: 1024px)"),[u,d]=X(s.activeIndex,s.defaultActiveIndex||0,s.onActiveIndexChange),c=e[u],f=p.exports.useMemo(()=>({entries:e,activeIndex:u}),[e,u]),h=Ki(c);if(!c)return t==null||t(),null;const m=e.length-1>u,y=()=>{d(u+1)},b=u>0,v=()=>{d(u-1)};return P(Lt.Provider,{value:f,children:[n&&i(Yi,{actionsLeft:a,isMobile:l,onClose:t,onNext:m?y:void 0,onPrevious:b?v:void 0,allowDownload:o}),P("div",{className:E("overflow-hidden relative flex-auto",r),children:[l&&i(q,{size:"lg",className:"text-muted absolute left-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!b,onClick:v,children:i(Xn,{})}),i(Ce,{initial:!1,children:i(ne.div,{className:"absolute inset-0 flex items-center justify-center",...Pt,children:i(h,{className:"max-h-[calc(100%-30px)]",entry:c,allowDownload:o})},c.id)}),l&&i(q,{size:"lg",className:"text-muted absolute right-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!m,onClick:y,children:i(It,{})})]})]})}function Yi({onNext:e,onPrevious:t,onClose:n,isMobile:r,actionsLeft:a,allowDownload:o}){const{entries:s,activeIndex:l}=p.exports.useContext(Lt),u=s[l],{downloadUrl:d}=Z(u);return P("div",{className:"flex items-center justify-between gap-20 bg-paper border-b flex-shrink-0 text-sm min-h-50 px-10 text-muted",children:[P("div",{className:"flex items-center gap-4 w-1/3 justify-start",children:[a,o?r?i(q,{onClick:()=>{d&&ot(d)},children:i(qt,{})}):i(te,{startIcon:i(qt,{}),variant:"text",onClick:()=>{d&&ot(d)},children:i(O,{message:"Download"})}):void 0]}),P("div",{className:"flex items-center gap-10 w-1/3 justify-center flex-nowrap text-main",children:[i(Wi,{file:u,iconClassName:"w-16 h-16",showImage:!1}),i("div",{className:"whitespace-nowrap overflow-hidden overflow-ellipsis",children:u.name})]}),P("div",{className:"w-1/3 flex items-center gap-10 justify-end whitespace-nowrap",children:[!r&&P(p.exports.Fragment,{children:[i(q,{disabled:!t,onClick:t,children:i(Gi,{})}),i("div",{children:l+1}),i("div",{children:"/"}),i("div",{children:s.length}),i(q,{disabled:!e,onClick:e,children:i(xa,{})}),i("div",{className:"bg-divider w-1 h-24 mx-20"})]}),i(q,{radius:"rounded-none",onClick:n,children:i(jn,{})})]})]})}function Pl(e){return i(je,{size:"fullscreenTakeover",background:"bg-alt",className:"flex flex-col",children:i(Zi,{...e})})}function Zi(e){const{close:t}=xt();return i(Xi,{onClose:t,...e})}const Qi=new ze({type:B.Select,key:"type",label:C("Type"),description:C("Type of the file"),defaultValue:"05",options:[{key:"02",label:C("Text"),value:"text"},{key:"03",label:C("Audio"),value:"audio"},{key:"04",label:C("Video"),value:"video"},{key:"05",label:C("Image"),value:"image"},{key:"06",label:C("PDF"),value:"pdf"},{key:"07",label:C("Spreadsheet"),value:"spreadsheet"},{key:"08",label:C("Word Document"),value:"word"},{key:"09",label:C("Photoshop"),value:"photoshop"},{key:"10",label:C("Archive"),value:"archive"},{key:"11",label:C("Folder"),value:"folder"}]}),Cl=[Qi,new ze({type:B.Select,key:"public",label:C("Visibility"),defaultValue:"01",description:C("Whether file is publicly accessible"),options:[{key:"01",label:C("Private"),value:!1},{key:"02",label:C("Public"),value:!0}]}),new Wa({description:C("Date file was uploaded")}),new Xa({description:C("Date file was last changed")}),new ze({type:B.SelectModel,model:Oi,key:"owner_id",label:C("Uploader"),description:C("User that this file was uploaded by")})],Un=yt(H());function Ji(e){const[t,n]=p.exports.useState(!e.value&&!e.defaultValue),[r,a]=X(e.value||Un,e.defaultValue||Un,e.onChange),{min:o,max:s,granularity:l,timeZone:u,calendarIsOpen:d,setCalendarIsOpen:c,closeDialogOnSelection:f}=Gn(r,e),[h,m]=p.exports.useState(()=>[xe(r)]),y=p.exports.useCallback(g=>{o&&g.compare(o)<0?g=o:s&&g.compare(s)>0&&(g=s);const w=r?r.set(g):ue(g,H());a(w),m([xe(w)]),n(!1)},[a,o,s,r]),b=p.exports.useCallback(g=>!t&&ye(r,g),[r,t]),v=p.exports.useCallback(g=>({onClick:()=>{y==null||y(g),f&&(c==null||c(!1))}}),[y,c,f]);return{selectedValue:r,setSelectedValue:y,calendarIsOpen:d,setCalendarIsOpen:c,dayIsActive:b,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:v,calendarDates:h,setCalendarDates:m,isPlaceholder:t,setIsPlaceholder:n,min:o,max:s,granularity:l,timeZone:u,closeDialogOnSelection:f}}function el(e){const t=Ji(e),n=p.exports.useRef(null),r=i(St,{offset:8,placement:"bottom-start",isOpen:t.calendarIsOpen,onOpenChange:t.setCalendarIsOpen,type:"popover",triggerRef:n,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:i(je,{size:"auto",children:i(_t,{className:"flex items-start gap-40",children:i(Yn,{state:t,visibleMonths:1})})})}),a={onClick:o=>{o.stopPropagation(),o.preventDefault(),tl(o)?t.setCalendarIsOpen(!1):t.setCalendarIsOpen(!0)}};return P(p.exports.Fragment,{children:[i(Dt,{ref:n,wrapperProps:a,endAdornment:i(qn,{}),...e,children:i(Se,{segmentProps:a,state:t,value:t.selectedValue,onChange:t.setSelectedValue,isPlaceholder:t.isPlaceholder})}),r]})}function Rl(e){const{min:t,max:n}=e,{trans:r}=J(),{format:a}=Q(),{field:{onChange:o,onBlur:s,value:l=null,ref:u},fieldState:{invalid:d,error:c}}=Ve({name:e.name,rules:{validate:m=>{if(!m)return;const y=$e(m);if(t&&y.compare(t)<0)return r({message:"Enter a date after :date",values:{date:a(m)}});if(n&&y.compare(n)>0)return r({message:"Enter a date before :date",values:{date:a(m)}})}}}),f=l?$e(l):null,h={onChange:m=>{o(m.toAbsoluteString())},onBlur:s,value:f,invalid:d,errorMessage:c==null?void 0:c.message,inputRef:u};return i(el,{...fe(h,e)})}function tl(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}export{Qi as $,qe as A,ze as B,Wa as C,sl as D,Sl as E,B as F,yl as G,ci as H,Po as I,vo as J,Xn as K,za as L,kl as M,ko as N,Cl as O,ul as P,Pl as Q,Jn as R,mo as S,dl as T,Xa as U,So as V,Rl as W,Z as X,Wi as Y,Xi as Z,Fi as _,cl as a,Rt as a0,Dr as a1,Ui as a2,lo as a3,io as a4,Ri as a5,fo as a6,Wn as a7,Gi as a8,qn as a9,Pa as aa,ll as b,il as c,Et as d,It as e,go as f,fl as g,hl as h,pl as i,ot as j,qt as k,Oo as l,ml as m,Le as n,so as o,vl as p,La as q,Pi as r,gl as s,bl as t,eo as u,xl as v,_l as w,Ne as x,wl as y,Oi as z};
//# sourceMappingURL=date-picker.d8be8944.js.map
