{"version":3,"file":"date-picker.d8be8944.js","sources":["../../../resources/client/common/ui/layout/dashboard-layout-context.ts","../../../resources/client/common/utils/hooks/use-block-body-overflow.ts","../../../resources/client/common/ui/layout/dashboard-layout.tsx","../../../resources/client/common/ui/layout/dashboard-content.tsx","../../../resources/client/common/ui/layout/dashboard-sidenav.tsx","../../../resources/client/common/icons/material/Menu.tsx","../../../resources/client/common/ui/layout/dashboard-navbar.tsx","../../../resources/client/common/datatable/filters/backend-filter.ts","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets.ts","../../../resources/client/common/icons/material/DateRange.tsx","../../../resources/client/common/ui/forms/input-field/input.tsx","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/date-picker-field.tsx","../../../resources/client/common/ui/forms/input-field/date/utils.ts","../../../resources/client/common/ui/forms/input-field/date/use-base-date-picker-state.ts","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/use-date-range-picker-state.ts","../../../resources/client/common/icons/material/ArrowRightAlt.tsx","../../../resources/client/common/ui/forms/input-field/date/segments/utils/adjust-segment.ts","../../../resources/client/common/ui/forms/input-field/date/segments/utils/set-segment.ts","../../../resources/client/common/ui/forms/input-field/date/segments/utils/page-step.ts","../../../resources/client/common/ui/forms/input-field/date/segments/editable-date-segment.tsx","../../../resources/client/common/ui/forms/input-field/date/segments/literal-segment.tsx","../../../resources/client/common/ui/forms/input-field/date/segments/utils/get-segment-limits.ts","../../../resources/client/common/ui/forms/input-field/date/segments/date-segment-list.tsx","../../../resources/client/common/icons/material/KeyboardArrowLeft.tsx","../../../resources/client/common/icons/material/KeyboardArrowRight.tsx","../../../resources/client/common/ui/forms/input-field/date/calendar/calendar-cell.tsx","../../../resources/client/common/ui/forms/input-field/date/calendar/calendar-month.tsx","../../../resources/client/common/ui/forms/input-field/date/calendar/calendar.tsx","../../../resources/client/common/i18n/formatted-date-time-range.tsx","../../../resources/client/common/ui/list/list.tsx","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/dialog/date-preset-list.tsx","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/dialog/date-range-dialog.tsx","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/date-range-picker.tsx","../../../resources/client/common/ui/forms/input-field/date/date-range-picker/form-date-range-picker.tsx","../../../resources/client/common/datatable/filters/timestamp-filters.ts","../../../resources/client/common/ui/images/avatar.tsx","../../../resources/client/common/datatable/filters/backend-filters-url-key.ts","../../../resources/client/common/datatable/filters/utils/decode-backend-filters.ts","../../../resources/client/common/datatable/filters/utils/encode-backend-filters.ts","../../../resources/client/common/datatable/filters/backend-filter-url-params.ts","../../../resources/client/common/ui/progress/progress-bar-base.tsx","../../../resources/client/common/ui/tables/table-style.ts","../../../resources/client/common/utils/keybinds/is-ctrl-key-pressed.ts","../../../resources/client/common/ui/tables/navigate-grid.ts","../../../resources/client/common/ui/tables/table-context.ts","../../../resources/client/common/ui/tables/checkbox-cell.tsx","../../../resources/client/common/ui/tables/table-cell.tsx","../../../resources/client/common/ui/interactions/use-pointer-events.ts","../../../resources/client/common/utils/keybinds/is-ctrl-or-shift-pressed.ts","../../../resources/client/common/utils/hooks/is-touch-device.ts","../../../resources/client/common/ui/tables/table-row.tsx","../../../resources/client/common/icons/material/ArrowDownward.tsx","../../../resources/client/common/ui/tables/header-cell.tsx","../../../resources/client/common/ui/tables/select-all-cell.tsx","../../../resources/client/common/ui/tables/table.tsx","../../../resources/client/common/icons/material/Search.tsx","../../../resources/client/common/datatable/filters/panels/select-filter-panel.tsx","../../../resources/client/common/datatable/filters/panels/date-filter-panel.tsx","../../../resources/client/common/users/queries/use-normalized-models.ts","../../../resources/client/common/users/queries/use-normalized-model.ts","../../../resources/client/common/ui/forms/normalized-model-field.tsx","../../../resources/client/common/datatable/filters/panels/normalized-model-filter-panel.tsx","../../../resources/client/common/datatable/filters/filter-operator-names.ts","../../../resources/client/common/datatable/filters/panels/input-filter-panel.tsx","../../../resources/client/common/datatable/filters/filter-list/filter-list-trigger-button.tsx","../../../resources/client/common/datatable/filters/filter-list/filter-list-item-dialog-trigger.tsx","../../../resources/client/common/datatable/filters/filter-list/filter-list-control.tsx","../../../resources/client/common/datatable/filters/filter-list/filter-list.tsx","../../../resources/client/common/icons/material/Add.tsx","../../../resources/client/common/icons/material/FileDownload.tsx","../../../resources/client/common/uploads/utils/download-file-from-url.ts","../../../resources/client/common/ui/forms/input-field/chip-field/chip-list.tsx","../../../node_modules/zustand/esm/context.js","../../../node_modules/is-retry-allowed/index.js","../../../node_modules/axios-retry/lib/esm/index.js","../../../resources/client/common/uploads/uploader/strategy/s3-multipart-upload.ts","../../../resources/client/common/uploads/types/backend-metadata.ts","../../../node_modules/js-base64/base64.mjs","../../../node_modules/tus-js-client/lib.esm/error.js","../../../node_modules/tus-js-client/lib.esm/uuid.js","../../../node_modules/tus-js-client/lib.esm/upload.js","../../../node_modules/tus-js-client/lib.esm/noopUrlStorage.js","../../../node_modules/tus-js-client/lib.esm/browser/urlStorage.js","../../../node_modules/tus-js-client/lib.esm/browser/httpStack.js","../../../node_modules/tus-js-client/lib.esm/browser/isReactNative.js","../../../node_modules/tus-js-client/lib.esm/browser/uriToBlob.js","../../../node_modules/tus-js-client/lib.esm/browser/sources/isCordova.js","../../../node_modules/tus-js-client/lib.esm/browser/sources/readAsByteArray.js","../../../node_modules/tus-js-client/lib.esm/browser/sources/FileSource.js","../../../node_modules/tus-js-client/lib.esm/browser/sources/StreamSource.js","../../../node_modules/tus-js-client/lib.esm/browser/fileReader.js","../../../node_modules/tus-js-client/lib.esm/browser/fileSignature.js","../../../node_modules/tus-js-client/lib.esm/browser/index.js","../../../resources/client/common/uploads/uploader/strategy/tus-upload.ts","../../../resources/client/common/uploads/uploader/strategy/axios-upload.ts","../../../resources/client/common/uploads/uploader/strategy/s3-upload.ts","../../../resources/client/common/uploads/uploader/progress-timeout.ts","../../../resources/client/common/uploads/utils/pretty-bytes.ts","../../../node_modules/wildcard/index.js","../../../node_modules/mime-match/index.js","../../../resources/client/common/uploads/uploader/validate-upload.ts","../../../resources/client/common/uploads/uploader/file-upload-store.ts","../../../resources/client/common/uploads/uploader/file-upload-provider.tsx","../../../resources/client/common/ui/forms/input-field/chip-field/string-to-chip-value.ts","../../../resources/client/common/ui/forms/input-field/chip-field/chip-field.tsx","../../../resources/client/common/ui/forms/toggle/switch.tsx","../../../resources/client/common/utils/string/random-string.ts","../../../resources/client/common/icons/material/Delete.tsx","../../../resources/client/common/ui/interactions/dnd/drag-state.ts","../../../resources/client/common/ui/interactions/interactable-event.ts","../../../resources/client/common/ui/interactions/active-interaction.ts","../../../resources/client/common/ui/interactions/utils/dom-rect-to-obj.ts","../../../resources/client/common/ui/interactions/dnd/update-rects.ts","../../../resources/client/common/ui/interactions/dnd/use-draggable.ts","../../../resources/client/common/ui/interactions/dnd/read-files-from-data-transfer.ts","../../../resources/client/common/utils/array/async-iterable-to-array.ts","../../../resources/client/common/ui/interactions/dnd/use-droppable.ts","../../../resources/client/common/auth/user.ts","../../../resources/client/common/icons/material/Link.tsx","../../../resources/client/common/icons/material/MoreVert.tsx","../../../resources/client/common/uploads/hooks/file-entry-urls.ts","../../../resources/client/common/uploads/preview/file-preview-context.ts","../../../resources/client/common/uploads/preview/file-preview/default-file-preview.tsx","../../../resources/client/common/uploads/preview/file-preview/image-file-preview.tsx","../../../resources/client/common/uploads/preview/file-preview/text-file-preview.tsx","../../../resources/client/common/uploads/preview/file-preview/video-file-preview.tsx","../../../resources/client/common/uploads/preview/file-preview/audio-file-preview.tsx","../../../resources/client/common/uploads/preview/file-preview/pdf-file-preview.tsx","../../../resources/client/common/uploads/preview/file-preview/word-document-file-preview.tsx","../../../resources/client/common/uploads/preview/available-previews.ts","../../../resources/client/common/icons/material/ChevronLeft.tsx","../../../resources/client/common/uploads/file-type-icon/file-thumbnail.tsx","../../../resources/client/common/uploads/preview/file-preview-container.tsx","../../../resources/client/common/uploads/preview/file-preview-dialog.tsx","../../../resources/client/common/admin/file-entry/file-entry-index-filters.ts","../../../resources/client/common/ui/forms/input-field/date/date-picker/use-date-picker-state.ts","../../../resources/client/common/ui/forms/input-field/date/date-picker/date-picker.tsx"],"sourcesContent":["import {createContext} from 'react';\n\nexport type DashboardSidenavStatus = 'open' | 'closed' | 'compact';\n\nexport interface DashboardContextValue {\n  leftSidenavStatus: DashboardSidenavStatus;\n  setLeftSidenavStatus: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus: DashboardSidenavStatus;\n  setRightSidenavStatus: (status: DashboardSidenavStatus) => void;\n  isMobileMode: boolean | null;\n  leftSidenavCanBeCompact?: boolean;\n  name: string;\n}\n\nexport const DashboardLayoutContext = createContext<DashboardContextValue>(\n  null!\n);\n","import {useEffect} from 'react';\n\nexport function useBlockBodyOverflow() {\n  useEffect(() => {\n    document.documentElement.classList.add('no-page-overflow');\n    return () => {\n      document.documentElement.classList.remove('no-page-overflow');\n    };\n  }, []);\n}\n","import {ComponentPropsWithoutRef, useCallback, useMemo} from 'react';\nimport {\n  DashboardLayoutContext,\n  DashboardSidenavStatus,\n} from './dashboard-layout-context';\nimport {Underlay} from '../overlays/underlay';\nimport {AnimatePresence} from 'framer-motion';\nimport {useControlledState} from '@react-stately/utils';\nimport {useMediaQuery} from '../../utils/hooks/use-media-query';\nimport {\n  getFromLocalStorage,\n  setInLocalStorage,\n} from '../../utils/hooks/local-storage';\nimport {useBlockBodyOverflow} from '../../utils/hooks/use-block-body-overflow';\n\ninterface DashboardLayoutProps extends ComponentPropsWithoutRef<'div'> {\n  name: string;\n  leftSidenavCanBeCompact?: boolean;\n  leftSidenavStatus?: DashboardSidenavStatus;\n  onLeftSidenavChange?: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus?: DashboardSidenavStatus;\n  onRightSidenavChange?: (status: DashboardSidenavStatus) => void;\n}\nexport function DashboardLayout({\n  children,\n  leftSidenavStatus: leftSidenav,\n  onLeftSidenavChange,\n  rightSidenavStatus: rightSidenav,\n  onRightSidenavChange,\n  name,\n  leftSidenavCanBeCompact,\n  ...domProps\n}: DashboardLayoutProps) {\n  useBlockBodyOverflow();\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n\n  const isCompactModeInitially = useMemo(() => {\n    return !name ? false : getFromLocalStorage(`${name}.sidenav.compact`);\n  }, [name]);\n  const defaultLeftSidenavStatus = isCompactModeInitially ? 'compact' : 'open';\n  const [leftSidenavStatus, setLeftSidenavStatus] = useControlledState(\n    leftSidenav,\n    isMobile ? 'closed' : defaultLeftSidenavStatus,\n    onLeftSidenavChange\n  );\n\n  const rightSidenavStatusDefault = useMemo(() => {\n    const userSelected = getFromLocalStorage(\n      `${name}.sidenav.right.position`,\n      'open'\n    );\n    return isMobile ? 'closed' : userSelected;\n  }, [isMobile, name]);\n  const [rightSidenavStatus, _setRightSidenavStatus] = useControlledState(\n    rightSidenav,\n    rightSidenavStatusDefault,\n    onRightSidenavChange\n  );\n  const setRightSidenavStatus = useCallback(\n    (status: DashboardSidenavStatus) => {\n      _setRightSidenavStatus(status);\n      setInLocalStorage(`${name}.sidenav.right.position`, status);\n    },\n    [_setRightSidenavStatus, name]\n  );\n\n  const shouldShowUnderlay =\n    isMobile && (leftSidenavStatus === 'open' || rightSidenavStatus === 'open');\n\n  return (\n    <DashboardLayoutContext.Provider\n      value={{\n        leftSidenavStatus,\n        setLeftSidenavStatus,\n        rightSidenavStatus,\n        setRightSidenavStatus,\n        leftSidenavCanBeCompact,\n        name,\n        isMobileMode: isMobile,\n      }}\n    >\n      <div\n        {...domProps}\n        className=\"dashboard-grid test-overflow h-full relative isolate\"\n      >\n        {children}\n        <AnimatePresence>\n          {shouldShowUnderlay && (\n            <Underlay\n              position=\"fixed\"\n              key=\"dashboard-underlay\"\n              onClick={() => {\n                setLeftSidenavStatus('closed');\n                setRightSidenavStatus('closed');\n              }}\n            />\n          )}\n        </AnimatePresence>\n      </div>\n    </DashboardLayoutContext.Provider>\n  );\n}\n","import {cloneElement, ReactElement} from 'react';\nimport clsx from 'clsx';\n\ninterface DashboardContentProps {\n  children: ReactElement<{className: string}>;\n}\nexport function DashboardContent({children}: DashboardContentProps) {\n  return cloneElement(children, {\n    className: clsx(\n      children.props.className,\n      'dashboard-grid-content overflow-y-auto'\n    ),\n  });\n}\n","import clsx from 'clsx';\nimport {m} from 'framer-motion';\nimport {cloneElement, ReactElement, useContext} from 'react';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\n\nexport interface SidenavProps {\n  className?: string;\n  children: ReactElement;\n  position?: 'left' | 'right';\n  size?: 'sm' | 'md' | 'lg';\n}\nexport function DashboardSidenav({\n  className,\n  position,\n  children,\n  ...props\n}: SidenavProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    rightSidenavStatus,\n    setRightSidenavStatus,\n  } = useContext(DashboardLayoutContext);\n  const status = position === 'left' ? leftSidenavStatus : rightSidenavStatus;\n\n  const variants = {\n    open: {display: 'flex', width: null as any},\n    compact: {\n      display: 'flex',\n      width: null as any,\n    },\n    closed: {\n      width: 0,\n      transitionEnd: {\n        display: 'none',\n      },\n    },\n  };\n\n  const size = getSize(status === 'compact' ? 'compact' : props.size);\n\n  return (\n    <m.div\n      variants={variants}\n      initial={false}\n      animate={status}\n      transition={{type: 'tween', duration: 0.15}}\n      onClick={e => {\n        // close sidenav when user clicks a link or button on mobile\n        const target = e.target as HTMLElement;\n        if (isMobileMode && (target.closest('button') || target.closest('a'))) {\n          setLeftSidenavStatus('closed');\n          setRightSidenavStatus('closed');\n        }\n      }}\n      className={clsx(\n        className,\n        position === 'left'\n          ? 'dashboard-grid-sidenav-left'\n          : 'dashboard-grid-sidenav-right',\n        'overflow-hidden will-change-[width]',\n        size.width,\n        isMobileMode && 'fixed top-0 bottom-0 z-20 shadow-xl',\n        isMobileMode && position === 'left' && 'left-0',\n        isMobileMode && position === 'right' && 'right-0'\n      )}\n    >\n      {cloneElement(children, {\n        className: clsx(children.props.className, size.minWidth, 'h-full'),\n        isCompactMode: status === 'compact',\n      })}\n    </m.div>\n  );\n}\n\nfunction getSize(size: SidenavProps['size'] | 'compact') {\n  switch (size) {\n    case 'compact':\n      return {width: 'w-80', minWidth: 'min-w-80'};\n    case 'sm':\n      return {width: 'w-224', minWidth: 'min-w-224'};\n    case 'lg':\n      return {width: 'w-288', minWidth: 'min-w-288'};\n    default:\n      return {width: 'w-240', minWidth: 'min-w-240'};\n  }\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MenuIcon = createSvgIcon(\n  <path d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\" />\n, 'MenuOutlined');\n","import {Navbar, NavbarProps} from '../navigation/navbar/navbar';\nimport {IconButton} from '../buttons/icon-button';\nimport {MenuIcon} from '../../icons/material/Menu';\nimport React, {useContext} from 'react';\nimport clsx from 'clsx';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\nimport {setInLocalStorage} from '../../utils/hooks/local-storage';\n\ninterface DashboardNavbarProps extends Omit<NavbarProps, 'toggleButton'> {\n  hideToggleButton?: boolean;\n}\nexport function DashboardNavbar({\n  children,\n  className,\n  hideToggleButton,\n  ...props\n}: DashboardNavbarProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    name,\n    leftSidenavCanBeCompact,\n  } = useContext(DashboardLayoutContext);\n\n  const shouldToggleCompactMode = leftSidenavCanBeCompact && !isMobileMode;\n  const shouldShowToggle =\n    !hideToggleButton && (isMobileMode || leftSidenavCanBeCompact);\n\n  const handleToggle = () => {\n    setLeftSidenavStatus(leftSidenavStatus === 'open' ? 'closed' : 'open');\n  };\n\n  const handleCompactModeToggle = () => {\n    const newStatus = leftSidenavStatus === 'compact' ? 'open' : 'compact';\n    setInLocalStorage(`${name}.sidenav.compact`, newStatus === 'compact');\n    setLeftSidenavStatus(newStatus);\n  };\n\n  return (\n    <Navbar\n      className={clsx('dashboard-grid-navbar', className)}\n      border=\"border-b\"\n      size=\"sm\"\n      color=\"primary\"\n      darkModeColor=\"bg-alt\"\n      toggleButton={\n        shouldShowToggle ? (\n          <IconButton\n            size=\"md\"\n            onClick={() => {\n              if (shouldToggleCompactMode) {\n                handleCompactModeToggle();\n              } else {\n                handleToggle();\n              }\n            }}\n          >\n            <MenuIcon />\n          </IconButton>\n        ) : undefined\n      }\n      {...props}\n    >\n      {children}\n    </Navbar>\n  );\n}\n","import {Key} from 'react';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\n\nexport class BackendFilter {\n  defaultValue: BackendFilterOptions['defaultValue'];\n  defaultOperator: BackendFilterOptions['defaultOperator'];\n  key: BackendFilterOptions['key'];\n  label: BackendFilterOptions['label'];\n  description?: BackendFilterOptions['description'];\n  type: BackendFilterOptions['type'];\n  inputType?: BackendFilterOptions['inputType'];\n  options: BackendFilterOptions['options'];\n  operators: BackendFilterOptions['operators'];\n  model?: BackendFilterOptions['model'];\n\n  constructor(options: Partial<BackendFilterOptions>) {\n    this.defaultValue =\n      options.defaultValue !== undefined ? options.defaultValue : '';\n    this.key = options.key!;\n    this.label = options.label!;\n    this.description = options.description;\n    this.defaultOperator = options.defaultOperator || FilterOperator.eq;\n    this.type = options.type || FilterControlType.Select;\n    this.inputType = options.inputType;\n    this.options = options.options || [];\n    this.operators = options.operators || [];\n    this.model = options.model;\n  }\n}\n\nexport interface BackendFilterOptions {\n  defaultValue: any;\n  key: string;\n  label: MessageDescriptor;\n  description?: MessageDescriptor;\n  defaultOperator: FilterOperator;\n  type: FilterControlType;\n  // for input filter\n  inputType: 'string' | 'number';\n  // for select filter\n  options: BackendFilterSelectOption[];\n  operators: FilterOperator[];\n  // for select normalized model filter\n  model: string;\n}\n\nexport interface BackendFilterSelectOption {\n  label: MessageDescriptor;\n  key: Key;\n  value: any;\n}\n\nexport enum FilterControlType {\n  Select = 'select',\n  DatePicker = 'datePicker',\n  SelectModel = 'selectModel',\n  Input = 'input',\n  BooleanToggle = 'booleanToggle',\n}\n\nexport enum FilterOperator {\n  eq = '=',\n  ne = '!=',\n  gt = '>',\n  gte = '>=',\n  lt = '<',\n  lte = '<=',\n  has = 'has',\n  doesntHave = 'doesntHave',\n  between = 'between',\n}\n\nexport const ALL_PRIMITIVE_OPERATORS = [\n  FilterOperator.eq,\n  FilterOperator.ne,\n  FilterOperator.gt,\n  FilterOperator.gte,\n  FilterOperator.lt,\n  FilterOperator.lte,\n];\n","import {DateRangeValue} from '../date-range-value';\nimport {message} from '../../../../../../i18n/message';\nimport {MessageDescriptor} from '../../../../../../i18n/message-descriptor';\nimport {getLocalTimeZone, now} from '@internationalized/date';\n\nconst Now = now(getLocalTimeZone());\n\nexport interface DateRangePreset {\n  key: number;\n  label: MessageDescriptor;\n  getRangeValue?: () => DateRangeValue;\n  isCustomRange?: boolean;\n}\n\nexport const DateRangePresets: DateRangePreset[] = [\n  {\n    key: 0,\n    label: message('last 7 days'),\n    getRangeValue: () => ({\n      preset: 0,\n      start: Now.subtract({days: 7}),\n      end: Now,\n    }),\n  },\n  {\n    key: 1,\n    label: message('last 14 days'),\n    getRangeValue: () => ({\n      preset: 1,\n      start: Now.subtract({days: 14}),\n      end: Now,\n    }),\n  },\n  {\n    key: 2,\n    label: message('last 30 days'),\n    getRangeValue: () => ({\n      preset: 2,\n      start: Now.subtract({days: 30}),\n      end: Now,\n    }),\n  },\n  {\n    key: 3,\n    label: message('last 3 months'),\n    getRangeValue: () => ({\n      preset: 3,\n      start: Now.subtract({months: 3}),\n      end: Now,\n    }),\n  },\n  {\n    key: 4,\n    label: message('last 12 months'),\n    getRangeValue: () => ({\n      preset: 4,\n      start: Now.subtract({months: 12}),\n      end: Now,\n    }),\n  },\n];\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DateRangeIcon = createSvgIcon(\n  <path d=\"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z\" />\n, 'DateRangeOutlined');\n","import {FocusScope} from '@react-aria/focus';\nimport React, {ComponentPropsWithoutRef, CSSProperties, ReactNode} from 'react';\nimport clsx from 'clsx';\n\ninterface InputProps {\n  className?: string;\n  children: ReactNode;\n  autoFocus?: boolean;\n  disabled?: boolean;\n  style?: CSSProperties;\n  inputProps?: ComponentPropsWithoutRef<'div'>;\n  wrapperProps?: ComponentPropsWithoutRef<'div'>;\n  onClick?: React.MouseEventHandler<HTMLDivElement>;\n}\n\nexport const Input = React.forwardRef<HTMLDivElement, InputProps>(\n  (props, ref) => {\n    const {\n      children,\n      inputProps,\n      wrapperProps,\n      className,\n      autoFocus,\n      style,\n      onClick,\n    } = props;\n\n    return (\n      <div {...wrapperProps} onClick={onClick}>\n        <div\n          {...inputProps}\n          role=\"group\"\n          className={clsx(\n            className,\n            'flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60'\n          )}\n          ref={ref}\n          style={style}\n        >\n          <FocusScope autoFocus={autoFocus}>{children}</FocusScope>\n        </div>\n      </div>\n    );\n  }\n);\n","import React, {ComponentPropsWithoutRef, FocusEventHandler, Ref} from 'react';\nimport clsx from 'clsx';\nimport {createFocusManager} from '@react-aria/focus';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {getInputFieldClassNames} from '../../get-input-field-class-names';\nimport {Field, FieldProps} from '../../field';\nimport {Input} from '../../input';\nimport {useField} from '../../use-field';\n\nexport interface DatePickerFieldProps\n  extends Omit<FieldProps, 'fieldClassNames'> {\n  inputRef?: Ref<HTMLDivElement>;\n  onBlur?: FocusEventHandler;\n}\nexport const DatePickerField = React.forwardRef<\n  HTMLDivElement,\n  DatePickerFieldProps\n>(({inputRef, wrapperProps, children, onBlur, ...other}, ref) => {\n  const fieldClassNames = getInputFieldClassNames(other);\n  const objRef = useObjectRef(ref);\n\n  const {fieldProps, inputProps} = useField({\n    ...other,\n    focusRef: objRef,\n    labelElementType: 'span',\n  });\n\n  return (\n    <Field\n      wrapperProps={mergeProps<ComponentPropsWithoutRef<'div'>[]>(\n        wrapperProps!,\n        {\n          onBlur: e => {\n            if (!objRef.current.contains(e.relatedTarget)) {\n              onBlur?.(e);\n            }\n          },\n          onClick: () => {\n            // focus first segment when clicking on label or somewhere else in the field, but no directly on segment\n            const focusManager = createFocusManager(objRef);\n            focusManager.focusFirst();\n          },\n        }\n      )}\n      fieldClassNames={fieldClassNames}\n      ref={objRef}\n      {...fieldProps}\n    >\n      <Input\n        inputProps={inputProps}\n        className={clsx(fieldClassNames.input, 'gap-10')}\n        ref={inputRef}\n      >\n        {children}\n      </Input>\n    </Field>\n  );\n});\n","import {CalendarDate, DateValue} from '@internationalized/date';\n\nexport function getDefaultGranularity(date: DateValue) {\n  if (date instanceof CalendarDate) {\n    return 'day';\n  }\n  return 'minute';\n}\n\nexport function dateIsInvalid(\n  date: CalendarDate,\n  min?: DateValue,\n  max?: DateValue\n) {\n  return (\n    (min != null && date.compare(min) < 0) ||\n    (max != null && date.compare(max) > 0)\n  );\n}\n","import {useMemo, useState} from 'react';\nimport {\n  DateValue,\n  getLocalTimeZone,\n  toZoned,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {useDateFormatter} from '../../../../i18n/use-date-formatter';\nimport {getDefaultGranularity} from './utils';\nimport type {DatePickerValueProps} from './date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-picker/date-range-value';\n\nexport function useBaseDatePickerState(\n  selectedDate: DateValue,\n  props:\n    | DatePickerValueProps<ZonedDateTime>\n    | DatePickerValueProps<Partial<DateRangeValue>>\n) {\n  const [calendarIsOpen, setCalendarIsOpen] = useState(false);\n  const closeDialogOnSelection = props.closeDialogOnSelection ?? true;\n\n  const defaultFormatter = useDateFormatter();\n  const resolvedOptions = useMemo(\n    () => defaultFormatter.resolvedOptions(),\n    [defaultFormatter]\n  );\n  const timeZone = useMemo(\n    () =>\n      selectedDate && 'timeZone' in selectedDate\n        ? selectedDate.timeZone\n        : resolvedOptions.timeZone,\n    [selectedDate, resolvedOptions.timeZone]\n  );\n\n  const granularity = props.granularity || getDefaultGranularity(selectedDate);\n  const min = props.min ? toZoned(props.min, getLocalTimeZone()) : undefined;\n  const max = props.max ? toZoned(props.max, getLocalTimeZone()) : undefined;\n\n  return {\n    timeZone,\n    granularity,\n    min,\n    max,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  };\n}\n","import {useControlledState} from '@react-stately/utils';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  CalendarDate,\n  DateValue,\n  endOfMonth,\n  getLocalTimeZone,\n  isSameDay,\n  isSameMonth,\n  now,\n  startOfMonth,\n  toCalendarDate,\n  toZoned,\n  ZonedDateTime\n} from '@internationalized/date';\nimport {BaseDatePickerState, DatePickerValueProps} from '../date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-value';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\n\nconst Now = now(getLocalTimeZone());\n\nexport interface IsPlaceholderValue {\n  start: boolean;\n  end: boolean;\n}\n\nexport type DateRangePickerState = BaseDatePickerState<\n  DateRangeValue,\n  IsPlaceholderValue\n>;\n\nexport function useDateRangePickerState(\n  props: DatePickerValueProps<Partial<DateRangeValue>>\n): DateRangePickerState {\n  const [isPlaceholder, setIsPlaceholder] = useState<IsPlaceholderValue>({\n    start: (!props.value || !props.value.start) && !props.defaultValue?.start,\n    end: (!props.value || !props.value.end) && !props.defaultValue?.end,\n  });\n\n  const [selectedValue, setSelectedStateValue] = useControlledState(\n    props.value ? completeRange(props.value) : undefined,\n    !props.value ? completeRange(props.defaultValue) : undefined,\n    props.onChange\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timeZone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(selectedValue.start, props);\n\n  const [anchorDate, setAnchorDate] = useState<CalendarDate | null>(null);\n  const [isHighlighting, setIsHighlighting] = useState(false);\n  const [highlightedRange, setHighlightedRange] =\n    useState<DateRangeValue>(selectedValue);\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return rangeToCalendarDates(selectedValue, max);\n  });\n\n  const prepareValue = useCallback(\n    (newDate: DateValue, oldDate?: ZonedDateTime) => {\n      if (min && newDate.compare(min) < 0) {\n        newDate = min;\n      } else if (max && newDate.compare(max) > 0) {\n        newDate = max;\n      }\n\n      return oldDate\n        ? oldDate.set(newDate)\n        : toZoned(newDate, getLocalTimeZone());\n    },\n    [min, max]\n  );\n\n  const setSelectedValue = useCallback(\n    (newValue: DateRangeValue) => {\n      const value = {\n        start: prepareValue(newValue.start),\n        end: prepareValue(newValue.end),\n        preset: newValue.preset,\n      };\n      setSelectedStateValue(value);\n      setHighlightedRange(value);\n      setCalendarDates(rangeToCalendarDates(value, max));\n      setIsPlaceholder({start: false, end: false});\n    },\n    [setSelectedStateValue, prepareValue, max]\n  );\n\n  const dayIsActive = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (!isPlaceholder.start && isSameDay(day, highlightedRange.start)) ||\n        (!isPlaceholder.end && isSameDay(day, highlightedRange.end))\n      );\n    },\n    [highlightedRange, isPlaceholder]\n  );\n\n  const dayIsHighlighted = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (isHighlighting || (!isPlaceholder.start && !isPlaceholder.end)) &&\n        day.compare(highlightedRange.start) >= 0 &&\n        day.compare(highlightedRange.end) <= 0\n      );\n    },\n    [highlightedRange, isPlaceholder, isHighlighting]\n  );\n\n  const dayIsRangeStart = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.start),\n    [highlightedRange]\n  );\n\n  const dayIsRangeEnd = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.end),\n    [highlightedRange]\n  );\n\n  const getCellProps = useCallback(\n    (date: CalendarDate, isSameMonth: boolean): HTMLAttributes<HTMLElement> => {\n      return {\n        onPointerEnter: () => {\n          if (isHighlighting && isSameMonth) {\n            setHighlightedRange(makeRange({start: anchorDate!, end: date}));\n          }\n        },\n        onClick: () => {\n          if (!isHighlighting) {\n            setIsHighlighting(true);\n            setAnchorDate(date);\n            setHighlightedRange(makeRange({start: date, end: date}));\n          } else {\n            const finalRange = makeRange({start: anchorDate!, end: date});\n            setIsHighlighting(false);\n            setAnchorDate(null);\n            setSelectedValue?.(finalRange);\n            if (closeDialogOnSelection) {\n              setCalendarIsOpen?.(false);\n            }\n          }\n        },\n      };\n    },\n    [\n      anchorDate,\n      isHighlighting,\n      setSelectedValue,\n      setCalendarIsOpen,\n      closeDialogOnSelection,\n    ]\n  );\n\n  return {\n    selectedValue,\n    setSelectedValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    calendarDates,\n    setIsPlaceholder,\n    isPlaceholder,\n    setCalendarDates,\n    min,\n    max,\n    granularity,\n    timeZone,\n    closeDialogOnSelection,\n  };\n}\n\nfunction rangeToCalendarDates(\n  range: DateRangeValue,\n  max?: DateValue\n): CalendarDate[] {\n  let start = toCalendarDate(startOfMonth(range.start));\n  let end = toCalendarDate(endOfMonth(range.end));\n\n  // make sure we don't show the same month twice\n  if (isSameMonth(start, end)) {\n    end = endOfMonth(end.add({months: 1}));\n  }\n\n  // if next month is disabled, show previous instead\n  if (max && end.compare(max) > 0) {\n    end = start;\n    start = startOfMonth(start.subtract({months: 1}));\n  }\n  return [start, end];\n}\n\ninterface MakeRangeProps {\n  start: DateValue;\n  end: DateValue;\n}\nfunction makeRange(props: MakeRangeProps): DateRangeValue {\n  const start = toZoned(props.start, getLocalTimeZone());\n  const end = toZoned(props.end, getLocalTimeZone());\n  if (start.compare(end) > 0) {\n    return {start: end, end: start};\n  }\n  return {start, end};\n}\n\nfunction completeRange(\n  range: Partial<DateRangeValue> | null | undefined\n): DateRangeValue {\n  if (range?.start && range?.end) {\n    return range as DateRangeValue;\n  } else if (!range?.start && range?.end) {\n    range.start = range.end.subtract({months: 1});\n    return range as DateRangeValue;\n  } else if (!range?.end && range?.start) {\n    range.end = range.start.add({months: 1});\n    return range as DateRangeValue;\n  }\n  return {start: Now, end: Now.add({months: 1})};\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowRightAltIcon = createSvgIcon(\n  <path d=\"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z\" />\n, 'ArrowRightAltOutlined');\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function adjustSegment(\n  value: ZonedDateTime,\n  part: string,\n  amount: number,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (part) {\n    case 'era':\n    case 'year':\n    case 'month':\n    case 'day':\n      return value.cycle(part, amount, {round: part === 'year'});\n  }\n\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod': {\n        const hours = value.hour;\n        const isPM = hours >= 12;\n        return value.set({hour: isPM ? hours - 12 : hours + 12});\n      }\n      case 'hour':\n      case 'minute':\n      case 'second':\n        return value.cycle(part, amount, {\n          round: part !== 'hour',\n          hourCycle: options.hour12 ? 12 : 24,\n        });\n    }\n  }\n\n  return value;\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function setSegment(\n  value: ZonedDateTime,\n  part: string,\n  segmentValue: number,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (part) {\n    case 'day':\n    case 'month':\n    case 'year':\n      return value.set({[part]: segmentValue});\n  }\n\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod': {\n        const hours = value.hour;\n        const wasPM = hours >= 12;\n        const isPM = segmentValue >= 12;\n        if (isPM === wasPM) {\n          return value;\n        }\n        return value.set({hour: wasPM ? hours - 12 : hours + 12});\n      }\n      case 'hour':\n        // In 12 hour time, ensure that AM/PM does not change\n        if (options.hour12) {\n          const hours = value.hour;\n          const wasPM = hours >= 12;\n          if (!wasPM && segmentValue === 12) {\n            segmentValue = 0;\n          }\n          if (wasPM && segmentValue < 12) {\n            segmentValue += 12;\n          }\n        }\n      // fallthrough\n      case 'minute':\n      case 'second':\n        return value.set({[part]: segmentValue});\n    }\n  }\n\n  return value;\n}\n","export const PAGE_STEP = {\n  year: 5,\n  month: 2,\n  day: 7,\n  hour: 2,\n  minute: 15,\n  second: 15,\n  dayPeriod: 1,\n};\n","import {useFocusManager} from '@react-aria/focus';\nimport React, {\n  ComponentPropsWithoutRef,\n  HTMLAttributes,\n  KeyboardEventHandler,\n  useMemo,\n  useRef,\n} from 'react';\nimport {NumberParser} from '@internationalized/number';\nimport {mergeProps} from '@react-aria/utils';\nimport {getLocalTimeZone, today, ZonedDateTime} from '@internationalized/date';\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\nimport {useDateFormatter} from '../../../../../i18n/use-date-formatter';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {adjustSegment} from './utils/adjust-segment';\nimport {setSegment} from './utils/set-segment';\nimport {PAGE_STEP} from './utils/page-step';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\nimport {useIsMobileMediaQuery} from '../../../../../utils/hooks/is-mobile-media-query';\n\nexport interface EditableSegment {\n  type: 'day' | 'dayPeriod' | 'hour' | 'minute' | 'month' | 'second' | 'year';\n  text: string;\n  value: number;\n  minValue: number;\n  maxValue: number;\n  minLength: number;\n}\n\ninterface DatePickerSegmentProps {\n  segment: EditableSegment;\n  domProps?: ComponentPropsWithoutRef<'div'>;\n  state: DatePickerState | DateRangePickerState;\n  value: ZonedDateTime;\n  onChange: (newValue: ZonedDateTime) => void;\n  isPlaceholder?: boolean;\n}\nexport function EditableDateSegment({\n  segment,\n  domProps,\n  value,\n  onChange,\n  isPlaceholder,\n  state: {timeZone, calendarIsOpen, setCalendarIsOpen},\n}: DatePickerSegmentProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const enteredKeys = useRef('');\n  const {localeCode} = useSelectedLocale();\n  const focusManager = useFocusManager();\n  const formatter = useDateFormatter({timeZone});\n  const parser = useMemo(\n    () => new NumberParser(localeCode, {maximumFractionDigits: 0}),\n    [localeCode]\n  );\n\n  const setSegmentValue = (newValue: number) => {\n    onChange(\n      setSegment(value, segment.type, newValue, formatter.resolvedOptions())\n    );\n  };\n\n  const adjustSegmentValue = (amount: number) => {\n    onChange(\n      adjustSegment(value, segment.type, amount, formatter.resolvedOptions())\n    );\n  };\n\n  const backspace = () => {\n    if (parser.isValidPartialNumber(segment.text)) {\n      const newValue = segment.text.slice(0, -1);\n      const parsed = parser.parse(newValue);\n      if (newValue.length === 0 || parsed === 0) {\n        const now = today(getLocalTimeZone());\n        if (segment.type in now) {\n          // @ts-ignore\n          setSegmentValue(now[segment.type]);\n        }\n      } else {\n        setSegmentValue(parsed);\n      }\n      enteredKeys.current = newValue;\n    } else if (segment.type === 'dayPeriod') {\n      adjustSegmentValue(-1);\n    }\n  };\n\n  const onKeyDown: KeyboardEventHandler = e => {\n    if (e.ctrlKey || e.metaKey || e.shiftKey || e.altKey) {\n      return;\n    }\n\n    // Navigation between date segments and deletion\n    switch (e.key) {\n      case 'ArrowLeft':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager.focusPrevious();\n        break;\n      case 'ArrowRight':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager.focusNext();\n        break;\n      case 'Enter':\n        (e.target as HTMLElement).closest('form')?.requestSubmit();\n        setCalendarIsOpen(!calendarIsOpen);\n        break;\n      case 'Tab':\n        break;\n      case 'Backspace':\n      case 'Delete': {\n        e.preventDefault();\n        e.stopPropagation();\n        backspace();\n        break;\n      }\n\n      // Spinbutton incrementing/decrementing\n      case 'ArrowUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(1);\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-1);\n        break;\n      case 'PageUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(PAGE_STEP[segment.type] || 1);\n        break;\n      case 'PageDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-(PAGE_STEP[segment.type] || 1));\n        break;\n      case 'Home':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.maxValue);\n        break;\n      case 'End':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.minValue);\n        break;\n    }\n\n    onInput(e.key);\n  };\n\n  const amPmFormatter = useDateFormatter({hour: 'numeric', hour12: true});\n  const am = useMemo(() => {\n    const amDate = new Date();\n    amDate.setHours(0);\n    return amPmFormatter\n      .formatToParts(amDate)\n      .find(part => part.type === 'dayPeriod')!.value;\n  }, [amPmFormatter]);\n  const pm = useMemo(() => {\n    const pmDate = new Date();\n    pmDate.setHours(12);\n    return amPmFormatter\n      .formatToParts(pmDate)\n      .find(part => part.type === 'dayPeriod')!.value;\n  }, [amPmFormatter]);\n\n  // Update date values on user keyboard input\n  const onInput = (key: string) => {\n    const newValue = enteredKeys.current + key;\n\n    switch (segment.type) {\n      case 'dayPeriod':\n        if (am.toLowerCase().startsWith(key)) {\n          setSegmentValue(0);\n        } else if (pm.toLowerCase().startsWith(key)) {\n          setSegmentValue(12);\n        } else {\n          break;\n        }\n        focusManager.focusNext();\n        break;\n      case 'day':\n      case 'hour':\n      case 'minute':\n      case 'second':\n      case 'month':\n      case 'year': {\n        if (!parser.isValidPartialNumber(newValue)) {\n          return;\n        }\n\n        let numberValue = parser.parse(newValue);\n        let segmentValue = numberValue;\n        let allowsZero = segment.minValue === 0;\n        if (segment.type === 'hour' && formatter.resolvedOptions().hour12) {\n          switch (formatter.resolvedOptions().hourCycle) {\n            case 'h11':\n              if (numberValue > 11) {\n                segmentValue = parser.parse(key);\n              }\n              break;\n            case 'h12':\n              allowsZero = false;\n              if (numberValue > 12) {\n                segmentValue = parser.parse(key);\n              }\n              break;\n          }\n\n          if (segment.value >= 12 && numberValue > 1) {\n            numberValue += 12;\n          }\n        } else if (numberValue > segment.maxValue) {\n          segmentValue = parser.parse(key);\n        }\n\n        if (Number.isNaN(numberValue)) {\n          return;\n        }\n\n        const shouldSetValue = segmentValue !== 0 || allowsZero;\n        if (shouldSetValue) {\n          setSegmentValue(segmentValue);\n        }\n\n        if (\n          Number(`${numberValue}0`) > segment.maxValue ||\n          newValue.length >= String(segment.maxValue).length\n        ) {\n          enteredKeys.current = '';\n          if (shouldSetValue) {\n            focusManager.focusNext();\n          }\n        } else {\n          enteredKeys.current = newValue;\n        }\n        break;\n      }\n    }\n  };\n\n  const spinButtonProps: HTMLAttributes<HTMLDivElement> = isMobile\n    ? {}\n    : {\n        'aria-label': segment.type,\n        'aria-valuetext': isPlaceholder ? undefined : `${segment.value}`,\n        'aria-valuemin': segment.minValue,\n        'aria-valuemax': segment.maxValue,\n        'aria-valuenow': isPlaceholder ? undefined : segment.value,\n        tabIndex: 0,\n        onKeyDown,\n      };\n\n  return (\n    <div\n      {...mergeProps(domProps!, {\n        ...spinButtonProps,\n        onFocus: e => {\n          enteredKeys.current = '';\n          e.target.scrollIntoView({block: 'nearest'});\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n      } as HTMLAttributes<HTMLDivElement>)}\n      className=\"p-2 outline-none caret-transparent cursor-default rounded focus:bg-primary focus:text-on-primary select-none whitespace-nowrap box-content tabular-nums text-center\"\n    >\n      {segment.text.padStart(segment.minLength, '0')}\n    </div>\n  );\n}\n","import {useFocusManager} from '@react-aria/focus';\nimport {ComponentPropsWithoutRef} from 'react';\n\nexport interface LiteralSegment {\n  type: 'literal';\n  minLength: 1;\n  text: string;\n}\n\ninterface LiteralSegmentProps extends ComponentPropsWithoutRef<'div'> {\n  segment: LiteralSegment;\n  domProps?: ComponentPropsWithoutRef<'div'>;\n}\nexport function LiteralDateSegment({segment, domProps}: LiteralSegmentProps) {\n  const focusManager = useFocusManager();\n  return (\n    <div\n      {...domProps}\n      onPointerDown={e => {\n        if (e.pointerType === 'mouse') {\n          e.preventDefault();\n          const res = focusManager.focusNext({from: e.target as HTMLElement});\n          if (!res) {\n            focusManager.focusPrevious({from: e.target as HTMLElement});\n          }\n        }\n      }}\n      aria-hidden\n      className=\"min-w-4 cursor-default select-none\"\n    >\n      {segment.text}\n    </div>\n  );\n}\n","import {\n  DateValue,\n  getMinimumDayInMonth,\n  getMinimumMonthInYear,\n} from '@internationalized/date';\n\nexport function getSegmentLimits(\n  date: DateValue,\n  type: string,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (type) {\n    case 'year':\n      return {\n        value: date.year,\n        placeholder: 'yyyy',\n        minValue: 1,\n        maxValue: date.calendar.getYearsInEra(date),\n      };\n    case 'month':\n      return {\n        value: date.month,\n        placeholder: 'mm',\n        minValue: getMinimumMonthInYear(date),\n        maxValue: date.calendar.getMonthsInYear(date),\n      };\n    case 'day':\n      return {\n        value: date.day,\n        minValue: getMinimumDayInMonth(date),\n        maxValue: date.calendar.getDaysInMonth(date),\n        placeholder: 'dd',\n      };\n  }\n\n  if ('hour' in date) {\n    switch (type) {\n      case 'dayPeriod':\n        return {\n          value: date.hour >= 12 ? 12 : 0,\n          minValue: 0,\n          maxValue: 12,\n          placeholder: '--',\n        };\n      case 'hour':\n        if (options.hour12) {\n          const isPM = date.hour >= 12;\n          return {\n            value: date.hour,\n            minValue: isPM ? 12 : 0,\n            maxValue: isPM ? 23 : 11,\n            placeholder: '--',\n          };\n        }\n\n        return {\n          value: date.hour,\n          minValue: 0,\n          maxValue: 23,\n          placeholder: '--',\n        };\n      case 'minute':\n        return {\n          value: date.minute,\n          minValue: 0,\n          maxValue: 59,\n          placeholder: '--',\n        };\n    }\n  }\n\n  return {};\n}\n","import React, {ComponentPropsWithoutRef, useMemo} from 'react';\nimport {ZonedDateTime} from '@internationalized/date';\nimport {EditableDateSegment, EditableSegment} from './editable-date-segment';\nimport {LiteralDateSegment, LiteralSegment} from './literal-segment';\nimport {useDateFormatter} from '../../../../../i18n/use-date-formatter';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {getSegmentLimits} from './utils/get-segment-limits';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface DateSegmentListProps {\n  segmentProps?: ComponentPropsWithoutRef<'div'>;\n  state: DatePickerState | DateRangePickerState;\n  value: ZonedDateTime;\n  onChange: (newValue: ZonedDateTime) => void;\n  isPlaceholder?: boolean;\n}\nexport function DateSegmentList({\n  segmentProps,\n  state,\n  value,\n  onChange,\n  isPlaceholder,\n}: DateSegmentListProps) {\n  const {granularity} = state;\n  const options = useMemo(() => {\n    const memoOptions: Intl.DateTimeFormatOptions = {\n      year: 'numeric',\n      month: 'numeric',\n      day: 'numeric',\n    };\n    if (granularity === 'minute') {\n      memoOptions.hour = 'numeric';\n      memoOptions.minute = 'numeric';\n    }\n    return memoOptions;\n  }, [granularity]);\n\n  const formatter = useDateFormatter(options);\n\n  const dateValue = useMemo(() => value.toDate(), [value]);\n  const segments = useMemo(() => {\n    return formatter.formatToParts(dateValue).map(segment => {\n      const limits = getSegmentLimits(\n        value,\n        segment.type,\n        formatter.resolvedOptions()\n      );\n      const textValue =\n        isPlaceholder && segment.type !== 'literal'\n          ? limits.placeholder\n          : segment.value;\n      return {\n        type: segment.type,\n        text: segment.value === ', ' ? ' ' : textValue,\n        ...limits,\n        minLength:\n          segment.type !== 'literal' ? String(limits.maxValue).length : 1,\n      } as LiteralSegment | EditableSegment;\n    });\n  }, [dateValue, formatter, isPlaceholder, value]);\n\n  return (\n    <div className=\"flex items-center\">\n      {segments.map((segment, index) => {\n        if (segment.type === 'literal') {\n          return (\n            <LiteralDateSegment\n              domProps={segmentProps}\n              key={index}\n              segment={segment}\n            />\n          );\n        }\n        return (\n          <EditableDateSegment\n            isPlaceholder={isPlaceholder}\n            domProps={segmentProps}\n            state={state}\n            value={value}\n            onChange={onChange}\n            segment={segment}\n            key={index}\n          />\n        );\n      })}\n    </div>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const KeyboardArrowLeftIcon = createSvgIcon(\n  <path d=\"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z\" />\n, 'KeyboardArrowLeftOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const KeyboardArrowRightIcon = createSvgIcon(\n  <path d=\"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\" />\n, 'KeyboardArrowRightOutlined');\n","import React from 'react';\nimport clsx from 'clsx';\nimport {\n  CalendarDate,\n  DateValue,\n  getDayOfWeek,\n  isSameMonth,\n  isToday,\n} from '@internationalized/date';\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {dateIsInvalid} from '../utils';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface CalendarCellProps {\n  date: CalendarDate;\n  currentMonth: DateValue;\n  state: DatePickerState | DateRangePickerState;\n}\nexport function CalendarCell({\n  date,\n  currentMonth,\n  state: {\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    timeZone,\n    min,\n    max,\n  },\n}: CalendarCellProps) {\n  const {localeCode} = useSelectedLocale();\n  const dayOfWeek = getDayOfWeek(date, localeCode);\n  const isActive = dayIsActive(date);\n  const isHighlighted = dayIsHighlighted(date);\n  const isRangeStart = dayIsRangeStart(date);\n  const isRangeEnd = dayIsRangeEnd(date);\n  const dayIsToday = isToday(date, timeZone);\n  const sameMonth = isSameMonth(date, currentMonth);\n  const isDisabled = dateIsInvalid(date, min, max);\n\n  return (\n    <div\n      role=\"button\"\n      aria-disabled={isDisabled}\n      className={clsx(\n        'w-40 h-40 text-sm relative isolate flex-shrink-0',\n        isDisabled && 'text-disabled pointer-events-none'\n      )}\n      {...getCellProps(date, sameMonth)}\n    >\n      <span\n        className={clsx(\n          'absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer',\n          !sameMonth && 'invisible',\n          !isActive && !dayIsToday && 'hover:bg-hover',\n          isActive && 'bg-primary text-on-primary font-semibold',\n          dayIsToday && !isActive && 'bg-chip'\n        )}\n      >\n        {date.day}\n      </span>\n      {isHighlighted && sameMonth && (\n        <span\n          className={clsx(\n            'absolute w-full h-full inset-0 bg-primary/focus',\n            (isRangeStart || dayOfWeek === 0 || date.day === 1) &&\n              'rounded-l-full',\n            (isRangeEnd ||\n              dayOfWeek === 6 ||\n              date.day ===\n                currentMonth.calendar.getDaysInMonth(currentMonth)) &&\n              'rounded-r-full'\n          )}\n        />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport {m} from 'framer-motion';\nimport {\n  CalendarDate,\n  endOfMonth,\n  getWeeksInMonth,\n  startOfMonth,\n  startOfWeek,\n} from '@internationalized/date';\nimport {KeyboardArrowLeftIcon} from '../../../../../icons/material/KeyboardArrowLeft';\nimport {IconButton} from '../../../../buttons/icon-button';\nimport {KeyboardArrowRightIcon} from '../../../../../icons/material/KeyboardArrowRight';\nimport {CalendarCell} from './calendar-cell';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {useDateFormatter} from '../../../../../i18n/use-date-formatter';\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\nimport {dateIsInvalid} from '../utils';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\nexport interface CalendarMonthProps {\n  state: DatePickerState | DateRangePickerState;\n  startDate: CalendarDate;\n  isFirst: boolean;\n  isLast: boolean;\n}\nexport function CalendarMonth({\n  startDate,\n  state,\n  isFirst,\n  isLast,\n}: CalendarMonthProps) {\n  const {localeCode} = useSelectedLocale();\n  const weeksInMonth = getWeeksInMonth(startDate, localeCode);\n  const monthStart = startOfWeek(startDate, localeCode);\n\n  return (\n    <div className=\"w-280 flex-shrink-0\">\n      <CalendarMonthHeader\n        isFirst={isFirst}\n        isLast={isLast}\n        state={state}\n        currentMonth={startDate}\n      />\n      <div className=\"block\" role=\"grid\">\n        <WeekdayHeader state={state} startDate={startDate} />\n        {[...new Array(weeksInMonth).keys()].map(weekIndex => (\n          <m.div className=\"flex mb-6\" key={weekIndex}>\n            {[...new Array(7).keys()].map(dayIndex => (\n              <CalendarCell\n                key={dayIndex}\n                date={monthStart.add({weeks: weekIndex, days: dayIndex})}\n                currentMonth={startDate}\n                state={state}\n              />\n            ))}\n          </m.div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface CalendarMonthHeaderProps {\n  state: DatePickerState | DateRangePickerState;\n  currentMonth: CalendarDate;\n  isFirst: boolean;\n  isLast: boolean;\n}\nfunction CalendarMonthHeader({\n  currentMonth,\n  isFirst,\n  isLast,\n  state: {calendarDates, setCalendarDates, timeZone, min, max},\n}: CalendarMonthHeaderProps) {\n  const shiftCalendars = (direction: 'forward' | 'backward') => {\n    const count = calendarDates.length;\n    let newDates: CalendarDate[];\n    if (direction === 'forward') {\n      newDates = calendarDates.map(date =>\n        endOfMonth(date.add({months: count}))\n      );\n    } else {\n      newDates = calendarDates.map(date =>\n        endOfMonth(date.subtract({months: count}))\n      );\n    }\n    setCalendarDates(newDates);\n  };\n\n  const monthFormatter = useDateFormatter({\n    month: 'long',\n    year: 'numeric',\n    era: currentMonth.calendar.identifier !== 'gregory' ? 'long' : undefined,\n    calendar: currentMonth.calendar.identifier,\n  });\n\n  const isBackwardDisabled = dateIsInvalid(\n    currentMonth.subtract({days: 1}),\n    min,\n    max\n  );\n  const isForwardDisabled = dateIsInvalid(\n    startOfMonth(currentMonth.add({months: 1})),\n    min,\n    max\n  );\n\n  return (\n    <div className=\"flex items-center justify-between gap-10\">\n      <IconButton\n        size=\"md\"\n        className={clsx('text-muted', !isFirst && 'invisible')}\n        disabled={!isFirst || isBackwardDisabled}\n        aria-hidden={!isFirst}\n        onClick={() => {\n          shiftCalendars('backward');\n        }}\n      >\n        <KeyboardArrowLeftIcon />\n      </IconButton>\n      <div className=\"text-sm font-semibold select-none\">\n        {monthFormatter.format(currentMonth.toDate(timeZone))}\n      </div>\n      <IconButton\n        size=\"md\"\n        className={clsx('text-muted', !isLast && 'invisible')}\n        disabled={!isLast || isForwardDisabled}\n        aria-hidden={!isLast}\n        onClick={() => {\n          shiftCalendars('forward');\n        }}\n      >\n        <KeyboardArrowRightIcon />\n      </IconButton>\n    </div>\n  );\n}\n\ninterface WeekdayHeaderProps {\n  state: DatePickerState | DateRangePickerState;\n  startDate: CalendarDate;\n}\nfunction WeekdayHeader({state: {timeZone}, startDate}: WeekdayHeaderProps) {\n  const {localeCode} = useSelectedLocale();\n  const dayFormatter = useDateFormatter({weekday: 'short'});\n\n  const monthStart = startOfWeek(startDate, localeCode);\n\n  return (\n    <div className=\"flex\">\n      {[...new Array(7).keys()].map(index => {\n        const date = monthStart.add({days: index});\n        const dateDay = date.toDate(timeZone);\n        const weekday = dayFormatter.format(dateDay);\n        return (\n          <div\n            className=\"w-40 h-40 text-sm font-semibold relative flex-shrink-0\"\n            key={index}\n          >\n            <div className=\"absolute flex items-center justify-center w-full h-full select-none\">\n              {weekday}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import React from 'react';\nimport {startOfMonth, toCalendarDate} from '@internationalized/date';\nimport {useIsMobileMediaQuery} from '../../../../../utils/hooks/is-mobile-media-query';\nimport {CalendarMonth} from './calendar-month';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface CalendarProps {\n  state: DatePickerState | DateRangePickerState;\n  visibleMonths?: 1 | 2;\n}\nexport function Calendar({state, visibleMonths = 1}: CalendarProps) {\n  const isMobile = useIsMobileMediaQuery();\n\n  if (isMobile) {\n    visibleMonths = 1;\n  }\n\n  return (\n    <>\n      {[...new Array(visibleMonths).keys()].map(index => {\n        const startDate = toCalendarDate(\n          startOfMonth(state.calendarDates[index])\n        );\n        const isFirst = index === 0;\n        const isLast = index === visibleMonths - 1;\n        return (\n          <CalendarMonth\n            key={index}\n            state={state}\n            startDate={startDate}\n            isFirst={isFirst}\n            isLast={isLast}\n          />\n        );\n      })}\n    </>\n  );\n}\n","import {\n  CalendarDate,\n  DateValue,\n  getLocalTimeZone,\n  parseAbsolute,\n} from '@internationalized/date';\nimport {Fragment, memo, useEffect, useState} from 'react';\nimport {useDateFormatter} from './use-date-formatter';\nimport {shallowEqual} from '../utils/shallow-equal';\nimport {useSettings} from '../core/settings/use-settings';\n\nexport const DateFormatPresets: Record<string, Intl.DateTimeFormatOptions> = {\n  numeric: {year: 'numeric', month: '2-digit', day: '2-digit'},\n  short: {year: 'numeric', month: 'short', day: '2-digit'},\n  long: {month: 'long', day: '2-digit', year: 'numeric'},\n};\n\ninterface FormattedDateTimeRangeProps {\n  start?: string | DateValue | Date;\n  end?: string | DateValue | Date;\n  options?: Intl.DateTimeFormatOptions;\n}\nexport const FormattedDateTimeRange = memo(\n  ({start, end, options}: FormattedDateTimeRangeProps) => {\n    const {dates} = useSettings();\n    const formatter = useDateFormatter(\n      options || DateFormatPresets[dates?.format || 'short']\n    );\n\n    const [formatted, setFormatted] = useState<string>();\n\n    useEffect(() => {\n      if (!start || !end) {\n        setFormatted('');\n        return;\n      }\n      try {\n        setFormatted(formatter.formatRange(castToDate(start), castToDate(end)));\n      } catch {}\n    }, [start, end, formatter]);\n\n    return <Fragment>{formatted}</Fragment>;\n  },\n  shallowEqual\n);\n\nfunction castToDate(date: string | DateValue | Date): Date {\n  if (date instanceof CalendarDate) {\n    return date.toDate(getLocalTimeZone());\n  }\n  if (typeof date === 'string') {\n    return parseAbsolute(date, getLocalTimeZone()).toDate();\n  }\n  return date as Date;\n}\n","import React, {ReactElement, ReactNode, useRef, useState} from 'react';\nimport {FocusScope, useFocusManager} from '@react-aria/focus';\nimport {ListItemBase, ListItemBaseProps} from './list-item-base';\nimport clsx from 'clsx';\n\ninterface Props {\n  className?: string;\n  children: ReactElement<ListItemProps> | ReactElement<ListItemProps>[];\n}\n\nexport function List({children, className}: Props) {\n  return (\n    <FocusScope>\n      <ul className={clsx('py-4 text-base sm:text-sm outline-none', className)}>\n        {children}\n      </ul>\n    </FocusScope>\n  );\n}\n\ninterface ListItemProps extends ListItemBaseProps {\n  children: ReactNode;\n  onSelected?: () => void;\n  borderRadius?: string;\n}\nexport function ListItem({\n  children,\n  onSelected,\n  borderRadius,\n  ...listItemProps\n}: ListItemProps) {\n  const focusManager = useFocusManager();\n  const isSelectable = !!onSelected;\n  const ref = useRef<HTMLDivElement>(null);\n  const [isActive, setIsActive] = useState(false);\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        focusManager.focusNext();\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        focusManager.focusPrevious();\n        break;\n      case 'Home':\n        e.preventDefault();\n        focusManager.focusFirst();\n        break;\n      case 'End':\n        e.preventDefault();\n        focusManager.focusLast();\n        break;\n      case 'Enter':\n      case 'Space':\n        e.preventDefault();\n        onSelected?.();\n        break;\n    }\n  };\n\n  return (\n    <li>\n      <ListItemBase\n        className={borderRadius || 'rounded'}\n        isActive={isActive}\n        isDisabled={listItemProps.isDisabled}\n        {...listItemProps}\n        onFocus={e => {\n          setIsActive((e.target as HTMLElement).matches(':focus-visible'));\n        }}\n        onBlur={() => {\n          setIsActive(false);\n        }}\n        onClick={() => {\n          onSelected?.();\n        }}\n        ref={ref}\n        role={isSelectable ? 'button' : undefined}\n        onKeyDown={isSelectable ? onKeyDown : undefined}\n        tabIndex={isSelectable && !listItemProps.isDisabled ? 0 : undefined}\n      >\n        {children}\n      </ListItemBase>\n    </li>\n  );\n}\n","import {List, ListItem} from '../../../../../list/list';\nimport {DateRangePresets} from './date-range-presets';\nimport {KeyboardArrowRightIcon} from '../../../../../../icons/material/KeyboardArrowRight';\nimport {Trans} from '../../../../../../i18n/trans';\nimport {DateRangeValue} from '../date-range-value';\n\ninterface DatePresetList {\n  onPresetSelected: (value: DateRangeValue) => void;\n  selectedValue?: DateRangeValue | null;\n}\nexport function DatePresetList({\n  onPresetSelected,\n  selectedValue,\n}: DatePresetList) {\n  return (\n    <List className=\"min-w-192 pt-14\">\n      {DateRangePresets.map(preset => {\n        return (\n          <ListItem\n            borderRadius=\"rounded-none\"\n            capitalizeFirst\n            key={preset.key}\n            isSelected={selectedValue?.preset === preset.key}\n            onSelected={() => {\n              const newValue = preset.getRangeValue!();\n              onPresetSelected(newValue);\n            }}\n            startIcon={preset.key === 6 && <KeyboardArrowRightIcon />}\n          >\n            <Trans {...preset.label} />\n          </ListItem>\n        );\n      })}\n    </List>\n  );\n}\n","import React, {useRef} from 'react';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {DatePickerField} from '../date-picker-field';\nimport {DateRangePickerState} from '../use-date-range-picker-state';\nimport {Calendar} from '../../calendar/calendar';\nimport {DialogFooter} from '../../../../../overlays/dialog/dialog-footer';\nimport {Button} from '../../../../../buttons/button';\nimport {useDialogContext} from '../../../../../overlays/dialog/dialog-context';\nimport {Dialog} from '../../../../../overlays/dialog/dialog';\nimport {DialogBody} from '../../../../../overlays/dialog/dialog-body';\nimport {ArrowRightAltIcon} from '../../../../../../icons/material/ArrowRightAlt';\nimport {DateSegmentList} from '../../segments/date-segment-list';\nimport {Trans} from '../../../../../../i18n/trans';\nimport {FormattedDateTimeRange} from '../../../../../../i18n/formatted-date-time-range';\nimport {DatePresetList} from './date-preset-list';\nimport {useIsMobileMediaQuery} from '../../../../../../utils/hooks/is-mobile-media-query';\n\ninterface DateRangeDialogProps {\n  state: DateRangePickerState;\n  startExpanded?: boolean;\n  showInlineDatePickerField?: boolean;\n}\nexport function DateRangeDialog({\n  state,\n  showInlineDatePickerField = false,\n}: DateRangeDialogProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const {close} = useDialogContext();\n  const initialStateRef = useRef<DateRangePickerState>(state);\n\n  const hasPlaceholder = state.isPlaceholder.start || state.isPlaceholder.end;\n\n  return (\n    <Dialog size=\"auto\">\n      <DialogBody className=\"flex\" padding=\"p-0\">\n        {!isMobile && (\n          <DatePresetList\n            selectedValue={state.selectedValue}\n            onPresetSelected={preset => {\n              state.setSelectedValue(preset);\n              if (state.closeDialogOnSelection) {\n                close(preset);\n              }\n            }}\n          />\n        )}\n        <AnimatePresence initial={false}>\n          <Calendars\n            state={state}\n            showInlineDatePickerField={showInlineDatePickerField}\n          />\n        </AnimatePresence>\n      </DialogBody>\n      <DialogFooter\n        dividerTop\n        startAction={\n          !hasPlaceholder && !isMobile ? (\n            <div className=\"text-xs\">\n              <FormattedDateTimeRange\n                start={state.selectedValue.start.toDate()}\n                end={state.selectedValue.end.toDate()}\n                options={{dateStyle: 'medium'}}\n              />\n            </div>\n          ) : undefined\n        }\n      >\n        <Button\n          variant=\"text\"\n          size=\"xs\"\n          onClick={() => {\n            state.setSelectedValue(initialStateRef.current.selectedValue);\n            state.setIsPlaceholder(initialStateRef.current.isPlaceholder);\n            close();\n          }}\n        >\n          <Trans message=\"Cancel\" />\n        </Button>\n        <Button\n          variant=\"flat\"\n          color=\"primary\"\n          size=\"xs\"\n          onClick={() => {\n            close(state.selectedValue);\n          }}\n        >\n          <Trans message=\"Select\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n\ninterface CustomRangePanelProps {\n  state: DateRangePickerState;\n  showInlineDatePickerField?: boolean;\n}\nfunction Calendars({state, showInlineDatePickerField}: CustomRangePanelProps) {\n  return (\n    <m.div\n      initial={{width: 0, overflow: 'hidden'}}\n      animate={{width: 'auto'}}\n      exit={{width: 0, overflow: 'hidden'}}\n      transition={{type: 'tween', duration: 0.125}}\n      className=\"border-l px-20 pt-10 pb-20\"\n    >\n      {showInlineDatePickerField && <InlineDatePickerField state={state} />}\n      <div className=\"flex items-start gap-36\">\n        <Calendar state={state} visibleMonths={2} />\n      </div>\n    </m.div>\n  );\n}\n\ninterface InlineDatePickerFieldProps {\n  state: DateRangePickerState;\n}\nfunction InlineDatePickerField({state}: InlineDatePickerFieldProps) {\n  const {selectedValue, setSelectedValue} = state;\n  return (\n    <DatePickerField className=\"mb-20 mt-10\">\n      <DateSegmentList\n        state={state}\n        value={selectedValue.start}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, start: newValue});\n        }}\n      />\n      <ArrowRightAltIcon className=\"block flex-shrink-0 text-muted\" size=\"md\" />\n      <DateSegmentList\n        state={state}\n        value={selectedValue.end}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, end: newValue});\n        }}\n      />\n    </DatePickerField>\n  );\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  Fragment,\n  MouseEvent,\n  useRef,\n} from 'react';\nimport {DateRangeIcon} from '../../../../../icons/material/DateRange';\nimport {DialogTrigger} from '../../../../overlays/dialog/dialog-trigger';\nimport {DatePickerField, DatePickerFieldProps} from './date-picker-field';\nimport {useDateRangePickerState} from './use-date-range-picker-state';\nimport {ArrowRightAltIcon} from '../../../../../icons/material/ArrowRightAlt';\nimport {DatePickerValueProps} from '../date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-value';\nimport {DateSegmentList} from '../segments/date-segment-list';\nimport {DateRangeDialog} from './dialog/date-range-dialog';\nimport {useIsMobileMediaQuery} from '../../../../../utils/hooks/is-mobile-media-query';\n\nexport interface DateRangePickerProps\n  extends DatePickerValueProps<Partial<DateRangeValue>>,\n    Omit<DatePickerFieldProps, 'children'> {\n  onDialogClose?: (value?: DateRangeValue) => void;\n}\nexport function DateRangePicker({\n  onDialogClose,\n  ...props\n}: DateRangePickerProps) {\n  const state = useDateRangePickerState(props);\n  const inputRef = useRef<HTMLDivElement>(null);\n  const isMobile = useIsMobileMediaQuery();\n  const hideCalendarIcon = isMobile && props.granularity !== 'day';\n\n  const dialog = (\n    <DialogTrigger\n      offset={8}\n      placement=\"bottom-start\"\n      isOpen={state.calendarIsOpen}\n      onOpenChange={state.setCalendarIsOpen}\n      type=\"popover\"\n      triggerRef={inputRef}\n      returnFocusToTrigger={false}\n      moveFocusToDialog={false}\n      onClose={onDialogClose}\n    >\n      <DateRangeDialog state={state} startExpanded />\n    </DialogTrigger>\n  );\n\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    },\n  };\n\n  const value = state.selectedValue;\n  const onChange = state.setSelectedValue;\n\n  return (\n    <Fragment>\n      <DatePickerField\n        ref={inputRef}\n        wrapperProps={openOnClick}\n        endAdornment={!hideCalendarIcon ? <DateRangeIcon /> : undefined}\n        {...props}\n      >\n        <DateSegmentList\n          isPlaceholder={state.isPlaceholder?.start}\n          state={state}\n          segmentProps={openOnClick}\n          value={value.start}\n          onChange={newValue => {\n            onChange({...value, start: newValue});\n          }}\n        />\n        <ArrowRightAltIcon\n          className=\"block flex-shrink-0 text-muted\"\n          size=\"md\"\n        />\n        <DateSegmentList\n          isPlaceholder={state.isPlaceholder?.end}\n          state={state}\n          segmentProps={openOnClick}\n          value={value.end}\n          onChange={newValue => {\n            onChange({...value, end: newValue});\n          }}\n        />\n      </DatePickerField>\n      {dialog}\n    </Fragment>\n  );\n}\n\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\n  return ['hour', 'minute', 'dayPeriod'].includes(\n    (e.currentTarget as HTMLElement).ariaLabel || ''\n  );\n}\n","import {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\nimport {DateRangeValue} from './date-range-value';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport React from 'react';\nimport {DateRangePicker, DateRangePickerProps} from './date-range-picker';\n\nexport interface AbsoluteDateRange {\n  start?: string;\n  end?: string;\n  preset?: number;\n}\n\ninterface FormDateRange {\n  start?: string | ZonedDateTime;\n  end?: string | ZonedDateTime;\n  preset?: number;\n}\n\ninterface FormDateRangePickerProps extends DateRangePickerProps {\n  name: string;\n}\nexport function FormDateRangePicker(props: FormDateRangePickerProps) {\n  const {\n    field: {onChange, onBlur, value, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<DateRangePickerProps> = {\n    onChange: e => {\n      onChange(dateRangeToAbsoluteRange(e));\n    },\n    onBlur,\n    value: absoluteRangeToDateRange(value),\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref,\n  };\n\n  return <DateRangePicker {...mergeProps(formProps, props)} />;\n}\n\nexport function absoluteRangeToDateRange({\n  start,\n  end,\n  preset,\n}: FormDateRange = {}) {\n  const dateRange: Partial<DateRangeValue> = {preset};\n  if (start) {\n    dateRange.start =\n      typeof start === 'string' ? parseAbsoluteToLocal(start) : start;\n  }\n  if (end) {\n    dateRange.end = typeof end === 'string' ? parseAbsoluteToLocal(end) : end;\n  }\n  return dateRange;\n}\n\nexport function dateRangeToAbsoluteRange({\n  start,\n  end,\n  preset,\n}: Partial<DateRangeValue> = {}) {\n  const absoluteRange: AbsoluteDateRange = {\n    preset,\n  };\n  if (start) {\n    absoluteRange.start = start.toAbsoluteString();\n  }\n  if (end) {\n    absoluteRange.end = end.toAbsoluteString();\n  }\n  return absoluteRange;\n}\n","import {\n  BackendFilter,\n  BackendFilterOptions,\n  FilterControlType,\n  FilterOperator,\n} from './backend-filter';\nimport {\n  DateRangePreset,\n  DateRangePresets,\n} from '../../ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {message} from '../../i18n/message';\nimport {dateRangeToAbsoluteRange} from '../../ui/forms/input-field/date/date-range-picker/form-date-range-picker';\n\nexport class TimestampFilter extends BackendFilter {\n  type = FilterControlType.DatePicker;\n  defaultOperator = FilterOperator.between;\n  constructor(options: Partial<BackendFilterOptions>) {\n    if (!options.defaultValue) {\n      options.defaultValue = dateRangeToAbsoluteRange(\n        (DateRangePresets[0] as Required<DateRangePreset>).getRangeValue()\n      );\n    }\n    super(options);\n  }\n}\n\nexport class CreatedAtFilter extends TimestampFilter {\n  key = 'created_at';\n  label = message('Date created');\n}\n\nexport class UpdatedAtFilter extends TimestampFilter {\n  key = 'updated_at';\n  label = message('Last updated');\n}\n","import clsx from 'clsx';\nimport {ComponentPropsWithoutRef, forwardRef} from 'react';\n\ntype Size = 'xs' | 'sm' | 'md';\n\ninterface Props extends ComponentPropsWithoutRef<'img'> {\n  className?: string;\n  src?: string;\n  circle?: boolean;\n  size?: Size;\n}\n\nexport const Avatar = forwardRef<HTMLImageElement, Props>(\n  ({className, circle, size = 'md', src, ...domProps}, ref) => {\n    return (\n      <img\n        ref={ref}\n        src={src}\n        alt=\"\"\n        className={clsx(\n          className,\n          getSizeClassName(size),\n          circle ? 'rounded-full' : 'rounded'\n        )}\n        {...domProps}\n      />\n    );\n  }\n);\n\nfunction getSizeClassName(size: Size) {\n  switch (size) {\n    case 'xs':\n      return 'w-18 h-18';\n    case 'sm':\n      return 'w-24 h-24';\n    case 'md':\n      return 'w-32 h-32';\n    // allow overriding with custom classNames\n    default:\n      return size;\n  }\n}\n","export const BackendFiltersUrlKey = 'filters';\n","import {FilterListValue} from './encode-backend-filters';\n\nexport function decodeBackendFilters(\n  encodedFilters: string | null\n): FilterListValue[] {\n  if (!encodedFilters) return [];\n  let filtersFromQuery: FilterListValue[] = [];\n  try {\n    filtersFromQuery = JSON.parse(atob(decodeURIComponent(encodedFilters)));\n    filtersFromQuery.map(filterValue => {\n      // set value key as value so selects work properly\n      if (filterValue.valueKey) {\n        filterValue.value = filterValue.valueKey;\n      }\n      return filterValue;\n    });\n  } catch (e) {\n    //\n  }\n  return filtersFromQuery;\n}\n","import {Key} from 'react';\nimport {BackendFilter} from '../backend-filter';\n\nexport interface FilterListValue {\n  key: Key;\n  value: BackendFilter['defaultValue'];\n  operator?: BackendFilter['defaultOperator'];\n  valueKey?: Key;\n  isInactive?: boolean;\n}\n\nexport function encodeBackendFilters(\n  filterValue: FilterListValue[] | null,\n  filters?: BackendFilter[]\n): string {\n  if (!filterValue) return '';\n\n  // prepare values for backend\n  filterValue = !filters\n    ? filterValue\n    : filterValue\n        .filter(item => item.value !== '')\n        .map(item => {\n          return transformValue(item, filters);\n        });\n\n  // remove all placeholder filters\n  filterValue = filterValue.filter(fm => !fm.isInactive);\n\n  if (!filterValue.length) {\n    return '';\n  }\n\n  return encodeURIComponent(btoa(JSON.stringify(filterValue)));\n}\n\nfunction transformValue(\n  filterValue: FilterListValue,\n  filters: BackendFilter[]\n) {\n  const filterConfig = filters.find(f => f.key === filterValue.key);\n  // select components will use a key always, as we can't use objects as\n  // value, map over select options and replace key with actual value\n  if (filterConfig?.type === 'select') {\n    const option = (filterConfig.options || []).find(\n      o => o.key === filterValue.value\n    );\n    return {...filterValue, value: option?.value, valueKey: option?.key};\n  }\n  return filterValue;\n}\n","import {useNavigate, useSearchParams} from 'react-router-dom';\nimport {Key, useCallback, useMemo} from 'react';\nimport {BackendFilter} from './backend-filter';\nimport {BackendFiltersUrlKey} from './backend-filters-url-key';\nimport {decodeBackendFilters} from './utils/decode-backend-filters';\nimport {\n  encodeBackendFilters,\n  FilterListValue,\n} from './utils/encode-backend-filters';\n\nexport function useBackendFilterUrlParams(\n  filters?: BackendFilter[],\n  pinnedFilters?: string[]\n) {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n\n  const encodedFilters = searchParams.get(BackendFiltersUrlKey);\n\n  const decodedFilters: FilterListValue[] = useMemo(() => {\n    if (!filters) return [];\n    const decoded = decodeBackendFilters(encodedFilters);\n\n    // if filter is pinned, and it is not applied yet, add a placeholder\n    (pinnedFilters || []).forEach(key => {\n      if (!decoded.find(f => f.key === key)) {\n        const config = filters.find(f => f.key === key)!;\n        decoded.push({\n          key,\n          value: config.defaultValue,\n          operator: config.defaultOperator,\n          isInactive: true,\n        });\n      }\n    });\n\n    // preserve original filter order from configuration\n    decoded.sort(\n      (a, b) =>\n        filters.findIndex(f => f.key === a.key) -\n        filters.findIndex(f => f.key === b.key)\n    );\n\n    return decoded;\n  }, [encodedFilters, pinnedFilters, filters]);\n\n  const getDecodedWithoutKeys = useCallback(\n    (values: (FilterListValue | Key)[]) => {\n      const newFilters = [...decodedFilters];\n      values.forEach(value => {\n        const key = typeof value === 'object' ? value.key : value;\n        const index = newFilters.findIndex(f => f.key === key);\n        if (index > -1) {\n          newFilters.splice(index, 1);\n        }\n      });\n      return newFilters;\n    },\n    [decodedFilters]\n  );\n\n  const replaceAll = useCallback(\n    (filterValues: FilterListValue[]) => {\n      const encodedFilters = encodeBackendFilters(filterValues, filters);\n      if (encodedFilters) {\n        searchParams.set(BackendFiltersUrlKey, encodedFilters);\n      } else {\n        searchParams.delete(BackendFiltersUrlKey);\n      }\n      navigate({search: `?${searchParams}`}, {replace: true});\n    },\n    [filters, navigate, searchParams]\n  );\n\n  const add = useCallback(\n    (filterValues: FilterListValue[]) => {\n      const existing = getDecodedWithoutKeys(filterValues);\n      const decodedFilters = [...existing, ...filterValues];\n      replaceAll(decodedFilters);\n    },\n    [getDecodedWithoutKeys, replaceAll]\n  );\n\n  const remove = useCallback(\n    (key: Key) => replaceAll(getDecodedWithoutKeys([key])),\n    [getDecodedWithoutKeys, replaceAll]\n  );\n\n  return {\n    add,\n    remove,\n    replaceAll,\n    decodedFilters,\n    encodedFilters,\n  };\n}\n","import React, {CSSProperties, ReactNode, useId} from 'react';\nimport clsx from 'clsx';\nimport {InputSize} from '../forms/input-field/input-size';\nimport {getInputFieldClassNames} from '../forms/input-field/get-input-field-class-names';\nimport {useNumberFormatter} from '../../i18n/use-number-formatter';\nimport {clamp} from '../../utils/number/clamp';\n\nexport interface ProgressBarBaseProps {\n  value?: number;\n  minValue?: number;\n  maxValue?: number;\n  className?: string;\n  showValueLabel?: boolean;\n  size?: 'xs' | 'sm' | 'md';\n  labelPosition?: 'top' | 'bottom';\n  isIndeterminate?: boolean;\n  label?: ReactNode;\n  formatOptions?: Intl.NumberFormatOptions;\n  role?: string;\n}\n\nexport function ProgressBarBase(props: ProgressBarBaseProps) {\n  let {\n    value = 0,\n    minValue = 0,\n    maxValue = 100,\n    size = 'md',\n    label,\n    showValueLabel = !!label,\n    isIndeterminate = false,\n    labelPosition = 'top',\n    className,\n    role,\n    formatOptions = {\n      style: 'percent',\n    },\n  } = props;\n\n  const id = useId();\n\n  value = clamp(value, minValue, maxValue);\n\n  const percentage = (value - minValue) / (maxValue - minValue);\n  const formatter = useNumberFormatter(formatOptions);\n\n  let valueLabel = '';\n  if (!isIndeterminate && showValueLabel) {\n    const valueToFormat =\n      formatOptions.style === 'percent' ? percentage : value;\n    valueLabel = formatter.format(valueToFormat);\n  }\n\n  const barStyle: CSSProperties = {};\n  if (!isIndeterminate) {\n    barStyle.width = `${Math.round(percentage * 100)}%`;\n  }\n\n  const barSize = getSize(size);\n  const style = getInputFieldClassNames({size});\n\n  const labelEl = (label || valueLabel) && (\n    <div className={clsx('flex gap-10 justify-between my-4', style.label)}>\n      {label && <span id={id}>{label}</span>}\n      {valueLabel && <div>{valueLabel}</div>}\n    </div>\n  );\n\n  return (\n    <div\n      aria-valuenow={isIndeterminate ? undefined : value}\n      aria-valuemin={minValue}\n      aria-valuemax={maxValue}\n      aria-valuetext={isIndeterminate ? undefined : (valueLabel as string)}\n      aria-labelledby={label ? id : undefined}\n      role={role || 'progressbar'}\n      className={clsx(className, 'min-w-42')}\n    >\n      {labelPosition === 'top' && labelEl}\n      <div className={`${barSize} rounded bg-primary-light overflow-hidden`}>\n        <div\n          className={clsx(\n            'fill h-full transition-width duration-200 rounded-l bg-primary',\n            isIndeterminate && 'progress-bar-indeterminate-animate'\n          )}\n          style={barStyle}\n        />\n      </div>\n      {labelPosition === 'bottom' && labelEl}\n    </div>\n  );\n}\n\nfunction getSize(size: InputSize) {\n  switch (size) {\n    case 'sm':\n      return 'h-6';\n    case 'xs':\n      return 'h-4';\n    default:\n      return 'h-8';\n  }\n}\n","import clsx from 'clsx';\nimport type {ColumnConfig} from '../../datatable/column-config';\n\ninterface CellStyleProps {\n  isFirst?: boolean;\n  isLast?: boolean;\n  width?: string;\n  isRowHeader?: boolean;\n  column?: ColumnConfig<any>;\n}\nexport function cellStyle({\n  isFirst,\n  isLast,\n  isRowHeader,\n  width,\n  column,\n}: CellStyleProps): string {\n  // make first column twice as wide as others by default, as it's a name or title usually\n  const defaultWidth = isRowHeader ? 'col-w-2' : 'col-w-1';\n  const finalWidth = column?.width || width || defaultWidth;\n  const userPadding = column?.padding;\n\n  let justify = 'text-left';\n  if (column?.align === 'center') {\n    justify = 'text-center';\n  } else if (column?.align === 'end') {\n    justify = 'text-right';\n  }\n\n  return clsx(\n    'overflow-hidden whitespace-nowrap h-48 outline-none focus-visible:outline focus-visible:outline-offset-2 rounded',\n    justify,\n    !userPadding && isFirst && 'pl-24 pr-16',\n    !userPadding && isLast && 'pr-24 pl-16',\n    !isFirst && !isLast && !userPadding && 'px-16',\n    userPadding,\n    finalWidth\n  );\n}\n\ninterface RowStyleProps {\n  isHeader?: boolean;\n  isSelected?: boolean;\n  isDisabled?: boolean;\n}\nexport function rowStyle({isHeader, isSelected}: RowStyleProps): string {\n  return clsx(\n    'break-inside-avoid border-b outline-none',\n    isSelected &&\n      'bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus',\n    !isSelected && !isHeader && 'focus-visible:bg-focus hover:bg-hover'\n  );\n}\n","import {isMac} from '@react-aria/utils';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n}\n\nexport function isCtrlKeyPressed(e: Event) {\n  if (isMac()) {\n    return e.metaKey;\n  }\n\n  return e.ctrlKey;\n}\n","import React, {KeyboardEventHandler} from 'react';\nimport {getFocusableTreeWalker} from '@react-aria/focus';\nimport {focusWithoutScrolling} from '@react-aria/utils';\nimport {isCtrlKeyPressed} from '../../utils/keybinds/is-ctrl-key-pressed';\n\ninterface Props {\n  cellCount: number;\n  rowCount: number;\n}\nexport function useGridNavigation(props: Props) {\n  const {cellCount, rowCount} = props;\n  const onKeyDown: KeyboardEventHandler<HTMLElement> = e => {\n    switch (e.key) {\n      case 'ArrowLeft':\n        focusSiblingCell(e, {cell: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowRight':\n        focusSiblingCell(e, {cell: {op: 'increment'}}, props);\n        break;\n      case 'ArrowUp':\n        focusSiblingCell(e, {row: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowDown':\n        focusSiblingCell(e, {row: {op: 'increment'}}, props);\n        break;\n      case 'PageUp':\n        focusSiblingCell(e, {row: {op: 'decrement', count: 5}}, props);\n        break;\n      case 'PageDown':\n        focusSiblingCell(e, {row: {op: 'increment', count: 5}}, props);\n        break;\n      case 'Tab':\n        focusFirstElementAfterGrid(e);\n        break;\n      case 'Home':\n        if (isCtrlKeyPressed(e)) {\n          // move to first cell in first row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'decrement', count: rowCount},\n              cell: {op: 'decrement', count: cellCount},\n            },\n            props\n          );\n        } else {\n          // move to first cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'decrement', count: cellCount}},\n            props\n          );\n        }\n        break;\n      case 'End':\n        if (isCtrlKeyPressed(e)) {\n          // move to last cell in last row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'increment', count: rowCount},\n              cell: {op: 'increment', count: cellCount},\n            },\n            props\n          );\n        } else {\n          // move to last cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'increment', count: cellCount}},\n            props\n          );\n        }\n        break;\n    }\n  };\n\n  return {onKeyDown};\n}\n\ninterface Operations {\n  cell?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n  row?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n}\nfunction focusSiblingCell(\n  e: React.KeyboardEvent,\n  operations: Operations,\n  {cellCount, rowCount}: Props\n) {\n  if (document.activeElement?.tagName === 'input') return;\n  e.preventDefault();\n  const grid = e.currentTarget as HTMLElement;\n\n  // focused element might be inside the cell and not the cell itself\n  const currentCell = (e.target as HTMLElement).closest('[aria-colindex]');\n  if (!currentCell || !grid) return;\n\n  const row = currentCell.closest('[aria-rowindex]');\n  if (!row) return;\n\n  // grab row and cell index from aria attributes\n  let rowIndex = parseInt(row.getAttribute('aria-rowindex') as string);\n  let cellIndex = parseInt(currentCell.getAttribute('aria-colindex') as string);\n  if (Number.isNaN(rowIndex) || Number.isNaN(cellIndex)) return;\n\n  // adjust row index for next cell selector\n  const rowOpCount = operations.row?.count ?? 1;\n  if (operations.row?.op === 'increment') {\n    rowIndex = Math.min(rowCount, rowIndex + rowOpCount);\n  } else if (operations.row?.op === 'decrement') {\n    rowIndex = Math.max(1, rowIndex - rowOpCount);\n  }\n\n  // adjust cell index for next cell selector\n  const cellOpCount = operations.cell?.count ?? 1;\n  if (operations.cell?.op === 'increment') {\n    cellIndex = Math.min(cellCount, cellIndex + cellOpCount);\n  } else if (operations.cell?.op === 'decrement') {\n    cellIndex = Math.max(1, cellIndex - cellOpCount);\n  }\n\n  // find the next cell that should be focused\n  const nextCell = grid.querySelector(\n    `[aria-rowindex=\"${rowIndex}\"] [aria-colindex=\"${cellIndex}\"]`\n  ) as HTMLElement | undefined;\n  if (!nextCell) return;\n\n  // find any focusable elements inside the cell\n  const walker = getFocusableTreeWalker(nextCell);\n  const nextFocusableElement = (walker.nextNode() || nextCell) as HTMLElement;\n\n  // adjust tab index on current and next cells and focus either next cell or first focusable element inside that cell\n  currentCell.setAttribute('tabindex', '-1');\n  nextFocusableElement.setAttribute('tabindex', '0');\n  nextFocusableElement.focus();\n}\n\n// grid is treated as a single tab stop, focus first element after grid, instead of moving focus withing grid on tab press\nfunction focusFirstElementAfterGrid(e: React.KeyboardEvent) {\n  const grid = e.currentTarget as HTMLElement;\n  if (e.shiftKey) {\n    grid.focus();\n  } else {\n    const walker = getFocusableTreeWalker(grid, {tabbable: true});\n    let next: HTMLElement;\n    let last: HTMLElement;\n    do {\n      last = walker.lastChild() as HTMLElement;\n      if (last) {\n        next = last;\n      }\n    } while (last);\n\n    // @ts-ignore\n    if (next && !next.contains(document.activeElement)) {\n      focusWithoutScrolling(next);\n    }\n  }\n}\n","import {createContext} from 'react';\nimport type {SortDescriptor} from './types/sort-descriptor';\nimport type {TableProps} from './table';\nimport type {ColumnConfig} from '../../datatable/column-config';\nimport type {TableDataItem} from './types/table-data-item';\n\nexport type TableSelectionStyle = 'checkbox' | 'highlight';\n\nexport interface TableContextValue<T extends TableDataItem = TableDataItem> {\n  selectedRows: (string | number)[];\n  onSelectionChange: (keys: (string | number)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSelection?: boolean;\n  selectionStyle: TableSelectionStyle;\n  data: T[];\n  columns: ColumnConfig<T>[];\n  toggleRow: (item: T) => void;\n  selectRow: (item: T, merge?: boolean) => void;\n  onAction: TableProps<T>['onAction'];\n}\nexport const TableContext = createContext<TableContextValue>(\n  null!\n);\n","import {useContext} from 'react';\nimport {TableContext} from './table-context';\nimport {cellStyle} from './table-style';\nimport {Checkbox} from '../forms/toggle/checkbox';\nimport {TableDataItem} from './types/table-data-item';\nimport {useIsMobileMediaQuery} from '../../utils/hooks/is-mobile-media-query';\n\ninterface CheckboxCellProps {\n  item: TableDataItem;\n}\nexport function CheckboxCell({item}: CheckboxCellProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const {selectedRows, enableSelection, toggleRow, selectionStyle} =\n    useContext(TableContext);\n\n  if (!enableSelection || selectionStyle === 'highlight' || isMobile)\n    return null;\n\n  return (\n    <td\n      className={cellStyle({\n        isFirst: true,\n        width: 'w-64 flex-shrink-0 flex-grow-0',\n      })}\n    >\n      <Checkbox\n        checked={selectedRows.includes(item.id)}\n        onChange={() => {\n          toggleRow(item);\n        }}\n      />\n    </td>\n  );\n}\n","import {useContext} from 'react';\nimport {cellStyle} from './table-style';\nimport {TableContext} from './table-context';\nimport {TableDataItem} from './types/table-data-item';\n\ninterface TableCellProps {\n  index: number;\n  item: TableDataItem;\n  id?: string;\n}\nexport function TableCell({index, item, id}: TableCellProps) {\n  const {enableSelection, columns, selectedRows} = useContext(TableContext);\n  const isFirst = enableSelection ? false : index === 0;\n  const isLast = index === columns.length - 1;\n  const column = columns[index];\n\n  return (\n    <td id={id} tabIndex={-1} className={cellStyle({isFirst, isLast, column})}>\n      {column.body(item, selectedRows)}\n    </td>\n  );\n}\n","import React, {HTMLAttributes, useRef} from 'react';\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\nimport {useGlobalListeners} from '@react-aria/utils';\n\ninterface PointerState {\n  lastPosition: {x: number; y: number};\n  id?: number;\n  started: boolean;\n  el?: HTMLElement;\n  originalTouchAction?: string;\n  originalUserSelect?: string;\n  longPressTimer?: any;\n  longPressTriggered?: boolean;\n}\n\ninterface UsePointerEventsReturn {\n  domProps: HTMLAttributes<HTMLElement>;\n}\n\nexport interface UsePointerEventsProps {\n  onMoveStart?: (e: PointerEvent, el: HTMLElement) => false | void;\n  onMove?: (e: PointerEvent, deltaX: number, deltaY: number) => void;\n  onMoveEnd?: (e: PointerEvent) => void;\n  onPointerDown?: (e: React.PointerEvent) => void | false;\n  onPointerUp?: (e: PointerEvent, el: HTMLElement) => void;\n  onPress?: (e: PointerEvent, el: HTMLElement) => void;\n  onLongPress?: (e: PointerEvent | React.PointerEvent, el: HTMLElement) => void;\n  preventDefault?: boolean;\n  stopPropagation?: boolean;\n  minimumMovement?: number;\n}\nexport function usePointerEvents({\n  onMoveStart,\n  onMove,\n  onMoveEnd,\n  minimumMovement = 0,\n  preventDefault,\n  stopPropagation = true,\n  onPress,\n  onLongPress,\n  ...props\n}: UsePointerEventsProps): UsePointerEventsReturn {\n  const stateRef = useRef<PointerState>({\n    lastPosition: {x: 0, y: 0},\n    started: false,\n    longPressTriggered: false,\n  });\n  const state = stateRef.current;\n\n  const {addGlobalListener, removeGlobalListener} = useGlobalListeners();\n\n  const start = (e: PointerEvent) => {\n    if (!state.el) return;\n    const result = onMoveStart?.(e, state.el);\n\n    // allow user to cancel interaction\n    if (result === false) return;\n\n    state.originalTouchAction = state.el.style.touchAction;\n    state.el.style.touchAction = 'none';\n    state.originalUserSelect = document.documentElement.style.userSelect;\n    document.documentElement.style.userSelect = 'none';\n    state.started = true;\n  };\n\n  const onPointerDown = (e: React.PointerEvent) => {\n    if (e.button === 0 && state.id == null) {\n      state.started = false;\n\n      const result = props.onPointerDown?.(e);\n      if (result === false) return;\n\n      if (stopPropagation) {\n        e.stopPropagation();\n      }\n      if (preventDefault) {\n        e.preventDefault();\n      }\n      state.id = e.pointerId;\n      state.el = e.currentTarget as HTMLElement;\n      state.lastPosition = {x: e.clientX, y: e.clientY};\n\n      // use global listeners, so we don't have to capture pointer,\n      // which would prevent click events on child nodes\n\n      if (onLongPress) {\n        state.longPressTimer = setTimeout(() => {\n          onLongPress(e, state.el!);\n          state.longPressTriggered = true;\n        }, 400);\n      }\n\n      if (onMoveStart || onMove) {\n        addGlobalListener(window, 'pointermove', onPointerMove, false);\n      }\n      addGlobalListener(window, 'pointerup', onPointerUp, false);\n      addGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  const onPointerMove = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      const deltaX = e.clientX - state.lastPosition.x;\n      const deltaY = e.clientY - state.lastPosition.y;\n\n      if (\n        (Math.abs(deltaX) >= minimumMovement ||\n          Math.abs(deltaY) >= minimumMovement) &&\n        !state.started\n      ) {\n        start(e);\n      }\n\n      if (state.started) {\n        onMove?.(e, deltaX, deltaY);\n        state.lastPosition = {x: e.clientX, y: e.clientY};\n      }\n    }\n  };\n\n  const onPointerUp = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      // cancel long press timer, if exists\n      if (state.longPressTimer) {\n        clearTimeout(state.longPressTimer);\n      }\n\n      const longPressTriggered = state.longPressTriggered;\n      state.longPressTriggered = false;\n\n      // only call onMoveEnd if we actually started moving\n      if (state.started) {\n        onMoveEnd?.(e);\n      }\n\n      if (state.el) {\n        // handle press only if event was not cancelled (via touch scroll on mobile for example)\n        if (e.type !== 'pointercancel') {\n          props.onPointerUp?.(e, state.el);\n\n          // only call onPress if pointer did not leave onPointerDown element\n          if (e.target && state.el.contains(e.target as HTMLElement)) {\n            // trigger either onPress or onLongPress\n            if (longPressTriggered) {\n              onLongPress?.(e, state.el);\n            } else {\n              onPress?.(e, state.el);\n            }\n          }\n        }\n\n        document.documentElement.style.userSelect =\n          state.originalUserSelect || '';\n        state.el.style.touchAction = state.originalTouchAction || '';\n      }\n      state.id = undefined;\n      state.started = false;\n      removeGlobalListener(window, 'pointermove', onPointerMove, false);\n      removeGlobalListener(window, 'pointerup', onPointerUp, false);\n      removeGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  return {\n    domProps: {\n      onPointerDown: createEventHandler(onPointerDown),\n    },\n  };\n}\n","import {isCtrlKeyPressed} from './is-ctrl-key-pressed';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n  shiftKey: boolean;\n}\n\nexport function isCtrlOrShiftPressed(e: Event) {\n  return e.shiftKey || isCtrlKeyPressed(e);\n}\n","import {useMediaQuery} from './use-media-query';\n\nexport function useIsTouchDevice() {\n  return useMediaQuery('((hover: none) and (pointer: coarse))');\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  HTMLAttributes,\n  JSXElementConstructor,\n  KeyboardEventHandler,\n  MouseEventHandler,\n  useContext\n} from 'react';\nimport {rowStyle} from './table-style';\nimport {TableContext} from './table-context';\nimport {CheckboxCell} from './checkbox-cell';\nimport {TableCell} from './table-cell';\nimport {TableDataItem} from './types/table-data-item';\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\nimport {usePointerEvents} from '../interactions/use-pointer-events';\nimport {isCtrlOrShiftPressed} from '../../utils/keybinds/is-ctrl-or-shift-pressed';\nimport {useIsTouchDevice} from '../../utils/hooks/is-touch-device';\n\nconst interactableElements = ['button', 'a', 'input', 'select', 'textarea'];\n\nexport interface RowElementProps<T = TableDataItem>\n  extends ComponentPropsWithoutRef<'tr'> {\n  item: T;\n}\n\ninterface TableRowProps {\n  item: TableDataItem;\n  index: number;\n  renderAs?: JSXElementConstructor<RowElementProps>;\n}\nexport function TableRow({item, index, renderAs}: TableRowProps) {\n  const isTouchDevice = useIsTouchDevice();\n  const {\n    selectedRows,\n    columns,\n    toggleRow,\n    selectRow,\n    onAction,\n    enableSelection,\n    selectionStyle,\n  } = useContext(TableContext);\n  const isRowSelected = selectedRows.includes(item.id);\n\n  const clickedOnInteractable = (e: React.MouseEvent | PointerEvent) => {\n    return (e.target as HTMLElement).closest(interactableElements.join(','));\n  };\n\n  const doubleClickHandler: MouseEventHandler<HTMLDivElement> = e => {\n    if (\n      selectionStyle === 'highlight' &&\n      onAction &&\n      !isTouchDevice &&\n      !clickedOnInteractable(e)\n    ) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  const anyRowsSelected = !!selectedRows.length;\n\n  const handleRowTap = (e: PointerEvent) => {\n    if (clickedOnInteractable(e)) return;\n    if (selectionStyle == 'checkbox') {\n      if (enableSelection && (anyRowsSelected || !onAction)) {\n        toggleRow(item);\n      } else if (onAction) {\n        onAction(item, index);\n      }\n    } else if (selectionStyle === 'highlight') {\n      if (isTouchDevice) {\n        if (enableSelection && anyRowsSelected) {\n          toggleRow(item);\n        } else {\n          onAction?.(item, index);\n        }\n      } else if (enableSelection) {\n        selectRow(item, isCtrlOrShiftPressed(e));\n      }\n    }\n  };\n\n  const {domProps} = usePointerEvents({\n    onPress: handleRowTap,\n    onLongPress:\n      isTouchDevice && enableSelection ? () => toggleRow(item) : undefined,\n  });\n\n  const keyboardHandler: KeyboardEventHandler = e => {\n    if (enableSelection && e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      if (selectionStyle === 'checkbox') {\n        toggleRow(item);\n      } else {\n        selectRow(item);\n      }\n    } else if (e.key === 'Enter' && !selectedRows.length && onAction) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  // prevent context menu on mobile\n  const contextMenuHandler: MouseEventHandler = e => {\n    if (isTouchDevice) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  const tableRowProps: HTMLAttributes<HTMLDivElement> = {\n    'aria-selected': isRowSelected,\n    className: rowStyle({isSelected: isRowSelected}),\n    onDoubleClick: createEventHandler(doubleClickHandler),\n    onKeyDown: createEventHandler(keyboardHandler),\n    onContextMenu: createEventHandler(contextMenuHandler),\n    ...domProps,\n  };\n\n  const RowElement = renderAs || 'tr';\n\n  return (\n    <RowElement item={item} {...tableRowProps}>\n      <CheckboxCell item={item} />\n      {columns.map((column, cellIndex) => (\n        <TableCell\n          index={cellIndex}\n          item={item}\n          key={`${item.id}-${column.key}`}\n        />\n      ))}\n    </RowElement>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowDownwardIcon = createSvgIcon(\n  <path d=\"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\" />\n, 'ArrowDownwardOutlined');\n","import {useContext, useState} from 'react';\nimport clsx from 'clsx';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {TableContext} from './table-context';\nimport {cellStyle} from './table-style';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {ArrowDownwardIcon} from '../../icons/material/ArrowDownward';\n\ninterface HeaderCellProps {\n  index: number;\n}\nexport function HeaderCell({index}: HeaderCellProps) {\n  const {enableSelection, columns, sortDescriptor, onSortChange} =\n    useContext(TableContext);\n  const isFirst = enableSelection ? false : index === 0;\n  const isLast = index === columns.length - 1;\n  const column = columns[index];\n\n  const style = cellStyle({isFirst, isLast, column});\n\n  const [isHovered, setIsHovered] = useState(false);\n\n  const sortingKey = column.sortingKey || column.key;\n  const allowSorting = column.allowsSorting;\n  const {orderBy, orderDir} = sortDescriptor || {};\n\n  const sortActive = allowSorting && orderBy === sortingKey;\n\n  let ariaSort: 'ascending' | 'descending' | 'none' | undefined;\n  if (sortActive && orderDir === 'asc') {\n    ariaSort = 'ascending';\n  } else if (sortActive && orderDir === 'desc') {\n    ariaSort = 'descending';\n  } else if (allowSorting) {\n    ariaSort = 'none';\n  }\n\n  const toggleSorting = () => {\n    if (!allowSorting) return;\n\n    let newSort: SortDescriptor;\n\n    // if this col was sorted desc, go to asc\n    if (sortActive && orderDir === 'desc') {\n      newSort = {orderDir: 'asc', orderBy: sortingKey};\n\n      // if this col was sorted asc, clear sort\n    } else if (sortActive && orderDir === 'asc') {\n      newSort = {orderBy: undefined, orderDir: undefined};\n\n      // if sort was on another col, or no sort was applied yet, start from desc\n    } else {\n      newSort = {orderDir: 'desc', orderBy: sortingKey};\n    }\n\n    onSortChange?.(newSort);\n  };\n\n  const sortVisible = sortActive || isHovered;\n  const sortVariants = {\n    visible: {opacity: 1, y: 0},\n    hidden: {opacity: 0, y: '-25%'},\n  };\n\n  return (\n    <th\n      onMouseEnter={() => {\n        setIsHovered(true);\n      }}\n      onMouseLeave={() => {\n        setIsHovered(false);\n      }}\n      onKeyDown={e => {\n        if (e.key === ' ' || e.key === 'Enter') {\n          e.preventDefault();\n          toggleSorting();\n        }\n      }}\n      onClick={toggleSorting}\n      tabIndex={-1}\n      aria-sort={ariaSort}\n      className={clsx(\n        style,\n        'text-muted font-medium text-xs',\n        allowSorting && 'cursor-pointer'\n      )}\n    >\n      {column.hideHeader ? (\n        <div className=\"sr-only\">{column.header()}</div>\n      ) : (\n        column.header()\n      )}\n      <AnimatePresence>\n        {allowSorting && (\n          <m.span\n            variants={sortVariants}\n            animate={sortVisible ? 'visible' : 'hidden'}\n            initial={false}\n            transition={{type: 'tween'}}\n            key=\"sort-icon\"\n            className=\"inline-block ml-6 -mt-2\"\n          >\n            <ArrowDownwardIcon\n              size=\"xs\"\n              className={clsx(\n                'text-muted',\n                orderDir === 'asc' &&\n                  orderBy === sortingKey &&\n                  'rotate-180 transition-transform'\n              )}\n            />\n          </m.span>\n        )}\n      </AnimatePresence>\n    </th>\n  );\n}\n","import {useContext} from 'react';\nimport {TableContext} from './table-context';\nimport {cellStyle} from './table-style';\nimport {Checkbox} from '../forms/toggle/checkbox';\nimport {useTrans} from '../../i18n/use-trans';\nimport {useIsMobileMediaQuery} from '../../utils/hooks/is-mobile-media-query';\n\nexport function SelectAllCell() {\n  const isMobile = useIsMobileMediaQuery();\n  const {trans} = useTrans();\n  const {\n    data,\n    selectedRows,\n    onSelectionChange,\n    enableSelection,\n    selectionStyle,\n  } = useContext(TableContext);\n\n  if (!enableSelection || selectionStyle === 'highlight' || isMobile)\n    return null;\n\n  const allRowsSelected = !!data.length && data.length === selectedRows.length;\n  const someRowsSelected = !allRowsSelected && !!selectedRows.length;\n\n  return (\n    <th\n      aria-colindex={1}\n      className={cellStyle({\n        width: 'w-64 flex-shrink-0 flex-grow-0',\n        isFirst: true,\n      })}\n    >\n      <Checkbox\n        aria-label={trans({message: 'Select all'})}\n        isIndeterminate={someRowsSelected}\n        checked={allRowsSelected}\n        onChange={() => {\n          if (allRowsSelected) {\n            onSelectionChange([]);\n          } else {\n            onSelectionChange(data.map(d => d.id));\n          }\n        }}\n      />\n    </th>\n  );\n}\n","import React, {JSXElementConstructor, useCallback, useMemo} from 'react';\nimport {useControlledState} from '@react-stately/utils';\nimport {rowStyle} from './table-style';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {useGridNavigation} from './navigate-grid';\nimport {RowElementProps, TableRow} from './table-row';\nimport {\n  TableContext,\n  TableContextValue,\n  TableSelectionStyle,\n} from './table-context';\nimport {HeaderCell} from './header-cell';\nimport {SelectAllCell} from './select-all-cell';\nimport {ColumnConfig} from '../../datatable/column-config';\nimport {TableDataItem} from './types/table-data-item';\nimport clsx from 'clsx';\n\nexport interface TableProps<T extends TableDataItem> {\n  className?: string;\n  columns: ColumnConfig<T>[];\n  hideHeaderRow?: boolean;\n  data: T[];\n  selectedRows?: (number | string)[];\n  defaultSelectedRows?: (number | string)[];\n  onSelectionChange?: (keys: (number | string)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSelection?: boolean;\n  selectionStyle?: TableSelectionStyle;\n  ariaLabelledBy?: string;\n  onAction?: (item: T, index: number) => void;\n  renderRowAs?: JSXElementConstructor<RowElementProps<T>>;\n}\nexport function Table<T extends TableDataItem>({\n  enableSelection = true,\n  columns,\n  data,\n  ariaLabelledBy,\n  onAction,\n  selectionStyle = 'checkbox',\n  hideHeaderRow,\n  renderRowAs,\n  className,\n  ...props\n}: TableProps<T>) {\n  const [selectedRows, onSelectionChange] = useControlledState(\n    props.selectedRows,\n    props.defaultSelectedRows || [],\n    props.onSelectionChange\n  );\n\n  const [sortDescriptor, onSortChange] = useControlledState(\n    props.sortDescriptor,\n    undefined,\n    props.onSortChange\n  );\n\n  const toggleRow = useCallback(\n    (item: TableDataItem) => {\n      const newValues = [...selectedRows];\n      if (!newValues.includes(item.id)) {\n        newValues.push(item.id);\n      } else {\n        const index = newValues.indexOf(item.id);\n        newValues.splice(index, 1);\n      }\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange]\n  );\n\n  const selectRow = useCallback(\n    (item: TableDataItem, merge?: boolean) => {\n      const newValues = merge ? [...selectedRows, item.id] : [item.id];\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange]\n  );\n\n  const contextValue: TableContextValue<T> = useMemo(() => {\n    return {\n      selectedRows,\n      onSelectionChange,\n      enableSelection,\n      selectionStyle,\n      data,\n      columns,\n      sortDescriptor,\n      onSortChange,\n      toggleRow,\n      selectRow,\n      onAction,\n    };\n  }, [\n    columns,\n    data,\n    enableSelection,\n    selectionStyle,\n    onAction,\n    onSelectionChange,\n    onSortChange,\n    selectedRows,\n    sortDescriptor,\n    toggleRow,\n    selectRow,\n  ]);\n\n  const navProps = useGridNavigation({\n    cellCount: enableSelection ? columns.length + 1 : columns.length,\n    rowCount: data.length + 1,\n  });\n\n  const headerRow = hideHeaderRow ? null : (\n    <thead>\n      <tr aria-rowindex={1} className={rowStyle({isHeader: true})}>\n        <SelectAllCell />\n        {columns.map((column, columnIndex) => (\n          <HeaderCell index={columnIndex} key={column.key} />\n        ))}\n      </tr>\n    </thead>\n  );\n\n  return (\n    <TableContext.Provider value={contextValue as any}>\n      <table\n        aria-multiselectable={enableSelection ? true : undefined}\n        aria-labelledby={ariaLabelledBy}\n        className={clsx(\n          className,\n          'select-none isolate outline-none text-sm w-full max-w-full align-top'\n        )}\n        {...navProps}\n      >\n        {headerRow}\n        <tbody>\n          {data.map((item, rowIndex) => (\n            <TableRow\n              item={item}\n              index={rowIndex}\n              key={item.id}\n              renderAs={renderRowAs as any}\n            />\n          ))}\n        </tbody>\n      </table>\n    </TableContext.Provider>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const SearchIcon = createSvgIcon(\n  <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\n, 'SearchOutlined');\n","import {FormSelect} from '../../../ui/forms/select/select';\nimport {Item} from '../../../ui/forms/listbox/item';\nimport {Trans} from '../../../i18n/trans';\nimport {FilterPanelProps} from './filter-panel-props';\n\nexport function SelectFilterPanel({filter}: FilterPanelProps) {\n  return (\n    <FormSelect\n      size=\"sm\"\n      autoFocus\n      name={`${filter.key}.value`}\n      selectionMode=\"single\"\n    >\n      {filter.options.map(option => (\n        <Item key={option.key} value={option.key}>\n          <Trans {...option.label} />\n        </Item>\n      ))}\n    </FormSelect>\n  );\n}\n","import {FormDateRangePicker} from '../../../ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {FilterPanelProps} from './filter-panel-props';\n\nexport function DateFilterPanel({filter}: FilterPanelProps) {\n  return (\n    <FormDateRangePicker\n      size=\"sm\"\n      name={`${filter.key}.value`}\n      autoFocus\n      granularity=\"day\"\n    />\n  );\n}\n","import {useQuery, UseQueryOptions} from '@tanstack/react-query';\nimport {NormalizedModel} from '../../datatable/filters/normalized-model';\nimport {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\n\nconst endpoint = (model: string) => `normalized-models/${model}`;\n\ninterface Response extends BackendResponse {\n  results: NormalizedModel[];\n}\n\ninterface Params {\n  query?: string;\n  perPage?: number;\n}\n\nexport function useNormalizedModels(\n  model: string,\n  params: Params,\n  options?: Omit<\n    UseQueryOptions<Response, unknown, Response, [string, Params]>,\n    'queryKey' | 'queryFn'\n  >\n) {\n  return useQuery([endpoint(model), params], () => fetchUsers(model, params), {\n    keepPreviousData: true,\n    ...options,\n  });\n}\n\nasync function fetchUsers(model: string, params: Params): Promise<Response> {\n  return apiClient\n    .get(endpoint(model), {\n      params,\n    })\n    .then(r => r.data);\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {NormalizedModel} from '../../datatable/filters/normalized-model';\nimport {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\n\nconst endpoint = (modelName: string, modelId: string | number) =>\n  `normalized-models/${modelName}/${modelId}`;\n\ninterface Response extends BackendResponse {\n  model: NormalizedModel;\n}\n\nexport function useNormalizedModel(model: string, modelId: string | number) {\n  return useQuery(\n    [endpoint(model, modelId)],\n    () => fetchModel(model, modelId),\n    {enabled: model != null && modelId != null}\n  );\n}\n\nasync function fetchModel(\n  model: string,\n  modelId: string | number\n): Promise<Response> {\n  return apiClient.get(endpoint(model, modelId), {}).then(r => r.data);\n}\n","import React, {ReactNode, useRef, useState} from 'react';\nimport {useTrans} from '../../i18n/use-trans';\nimport {Trans} from '../../i18n/trans';\nimport {Avatar} from '../images/avatar';\nimport {Tooltip} from '../tooltip/tooltip';\nimport {IconButton} from '../buttons/icon-button';\nimport {EditIcon} from '../../icons/material/Edit';\nimport {message} from '../../i18n/message';\nimport {Item} from './listbox/item';\nimport {ComboBox} from './combobox/combobox';\nimport {useController} from 'react-hook-form';\nimport {useControlledState} from '@react-stately/utils';\nimport {getInputFieldClassNames} from './input-field/get-input-field-class-names';\nimport clsx from 'clsx';\nimport {Skeleton} from '../skeleton/skeleton';\nimport {useNormalizedModels} from '../../users/queries/use-normalized-models';\nimport {useNormalizedModel} from '../../users/queries/use-normalized-model';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '../animation/opacity-animation';\n\ninterface NormalizedModelFieldProps {\n  modelType: string;\n  label?: ReactNode;\n  className?: string;\n  value?: string | number;\n  defaultValue?: string | number;\n  onChange?: (value: string | number) => void;\n  invalid?: boolean;\n  errorMessage?: string;\n  description?: ReactNode;\n  openMenuOnFocus?: boolean;\n  autoFocus?: boolean;\n}\nexport function NormalizedModelField({\n  modelType,\n  label,\n  className,\n  value,\n  defaultValue = '',\n  onChange,\n  description,\n  errorMessage,\n  invalid,\n  openMenuOnFocus,\n  autoFocus,\n}: NormalizedModelFieldProps) {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [inputValue, setInputValue] = useState('');\n  const [selectedValue, setSelectedValue] = useControlledState(\n    value,\n    defaultValue,\n    onChange\n  );\n  const query = useNormalizedModels(modelType, {query: inputValue});\n  const {trans} = useTrans();\n\n  const fieldClassNames = getInputFieldClassNames({size: 'md'});\n\n  if (selectedValue) {\n    return (\n      <div className={className}>\n        <div className={fieldClassNames.label}>{label}</div>\n        <div\n          className={clsx(\n            'p-10 border rounded mb-20',\n            invalid && 'border-danger'\n          )}\n        >\n          <AnimatePresence initial={false} mode=\"wait\">\n            <SelectedModelPreview\n              modelType={modelType}\n              modelId={selectedValue}\n              onEditClick={() => {\n                setSelectedValue('');\n                setInputValue('');\n                requestAnimationFrame(() => {\n                  inputRef.current?.focus();\n                });\n              }}\n            />\n          </AnimatePresence>\n        </div>\n        {description && !errorMessage && (\n          <div className={fieldClassNames.description}>{description}</div>\n        )}\n        {errorMessage && (\n          <div className={fieldClassNames.error}>{errorMessage}</div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <ComboBox\n      className={className}\n      invalid={invalid}\n      errorMessage={errorMessage}\n      description={description}\n      isAsync\n      placeholder={trans(message('Find item..'))}\n      label={label}\n      isLoading={query.isFetching}\n      items={query.data?.results}\n      inputValue={inputValue}\n      onInputValueChange={setInputValue}\n      clearInputOnItemSelection\n      selectionMode=\"single\"\n      selectedValue={selectedValue}\n      onSelectionChange={setSelectedValue}\n      ref={inputRef}\n      openMenuOnFocus={openMenuOnFocus}\n      autoFocus={autoFocus}\n    >\n      {model => (\n        <Item\n          value={model.id}\n          key={model.id}\n          description={model.description}\n          startIcon={<Avatar src={model.image} />}\n        >\n          {model.name}\n        </Item>\n      )}\n    </ComboBox>\n  );\n}\n\ninterface SelectedModelPreviewProps {\n  modelType: string;\n  modelId: string | number;\n  selectedValue?: number | string;\n  onEditClick?: () => void;\n}\nfunction SelectedModelPreview({\n  modelType,\n  modelId,\n  onEditClick,\n}: SelectedModelPreviewProps) {\n  const {data, isLoading} = useNormalizedModel(modelType, modelId);\n\n  if (isLoading || !data?.model) {\n    return <LoadingSkeleton key=\"skeleton\" />;\n  }\n\n  return (\n    <m.div\n      className=\"flex items-center gap-10\"\n      key=\"preview\"\n      {...opacityAnimation}\n    >\n      <Avatar src={data.model.image} />\n      <div>\n        <div>{data.model.name}</div>\n        <div className=\"text-muted text-xs\">{data.model.description}</div>\n      </div>\n      <Tooltip label={<Trans message=\"Change item\" />}>\n        <IconButton\n          className=\"ml-auto text-muted\"\n          size=\"sm\"\n          onClick={onEditClick}\n        >\n          <EditIcon />\n        </IconButton>\n      </Tooltip>\n    </m.div>\n  );\n}\n\nfunction LoadingSkeleton() {\n  return (\n    <m.div className=\"flex items-center gap-10\" {...opacityAnimation}>\n      <Skeleton variant=\"rect\" size=\"w-32 h-32\" />\n      <div className=\"flex-auto max-h-[36px]\">\n        <Skeleton className=\"text-xs\" />\n        <Skeleton className=\"text-xs max-h-8\" />\n      </div>\n      <Skeleton variant=\"icon\" size=\"w-24 h-24\" />\n    </m.div>\n  );\n}\n\ninterface FormNormalizedModelFieldProps extends NormalizedModelFieldProps {\n  name: string;\n}\nexport function FormNormalizedModelField({\n  name,\n  ...fieldProps\n}: FormNormalizedModelFieldProps) {\n  const {\n    field: {onChange, value = ''},\n    fieldState: {invalid, error},\n  } = useController({\n    name,\n  });\n\n  return (\n    <NormalizedModelField\n      value={value}\n      onChange={onChange}\n      invalid={invalid}\n      errorMessage={error?.message}\n      {...fieldProps}\n    />\n  );\n}\n","import {FilterPanelProps} from './filter-panel-props';\nimport {FormNormalizedModelField} from '../../../ui/forms/normalized-model-field';\n\nexport function NormalizedModelFilterPanel({filter}: FilterPanelProps) {\n  return (\n    <FormNormalizedModelField\n      name={`${filter.key}.value`}\n      className=\"mb-20\"\n      modelType={filter.model!}\n      openMenuOnFocus\n      autoFocus\n    />\n  );\n}\n","import {FilterOperator} from './backend-filter';\nimport {message} from '../../i18n/message';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\n\nexport const FilterOperatorNames: {[op in FilterOperator]: MessageDescriptor} =\n  {\n    '=': message('is'),\n    '!=': message('is not'),\n    '>': message('is greater than'),\n    '>=': message('is greater than or equal to'),\n    '<': message('is less than'),\n    '<=': message('is less than or equal to'),\n    has: message('Include'),\n    doesntHave: message('Do not include'),\n    between: message('Is between'),\n  };\n","import {FormTextField} from '../../../ui/forms/input-field/text-field/text-field';\nimport {Trans} from '../../../i18n/trans';\nimport {FormSelect} from '../../../ui/forms/select/select';\nimport {Item} from '../../../ui/forms/listbox/item';\nimport {FilterOperatorNames} from '../filter-operator-names';\nimport {Fragment} from 'react';\nimport {FilterPanelProps} from './filter-panel-props';\n\nexport function InputFilterPanel({filter}: FilterPanelProps) {\n  return (\n    <Fragment>\n      <FormSelect\n        autoFocus\n        selectionMode=\"single\"\n        name={`${filter.key}.operator`}\n        className=\"mb-14\"\n        size=\"sm\"\n        required\n      >\n        {filter.operators.map(operator => (\n          <Item key={operator} value={operator}>\n            {<Trans {...FilterOperatorNames[operator]} />}\n          </Item>\n        ))}\n      </FormSelect>\n      <FormTextField\n        size=\"sm\"\n        name={`${filter.key}.value`}\n        type={filter.inputType}\n        required\n      />\n    </Fragment>\n  );\n}\n","import {BackendFilter, FilterControlType} from '../backend-filter';\nimport {ComponentPropsWithRef, forwardRef, ReactNode} from 'react';\nimport {Button} from '../../../ui/buttons/button';\nimport {KeyboardArrowDownIcon} from '../../../icons/material/KeyboardArrowDown';\nimport {Trans} from '../../../i18n/trans';\nimport clsx from 'clsx';\n\ninterface TriggerButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  isInactive?: boolean;\n  filter: BackendFilter;\n  children?: ReactNode;\n}\nexport const FilterListTriggerButton = forwardRef<\n  HTMLButtonElement,\n  TriggerButtonProps\n>((props, ref) => {\n  // pass through all props from menu trigger and dialog trigger to button\n  const {isInactive, filter, ...domProps} = props;\n\n  if (isInactive) {\n    return <InactiveFilterButton filter={filter} {...domProps} ref={ref} />;\n  }\n\n  return <ActiveFilterButton filter={filter} {...domProps} ref={ref} />;\n});\n\ninterface InactiveFilterButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  filter: BackendFilter;\n}\nexport const InactiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, ...domProps}, ref) => {\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      color=\"paper\"\n      radius=\"rounded-md\"\n      border=\"border\"\n      ref={ref}\n      endIcon={<KeyboardArrowDownIcon />}\n      {...domProps}\n    >\n      <Trans {...filter.label} />\n    </Button>\n  );\n});\n\nexport const ActiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, children, ...domProps}, ref) => {\n  const isBoolean = filter.type === FilterControlType.BooleanToggle;\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      color=\"primary\"\n      radius=\"rounded-r-md\"\n      border=\"border-y border-r\"\n      endIcon={!isBoolean && <KeyboardArrowDownIcon />}\n      ref={ref}\n      {...domProps}\n    >\n      <span\n        className={clsx(\n          !isBoolean && 'border-r border-r-primary-light mr-8 pr-8'\n        )}\n      >\n        <Trans {...filter.label} />\n      </span>\n      {children}\n    </Button>\n  );\n});\n","import {DialogTrigger} from '../../../ui/overlays/dialog/dialog-trigger';\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\nimport {ReactNode} from 'react';\nimport {useForm} from 'react-hook-form';\nimport {FilterItemFormValue} from '../add-filter-dialog';\nimport {useDialogContext} from '../../../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../../../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../../../ui/overlays/dialog/dialog-header';\nimport {Trans} from '../../../i18n/trans';\nimport {DialogBody} from '../../../ui/overlays/dialog/dialog-body';\nimport {Form} from '../../../ui/forms/form';\nimport {DialogFooter} from '../../../ui/overlays/dialog/dialog-footer';\nimport {Button} from '../../../ui/buttons/button';\nimport {FilterListControlProps} from './filter-list-control';\n\ninterface FilterListItemDialogTriggerProps extends FilterListControlProps<any> {\n  label: ReactNode;\n  panel: ReactNode;\n}\nexport function FilterListItemDialogTrigger(\n  props: FilterListItemDialogTriggerProps\n) {\n  const {onValueChange, isInactive, filter, label} = props;\n  return (\n    <DialogTrigger\n      offset={10}\n      type=\"popover\"\n      onClose={(value?: FilterItemFormValue) => {\n        if (value !== undefined) {\n          onValueChange(value);\n        }\n      }}\n    >\n      <FilterListTriggerButton isInactive={isInactive} filter={filter}>\n        {label}\n      </FilterListTriggerButton>\n      <FilterListControlDialog {...props} />\n    </DialogTrigger>\n  );\n}\n\nexport function FilterListControlDialog({\n  filter,\n  panel,\n  value,\n  operator,\n}: FilterListItemDialogTriggerProps) {\n  const form = useForm<Record<string, FilterItemFormValue>>({\n    defaultValues: {\n      [filter.key]: {value, operator},\n    },\n  });\n  const {close, formId} = useDialogContext();\n  return (\n    <Dialog size=\"xs\">\n      <DialogHeader>\n        <Trans {...filter.label} />\n      </DialogHeader>\n      <DialogBody padding=\"px-14 pt-14 pb-4\">\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={formValue => {\n            close(formValue[filter.key]);\n          }}\n        >\n          {filter.description && (\n            <div className=\"text-muted text-xs mb-14\">\n              <Trans {...filter.description} />\n            </div>\n          )}\n          {panel}\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          form={formId}\n          type=\"submit\"\n          variant=\"flat\"\n          color=\"primary\"\n          size=\"xs\"\n        >\n          <Trans message=\"Apply\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '../backend-filter';\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\nimport {Trans} from '../../../i18n/trans';\nimport {SelectFilterPanel} from '../panels/select-filter-panel';\nimport {FilterListItemDialogTrigger} from './filter-list-item-dialog-trigger';\nimport {Avatar} from '../../../ui/images/avatar';\nimport {NormalizedModelFilterPanel} from '../panels/normalized-model-filter-panel';\nimport {DateFilterPanel} from '../panels/date-filter-panel';\nimport {Fragment, Key, ReactNode} from 'react';\nimport {DateRangePresets} from '../../../ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {FormattedDateTimeRange} from '../../../i18n/formatted-date-time-range';\nimport {AbsoluteDateRange} from '../../../ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {InputFilterPanel} from '../panels/input-filter-panel';\nimport {FilterOperatorNames} from '../filter-operator-names';\nimport {FilterItemFormValue} from '../add-filter-dialog';\nimport {useNormalizedModel} from '../../../users/queries/use-normalized-model';\nimport {Skeleton} from '../../../ui/skeleton/skeleton';\n\nexport interface FilterListControlProps<T = unknown> {\n  filter: BackendFilter;\n  onValueChange: (value: FilterItemFormValue<T>) => void;\n  value: T;\n  operator?: FilterOperator;\n  isInactive?: boolean;\n}\nexport function FilterListControl(props: FilterListControlProps<any>) {\n  switch (props.filter.type) {\n    case FilterControlType.DatePicker:\n      return <DatePickerControl {...props} />;\n    case FilterControlType.BooleanToggle:\n      return <BooleanToggleControl {...props} />;\n    case FilterControlType.Select: {\n      return <SelectControl {...props} />;\n    }\n    case FilterControlType.Input: {\n      return <InputControl {...props} />;\n    }\n    case FilterControlType.SelectModel: {\n      return <SelectModelControl {...props} />;\n    }\n  }\n}\n\nfunction DatePickerControl(\n  props: FilterListControlProps<Required<AbsoluteDateRange>>\n) {\n  const {value, filter} = props;\n\n  let valueLabel: ReactNode;\n  if (value.preset !== undefined) {\n    valueLabel = <Trans {...DateRangePresets[value.preset].label} />;\n  } else {\n    valueLabel = (\n      <FormattedDateTimeRange\n        start={new Date(value.start)}\n        end={new Date(value.end)}\n        options={{dateStyle: 'medium'}}\n      />\n    );\n  }\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={valueLabel}\n      panel={<DateFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction BooleanToggleControl({\n  filter,\n  isInactive,\n  onValueChange,\n}: FilterListControlProps<boolean>) {\n  return (\n    <FilterListTriggerButton\n      onClick={() => {\n        onValueChange({value: true});\n      }}\n      filter={filter}\n      isInactive={isInactive}\n    />\n  );\n}\n\nfunction SelectControl(props: FilterListControlProps<Key>) {\n  const {filter, value} = props;\n  const option = filter.options.find(o => o.key === value);\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={option ? <Trans {...option.label} /> : null}\n      panel={<SelectFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction InputControl(props: FilterListControlProps<string>) {\n  const {filter, value, operator} = props;\n\n  const operatorLabel = operator ? (\n    <Trans {...FilterOperatorNames[operator]} />\n  ) : null;\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={\n        <Fragment>\n          {operatorLabel} {value}\n        </Fragment>\n      }\n      panel={<InputFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction SelectModelControl(props: FilterListControlProps<string>) {\n  const {value, filter} = props;\n  const {isLoading, data} = useNormalizedModel(filter.model!, value);\n\n  const skeleton = (\n    <Fragment>\n      <Skeleton variant=\"avatar\" size=\"w-18 h-18 mr-6\" />\n      <Skeleton variant=\"rect\" size=\"w-50\" />\n    </Fragment>\n  );\n  const modelPreview = (\n    <Fragment>\n      <Avatar size=\"xs\" src={data?.model.image} className=\"mr-6\" />\n      {data?.model.name}\n    </Fragment>\n  );\n\n  const label = isLoading || !data ? skeleton : modelPreview;\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={label}\n      panel={<NormalizedModelFilterPanel filter={filter} />}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport {BackendFilter} from '../backend-filter';\nimport {useBackendFilterUrlParams} from '../backend-filter-url-params';\nimport {IconButton} from '../../../ui/buttons/icon-button';\nimport {CloseIcon} from '../../../icons/material/Close';\nimport {FilterListControl} from './filter-list-control';\nimport {FilterItemFormValue} from '../add-filter-dialog';\n\ninterface FilterListProps {\n  filters: BackendFilter[];\n  // these filters will always be shown, even if value is not yet selected for filter\n  pinnedFilters?: string[];\n  className?: string;\n}\nexport function FilterList({\n  filters,\n  pinnedFilters,\n  className,\n}: FilterListProps) {\n  const {decodedFilters, remove, replaceAll} = useBackendFilterUrlParams(\n    filters,\n    pinnedFilters\n  );\n\n  if (!decodedFilters.length) return null;\n\n  return (\n    <div className={clsx('flex items-center gap-6 overflow-x-auto', className)}>\n      {decodedFilters.map((field, index) => {\n        const filter = filters.find(f => f.key === field.key)!;\n\n        const handleValueChange = (payload: FilterItemFormValue) => {\n          const newFilters = [...decodedFilters];\n          newFilters.splice(index, 1, {\n            key: filter.key,\n            value: payload.value,\n            isInactive: false,\n            operator: payload.operator || filter.defaultOperator,\n          });\n          replaceAll(newFilters);\n        };\n\n        return (\n          <div key={field.key}>\n            {!field.isInactive && (\n              <IconButton\n                variant=\"outline\"\n                color=\"primary\"\n                size=\"xs\"\n                radius=\"rounded-l-md\"\n                onClick={() => {\n                  remove(field.key);\n                }}\n              >\n                <CloseIcon />\n              </IconButton>\n            )}\n            <FilterListControl\n              filter={filter}\n              isInactive={field.isInactive}\n              value={field.valueKey || field.value}\n              operator={field.operator}\n              onValueChange={handleValueChange}\n            />\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AddIcon = createSvgIcon(\n  <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\n, 'AddOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FileDownloadIcon = createSvgIcon(\n  <path d=\"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z\" />\n, 'FileDownloadOutlined');\n","export function downloadFileFromUrl(url: string, name?: string) {\n  const link = document.createElement('a');\n  link.href = url;\n  if (name) link.download = name;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n","import React, {Children, cloneElement, isValidElement, ReactElement} from 'react';\nimport clsx from 'clsx';\nimport type {ChipProps} from './chip';\n\ninterface ChipListProps {\n  className?: string;\n  children?: ReactElement | ReactElement[];\n  size?: ChipProps['size'];\n  radius?: ChipProps['radius'];\n  color?: ChipProps['color'];\n  selectable?: ChipProps['selectable'];\n}\nexport function ChipList({\n  className,\n  children,\n  size,\n  color,\n  radius,\n  selectable,\n}: ChipListProps) {\n  return (\n    <div className={clsx(className, 'flex items-center gap-8 flex-wrap')}>\n      {Children.map(children, chip => {\n        if (isValidElement<ChipProps>(chip)) {\n          return cloneElement<ChipProps>(chip, {\n            size,\n            color,\n            selectable,\n            radius,\n          });\n        }\n      })}\n    </div>\n  );\n}\n","import { createContext as createContext$1, useRef, createElement, useContext, useMemo } from 'react';\nimport { useStore } from 'zustand';\n\nfunction createContext() {\n  const ZustandContext = createContext$1(void 0);\n  const Provider = ({\n    createStore,\n    children\n  }) => {\n    const storeRef = useRef();\n    if (!storeRef.current) {\n      storeRef.current = createStore();\n    }\n    return createElement(\n      ZustandContext.Provider,\n      { value: storeRef.current },\n      children\n    );\n  };\n  const useBoundStore = (selector, equalityFn) => {\n    const store = useContext(ZustandContext);\n    if (!store) {\n      throw new Error(\n        \"Seems like you have not used zustand provider as an ancestor.\"\n      );\n    }\n    return useStore(\n      store,\n      selector,\n      equalityFn\n    );\n  };\n  const useStoreApi = () => {\n    const store = useContext(ZustandContext);\n    if (!store) {\n      throw new Error(\n        \"Seems like you have not used zustand provider as an ancestor.\"\n      );\n    }\n    return useMemo(\n      () => ({\n        getState: store.getState,\n        setState: store.setState,\n        subscribe: store.subscribe,\n        destroy: store.destroy\n      }),\n      [store]\n    );\n  };\n  return {\n    Provider,\n    useStore: useBoundStore,\n    useStoreApi\n  };\n}\n\nexport { createContext as default };\n","'use strict';\n\nconst denyList = new Set([\n\t'ENOTFOUND',\n\t'ENETUNREACH',\n\n\t// SSL errors from https://github.com/nodejs/node/blob/fc8e3e2cdc521978351de257030db0076d79e0ab/src/crypto/crypto_common.cc#L301-L328\n\t'UNABLE_TO_GET_ISSUER_CERT',\n\t'UNABLE_TO_GET_CRL',\n\t'UNABLE_TO_DECRYPT_CERT_SIGNATURE',\n\t'UNABLE_TO_DECRYPT_CRL_SIGNATURE',\n\t'UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY',\n\t'CERT_SIGNATURE_FAILURE',\n\t'CRL_SIGNATURE_FAILURE',\n\t'CERT_NOT_YET_VALID',\n\t'CERT_HAS_EXPIRED',\n\t'CRL_NOT_YET_VALID',\n\t'CRL_HAS_EXPIRED',\n\t'ERROR_IN_CERT_NOT_BEFORE_FIELD',\n\t'ERROR_IN_CERT_NOT_AFTER_FIELD',\n\t'ERROR_IN_CRL_LAST_UPDATE_FIELD',\n\t'ERROR_IN_CRL_NEXT_UPDATE_FIELD',\n\t'OUT_OF_MEM',\n\t'DEPTH_ZERO_SELF_SIGNED_CERT',\n\t'SELF_SIGNED_CERT_IN_CHAIN',\n\t'UNABLE_TO_GET_ISSUER_CERT_LOCALLY',\n\t'UNABLE_TO_VERIFY_LEAF_SIGNATURE',\n\t'CERT_CHAIN_TOO_LONG',\n\t'CERT_REVOKED',\n\t'INVALID_CA',\n\t'PATH_LENGTH_EXCEEDED',\n\t'INVALID_PURPOSE',\n\t'CERT_UNTRUSTED',\n\t'CERT_REJECTED',\n\t'HOSTNAME_MISMATCH'\n]);\n\n// TODO: Use `error?.code` when targeting Node.js 14\nmodule.exports = error => !denyList.has(error && error.code);\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport isRetryAllowed from 'is-retry-allowed';\nvar namespace = 'axios-retry';\n/**\n * @param  {Error}  error\n * @return {boolean}\n */\n\nexport function isNetworkError(error) {\n  return !error.response && Boolean(error.code) && // Prevents retrying cancelled requests\n  error.code !== 'ECONNABORTED' && // Prevents retrying timed out requests\n  isRetryAllowed(error); // Prevents retrying unsafe errors\n}\nvar SAFE_HTTP_METHODS = ['get', 'head', 'options'];\nvar IDEMPOTENT_HTTP_METHODS = SAFE_HTTP_METHODS.concat(['put', 'delete']);\n/**\n * @param  {Error}  error\n * @return {boolean}\n */\n\nexport function isRetryableError(error) {\n  return error.code !== 'ECONNABORTED' && (!error.response || error.response.status >= 500 && error.response.status <= 599);\n}\n/**\n * @param  {Error}  error\n * @return {boolean}\n */\n\nexport function isSafeRequestError(error) {\n  if (!error.config) {\n    // Cannot determine if the request can be retried\n    return false;\n  }\n\n  return isRetryableError(error) && SAFE_HTTP_METHODS.indexOf(error.config.method) !== -1;\n}\n/**\n * @param  {Error}  error\n * @return {boolean}\n */\n\nexport function isIdempotentRequestError(error) {\n  if (!error.config) {\n    // Cannot determine if the request can be retried\n    return false;\n  }\n\n  return isRetryableError(error) && IDEMPOTENT_HTTP_METHODS.indexOf(error.config.method) !== -1;\n}\n/**\n * @param  {Error}  error\n * @return {boolean}\n */\n\nexport function isNetworkOrIdempotentRequestError(error) {\n  return isNetworkError(error) || isIdempotentRequestError(error);\n}\n/**\n * @return {number} - delay in milliseconds, always 0\n */\n\nfunction noDelay() {\n  return 0;\n}\n/**\n * @param  {number} [retryNumber=0]\n * @return {number} - delay in milliseconds\n */\n\n\nexport function exponentialDelay() {\n  var retryNumber = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var delay = Math.pow(2, retryNumber) * 100;\n  var randomSum = delay * 0.2 * Math.random(); // 0-20% of the delay\n\n  return delay + randomSum;\n}\n/**\n * Initializes and returns the retry state for the given request/config\n * @param  {AxiosRequestConfig} config\n * @return {Object}\n */\n\nfunction getCurrentState(config) {\n  var currentState = config[namespace] || {};\n  currentState.retryCount = currentState.retryCount || 0;\n  config[namespace] = currentState;\n  return currentState;\n}\n/**\n * Returns the axios-retry options for the current request\n * @param  {AxiosRequestConfig} config\n * @param  {AxiosRetryConfig} defaultOptions\n * @return {AxiosRetryConfig}\n */\n\n\nfunction getRequestOptions(config, defaultOptions) {\n  return _objectSpread(_objectSpread({}, defaultOptions), config[namespace]);\n}\n/**\n * @param  {Axios} axios\n * @param  {AxiosRequestConfig} config\n */\n\n\nfunction fixConfig(axios, config) {\n  if (axios.defaults.agent === config.agent) {\n    delete config.agent;\n  }\n\n  if (axios.defaults.httpAgent === config.httpAgent) {\n    delete config.httpAgent;\n  }\n\n  if (axios.defaults.httpsAgent === config.httpsAgent) {\n    delete config.httpsAgent;\n  }\n}\n/**\n * Checks retryCondition if request can be retried. Handles it's retruning value or Promise.\n * @param  {number} retries\n * @param  {Function} retryCondition\n * @param  {Object} currentState\n * @param  {Error} error\n * @return {boolean}\n */\n\n\nfunction shouldRetry(_x, _x2, _x3, _x4) {\n  return _shouldRetry.apply(this, arguments);\n}\n/**\n * Adds response interceptors to an axios instance to retry requests failed due to network issues\n *\n * @example\n *\n * import axios from 'axios';\n *\n * axiosRetry(axios, { retries: 3 });\n *\n * axios.get('http://example.com/test') // The first request fails and the second returns 'ok'\n *   .then(result => {\n *     result.data; // 'ok'\n *   });\n *\n * // Exponential back-off retry delay between requests\n * axiosRetry(axios, { retryDelay : axiosRetry.exponentialDelay});\n *\n * // Custom retry delay\n * axiosRetry(axios, { retryDelay : (retryCount) => {\n *   return retryCount * 1000;\n * }});\n *\n * // Also works with custom axios instances\n * const client = axios.create({ baseURL: 'http://example.com' });\n * axiosRetry(client, { retries: 3 });\n *\n * client.get('/test') // The first request fails and the second returns 'ok'\n *   .then(result => {\n *     result.data; // 'ok'\n *   });\n *\n * // Allows request-specific configuration\n * client\n *   .get('/test', {\n *     'axios-retry': {\n *       retries: 0\n *     }\n *   })\n *   .catch(error => { // The first request fails\n *     error !== undefined\n *   });\n *\n * @param {Axios} axios An axios instance (the axios object or one created from axios.create)\n * @param {Object} [defaultOptions]\n * @param {number} [defaultOptions.retries=3] Number of retries\n * @param {boolean} [defaultOptions.shouldResetTimeout=false]\n *        Defines if the timeout should be reset between retries\n * @param {Function} [defaultOptions.retryCondition=isNetworkOrIdempotentRequestError]\n *        A function to determine if the error can be retried\n * @param {Function} [defaultOptions.retryDelay=noDelay]\n *        A function to determine the delay between retry requests\n * @param {Function} [defaultOptions.onRetry=()=>{}]\n *        A function to get notified when a retry occurs\n */\n\n\nfunction _shouldRetry() {\n  _shouldRetry = _asyncToGenerator(function* (retries, retryCondition, currentState, error) {\n    var shouldRetryOrPromise = currentState.retryCount < retries && retryCondition(error); // This could be a promise\n\n    if (typeof shouldRetryOrPromise === 'object') {\n      try {\n        var shouldRetryPromiseResult = yield shouldRetryOrPromise; // keep return true unless shouldRetryPromiseResult return false for compatibility\n\n        return shouldRetryPromiseResult !== false;\n      } catch (_err) {\n        return false;\n      }\n    }\n\n    return shouldRetryOrPromise;\n  });\n  return _shouldRetry.apply(this, arguments);\n}\n\nexport default function axiosRetry(axios, defaultOptions) {\n  axios.interceptors.request.use(config => {\n    var currentState = getCurrentState(config);\n    currentState.lastRequestTime = Date.now();\n    return config;\n  });\n  axios.interceptors.response.use(null, /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (error) {\n      var {\n        config\n      } = error; // If we have no information to retry the request\n\n      if (!config) {\n        return Promise.reject(error);\n      }\n\n      var {\n        retries = 3,\n        retryCondition = isNetworkOrIdempotentRequestError,\n        retryDelay = noDelay,\n        shouldResetTimeout = false,\n        onRetry = () => {}\n      } = getRequestOptions(config, defaultOptions);\n      var currentState = getCurrentState(config);\n\n      if (yield shouldRetry(retries, retryCondition, currentState, error)) {\n        currentState.retryCount += 1;\n        var delay = retryDelay(currentState.retryCount, error); // Axios fails merging this configuration to the default configuration because it has an issue\n        // with circular structures: https://github.com/mzabriskie/axios/issues/370\n\n        fixConfig(axios, config);\n\n        if (!shouldResetTimeout && config.timeout && currentState.lastRequestTime) {\n          var lastRequestDuration = Date.now() - currentState.lastRequestTime; // Minimum 1ms timeout (passing 0 or less to XHR means no timeout)\n\n          config.timeout = Math.max(config.timeout - lastRequestDuration - delay, 1);\n        }\n\n        config.transformRequest = [data => data];\n        onRetry(currentState.retryCount, error, config);\n        return new Promise(resolve => setTimeout(() => resolve(axios(config)), delay));\n      }\n\n      return Promise.reject(error);\n    });\n\n    return function (_x5) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n} // Compatibility with CommonJS\n\naxiosRetry.isNetworkError = isNetworkError;\naxiosRetry.isSafeRequestError = isSafeRequestError;\naxiosRetry.isIdempotentRequestError = isIdempotentRequestError;\naxiosRetry.isNetworkOrIdempotentRequestError = isNetworkOrIdempotentRequestError;\naxiosRetry.exponentialDelay = exponentialDelay;\naxiosRetry.isRetryableError = isRetryableError;\n//# sourceMappingURL=index.js.map","import {UploadStrategy, UploadStrategyConfig} from './upload-strategy';\nimport {UploadedFile} from '../../uploaded-file';\nimport axios, {AxiosInstance} from 'axios';\nimport {FileEntry} from '../../file-entry';\nimport {\n  getFromLocalStorage,\n  removeFromLocalStorage,\n  setInLocalStorage,\n} from '../../../utils/hooks/local-storage';\nimport {apiClient} from '../../../http/query-client';\nimport {getAxiosErrorMessage} from '../../../utils/http/get-axios-error-message';\nimport axiosRetry from 'axios-retry';\n\nconst oneMB = 1024 * 1024;\n// chunk size that will be uploaded to s3 per request\nconst desiredChunkSize = 20 * oneMB;\n// how many urls should be pre-signed per call to backend\nconst batchSize = 10;\n// number of concurrent requests to s3 api\nconst concurrency = 5;\n\ninterface ChunkState {\n  blob: Blob | File;\n  done: boolean;\n  etag?: string;\n  partNumber: number;\n  bytesUploaded: number;\n}\n\ninterface SignedUrl {\n  url: string;\n  partNumber: number;\n}\n\ninterface StoredUrl {\n  createdAt: string;\n  uploadId: string;\n  fileKey: string;\n}\n\ninterface UploadedPart {\n  PartNumber: number;\n  ETag: string;\n  Size: string;\n  LastModified: string;\n}\n\nexport class S3MultipartUpload implements UploadStrategy {\n  private abortController: AbortController;\n  private chunks: ChunkState[] = [];\n  private uploadId?: string;\n  private fileKey?: string;\n  private readonly chunkAxios: AxiosInstance;\n  private abortedByUser = false;\n  private uploadedParts?: UploadedPart[];\n\n  get storageKey(): string {\n    return `s3-multipart::${this.file.fingerprint}`;\n  }\n\n  constructor(\n    private file: UploadedFile,\n    private config: UploadStrategyConfig\n  ) {\n    this.abortController = new AbortController();\n    this.chunkAxios = axios.create();\n    axiosRetry(this.chunkAxios, {retries: 3});\n  }\n\n  async start() {\n    const storedUrl = getFromLocalStorage(this.storageKey);\n    if (storedUrl) {\n      await this.getUploadedParts(storedUrl);\n    }\n\n    if (!this.uploadedParts?.length) {\n      await this.createMultipartUpload();\n      if (!this.uploadId) return;\n    }\n\n    this.prepareChunks();\n\n    const result = await this.uploadParts();\n    if (result === 'done') {\n      const isCompleted = await this.completeMultipartUpload();\n      if (!isCompleted) return;\n\n      // catch any errors so below \"onError\" handler gets executed\n      try {\n        const response = await this.createFileEntry();\n        if (response?.fileEntry) {\n          this.config.onSuccess?.(response?.fileEntry);\n          removeFromLocalStorage(this.storageKey);\n          return;\n        }\n      } catch {}\n    }\n\n    // upload failed\n    if (!this.abortController.signal.aborted) {\n      this.abortController.abort();\n    }\n    if (!this.abortedByUser) {\n      this.config.onError?.();\n    }\n  }\n\n  async abort() {\n    this.abortedByUser = true;\n    this.abortController.abort();\n    await this.abortUploadOnS3();\n  }\n\n  private async uploadParts(): Promise<any> {\n    const pendingChunks = this.chunks.filter(c => !c.done);\n    if (!pendingChunks.length) {\n      return Promise.resolve('done');\n    }\n\n    const signedUrls = await this.batchSignUrls(\n      pendingChunks.slice(0, batchSize)\n    );\n    if (!signedUrls) return;\n\n    while (signedUrls.length) {\n      const batch = signedUrls.splice(0, concurrency);\n      const pendingUploads = batch.map(item => {\n        return this.uploadPartToS3(item);\n      });\n      const result = await Promise.all(pendingUploads);\n      // if not all uploads in batch completed, bail\n      if (!result.every(r => r)) return;\n    }\n\n    return await this.uploadParts();\n  }\n\n  private async batchSignUrls(\n    batch: ChunkState[]\n  ): Promise<SignedUrl[] | undefined> {\n    const response = await this.chunkAxios\n      .post(\n        'api/v1/s3/multipart/batch-sign-part-urls',\n        {\n          partNumbers: batch.map(i => i.partNumber),\n          uploadId: this.uploadId,\n          key: this.fileKey,\n        },\n        {signal: this.abortController.signal}\n      )\n      .then(r => r.data as {urls: SignedUrl[]})\n      .catch(err => {\n        if (!this.abortController.signal.aborted) {\n          this.abortController.abort();\n        }\n      });\n\n    return response?.urls;\n  }\n\n  private async uploadPartToS3({\n    url,\n    partNumber,\n  }: SignedUrl): Promise<boolean | void> {\n    const chunk = this.chunks.find(c => c.partNumber === partNumber);\n    if (!chunk) return;\n    return this.chunkAxios\n      .put(url, chunk.blob, {\n        withCredentials: false,\n        signal: this.abortController.signal,\n        onUploadProgress: (e: ProgressEvent) => {\n          if (!e.lengthComputable) return;\n\n          chunk.bytesUploaded = e.loaded;\n          const totalUploaded = this.chunks.reduce(\n            (n, c) => n + c.bytesUploaded,\n            0\n          );\n\n          this.config.onProgress?.({\n            bytesUploaded: totalUploaded,\n            bytesTotal: this.file.size,\n          });\n        },\n      })\n      .then(r => {\n        const etag = r.headers.etag;\n        if (etag) {\n          chunk.done = true;\n          chunk.etag = etag;\n          return true;\n        }\n      })\n      .catch(err => {\n        if (!this.abortController.signal.aborted && err !== undefined) {\n          this.abortController.abort();\n        }\n      });\n  }\n\n  private async createMultipartUpload(): Promise<void> {\n    const response = await apiClient\n      .post('s3/multipart/create', {\n        filename: this.file.name,\n        mime: this.file.mime,\n        size: this.file.size,\n        extension: this.file.extension,\n        ...this.config.metadata,\n      })\n      .then(r => r.data as {uploadId: string; key: string})\n      .catch(err => {\n        if (err.code !== 'ERR_CANCELED') {\n          this.config.onError?.(getAxiosErrorMessage(err));\n        }\n      });\n\n    if (response) {\n      this.uploadId = response.uploadId;\n      this.fileKey = response.key;\n      setInLocalStorage(this.storageKey, {\n        createdAt: new Date().toISOString(),\n        fileKey: this.fileKey,\n        uploadId: this.uploadId,\n      } as StoredUrl);\n    }\n  }\n\n  private async getUploadedParts({fileKey, uploadId}: StoredUrl) {\n    const response = await apiClient\n      .post('s3/multipart/get-uploaded-parts', {\n        key: fileKey,\n        uploadId,\n      })\n      .then(r => r.data as {parts: UploadedPart[]})\n      .catch(() => {\n        removeFromLocalStorage(this.storageKey);\n        return null;\n      });\n    if (response?.parts?.length) {\n      this.uploadedParts = response.parts;\n      this.uploadId = uploadId;\n      this.fileKey = fileKey;\n    }\n  }\n\n  private async completeMultipartUpload(): Promise<{location: string} | null> {\n    return apiClient\n      .post('s3/multipart/complete', {\n        key: this.fileKey,\n        uploadId: this.uploadId,\n        parts: this.chunks.map(c => {\n          return {\n            ETag: c.etag,\n            PartNumber: c.partNumber,\n          };\n        }),\n      })\n      .then(r => r.data)\n      .catch(() => {\n        this.config.onError?.();\n        this.abortUploadOnS3();\n      })\n      .finally(() => {\n        removeFromLocalStorage(this.storageKey);\n      });\n  }\n\n  private async createFileEntry(): Promise<{fileEntry: FileEntry}> {\n    return await apiClient\n      .post('s3/entries', {\n        ...this.config.metadata,\n        clientMime: this.file.mime,\n        clientName: this.file.name,\n        filename: this.fileKey!.split('/').pop(),\n        size: this.file.size,\n        clientExtension: this.file.extension,\n      })\n      .then(r => r.data)\n      .catch();\n  }\n\n  private prepareChunks() {\n    this.chunks = [];\n    // at least 5MB per request, at most 10k requests\n    const minChunkSize = Math.max(5 * oneMB, Math.ceil(this.file.size / 10000));\n    const chunkSize = Math.max(desiredChunkSize, minChunkSize);\n\n    // Upload zero-sized files in one zero-sized chunk\n    if (this.file.size === 0) {\n      this.chunks.push({\n        blob: this.file.native,\n        done: false,\n        partNumber: 1,\n        bytesUploaded: 0,\n      });\n    } else {\n      let partNumber = 1;\n      for (let i = 0; i < this.file.size; i += chunkSize) {\n        const end = Math.min(this.file.size, i + chunkSize);\n        // check if this part was already uploaded previously\n        const previouslyUploaded = this.uploadedParts?.find(\n          p => p.PartNumber === partNumber\n        );\n        this.chunks.push({\n          blob: this.file.native.slice(i, end),\n          done: !!previouslyUploaded,\n          partNumber,\n          etag: previouslyUploaded ? previouslyUploaded.ETag : undefined,\n          bytesUploaded: previouslyUploaded?.Size\n            ? parseInt(previouslyUploaded?.Size)\n            : 0,\n        });\n        partNumber++;\n      }\n    }\n  }\n\n  private abortUploadOnS3() {\n    return apiClient.post('s3/multipart/abort', {\n      key: this.fileKey,\n      uploadId: this.uploadId,\n    });\n  }\n\n  static async create(\n    file: UploadedFile,\n    config: UploadStrategyConfig\n  ): Promise<S3MultipartUpload> {\n    return new S3MultipartUpload(file, config);\n  }\n}\n","export interface BackendMetadata {\n  disk?: Disk;\n  diskPrefix?: string;\n  relativePath?: string | null;\n  [key: string]: number | string | null | undefined;\n}\n\nexport enum Disk {\n  public = 'public',\n  uploads = 'uploads',\n}\n","/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.7.2';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasatob = typeof atob === 'function';\nconst _hasbtoa = typeof btoa === 'function';\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = Array.prototype.slice.call(b64ch);\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it, fn = (x) => x) => new Uint8Array(Array.prototype.slice.call(it, 0).map(fn));\nconst _mkUriSafe = (src) => src\n    .replace(/=/g, '').replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = _hasbtoa ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 §5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 §5.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, bin = '', r1, r2;\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        bin += r1 === 64 ? _fromCC(u24 >> 16 & 255)\n            : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255)\n                : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);\n    }\n    return bin;\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = _hasatob ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a), c => c.charCodeAt(0));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins,\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar DetailedError = /*#__PURE__*/function (_Error) {\n  _inherits(DetailedError, _Error);\n\n  var _super = _createSuper(DetailedError);\n\n  function DetailedError(message) {\n    var _this;\n\n    var causingErr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var req = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var res = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n    _classCallCheck(this, DetailedError);\n\n    _this = _super.call(this, message);\n    _this.originalRequest = req;\n    _this.originalResponse = res;\n    _this.causingError = causingErr;\n\n    if (causingErr != null) {\n      message += \", caused by \".concat(causingErr.toString());\n    }\n\n    if (req != null) {\n      var requestId = req.getHeader('X-Request-ID') || 'n/a';\n      var method = req.getMethod();\n      var url = req.getURL();\n      var status = res ? res.getStatus() : 'n/a';\n      var body = res ? res.getBody() || '' : 'n/a';\n      message += \", originated from request (method: \".concat(method, \", url: \").concat(url, \", response code: \").concat(status, \", response text: \").concat(body, \", request id: \").concat(requestId, \")\");\n    }\n\n    _this.message = message;\n    return _this;\n  }\n\n  return _createClass(DetailedError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nexport default DetailedError;","/**\n * Generate a UUID v4 based on random numbers. We intentioanlly use the less\n * secure Math.random function here since the more secure crypto.getRandomNumbers\n * is not available on all platforms.\n * This is not a problem for us since we use the UUID only for generating a\n * request ID, so we can correlate server logs to client errors.\n *\n * This function is taken from following site:\n * https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n *\n * @return {string} The generate UUID\n */\nexport default function uuid() {\n  /* eslint-disable no-bitwise */\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0;\n    var v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport { Base64 } from 'js-base64';\nimport URL from 'url-parse';\nimport DetailedError from './error.js';\nimport { log } from './logger.js';\nimport uuid from './uuid.js';\nvar defaultOptions = {\n  endpoint: null,\n  uploadUrl: null,\n  metadata: {},\n  fingerprint: null,\n  uploadSize: null,\n  onProgress: null,\n  onChunkComplete: null,\n  onSuccess: null,\n  onError: null,\n  _onUploadUrlAvailable: null,\n  overridePatchMethod: false,\n  headers: {},\n  addRequestId: false,\n  onBeforeRequest: null,\n  onAfterResponse: null,\n  onShouldRetry: null,\n  chunkSize: Infinity,\n  retryDelays: [0, 1000, 3000, 5000],\n  parallelUploads: 1,\n  parallelUploadBoundaries: null,\n  storeFingerprintForResuming: true,\n  removeFingerprintOnSuccess: false,\n  uploadLengthDeferred: false,\n  uploadDataDuringCreation: false,\n  urlStorage: null,\n  fileReader: null,\n  httpStack: null\n};\n\nvar BaseUpload = /*#__PURE__*/function () {\n  function BaseUpload(file, options) {\n    _classCallCheck(this, BaseUpload);\n\n    // Warn about removed options from previous versions\n    if ('resume' in options) {\n      console.log('tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead.'); // eslint-disable-line no-console\n    } // The default options will already be added from the wrapper classes.\n\n\n    this.options = options; // Cast chunkSize to integer\n\n    this.options.chunkSize = Number(this.options.chunkSize); // The storage module used to store URLs\n\n    this._urlStorage = this.options.urlStorage; // The underlying File/Blob object\n\n    this.file = file; // The URL against which the file will be uploaded\n\n    this.url = null; // The underlying request object for the current PATCH request\n\n    this._req = null; // The fingerpinrt for the current file (set after start())\n\n    this._fingerprint = null; // The key that the URL storage returned when saving an URL with a fingerprint,\n\n    this._urlStorageKey = null; // The offset used in the current PATCH request\n\n    this._offset = null; // True if the current PATCH request has been aborted\n\n    this._aborted = false; // The file's size in bytes\n\n    this._size = null; // The Source object which will wrap around the given file and provides us\n    // with a unified interface for getting its size and slice chunks from its\n    // content allowing us to easily handle Files, Blobs, Buffers and Streams.\n\n    this._source = null; // The current count of attempts which have been made. Zero indicates none.\n\n    this._retryAttempt = 0; // The timeout's ID which is used to delay the next retry\n\n    this._retryTimeout = null; // The offset of the remote upload before the latest attempt was started.\n\n    this._offsetBeforeRetry = 0; // An array of BaseUpload instances which are used for uploading the different\n    // parts, if the parallelUploads option is used.\n\n    this._parallelUploads = null; // An array of upload URLs which are used for uploading the different\n    // parts, if the parallelUploads option is used.\n\n    this._parallelUploadUrls = null;\n  }\n  /**\n   * Use the Termination extension to delete an upload from the server by sending a DELETE\n   * request to the specified upload URL. This is only possible if the server supports the\n   * Termination extension. If the `options.retryDelays` property is set, the method will\n   * also retry if an error ocurrs.\n   *\n   * @param {String} url The upload's URL which will be terminated.\n   * @param {object} options Optional options for influencing HTTP requests.\n   * @return {Promise} The Promise will be resolved/rejected when the requests finish.\n   */\n\n\n  _createClass(BaseUpload, [{\n    key: \"findPreviousUploads\",\n    value: function findPreviousUploads() {\n      var _this = this;\n\n      return this.options.fingerprint(this.file, this.options).then(function (fingerprint) {\n        return _this._urlStorage.findUploadsByFingerprint(fingerprint);\n      });\n    }\n  }, {\n    key: \"resumeFromPreviousUpload\",\n    value: function resumeFromPreviousUpload(previousUpload) {\n      this.url = previousUpload.uploadUrl || null;\n      this._parallelUploadUrls = previousUpload.parallelUploadUrls || null;\n      this._urlStorageKey = previousUpload.urlStorageKey;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this2 = this;\n\n      var file = this.file;\n\n      if (!file) {\n        this._emitError(new Error('tus: no file or stream to upload provided'));\n\n        return;\n      }\n\n      if (!this.options.endpoint && !this.options.uploadUrl && !this.url) {\n        this._emitError(new Error('tus: neither an endpoint or an upload URL is provided'));\n\n        return;\n      }\n\n      var retryDelays = this.options.retryDelays;\n\n      if (retryDelays != null && Object.prototype.toString.call(retryDelays) !== '[object Array]') {\n        this._emitError(new Error('tus: the `retryDelays` option must either be an array or null'));\n\n        return;\n      }\n\n      if (this.options.parallelUploads > 1) {\n        // Test which options are incompatible with parallel uploads.\n        for (var _i = 0, _arr = ['uploadUrl', 'uploadSize', 'uploadLengthDeferred']; _i < _arr.length; _i++) {\n          var optionName = _arr[_i];\n\n          if (this.options[optionName]) {\n            this._emitError(new Error(\"tus: cannot use the \".concat(optionName, \" option when parallelUploads is enabled\")));\n\n            return;\n          }\n        }\n      }\n\n      if (this.options.parallelUploadBoundaries) {\n        if (this.options.parallelUploads <= 1) {\n          this._emitError(new Error('tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled'));\n\n          return;\n        }\n\n        if (this.options.parallelUploads !== this.options.parallelUploadBoundaries.length) {\n          this._emitError(new Error('tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`'));\n\n          return;\n        }\n      }\n\n      this.options.fingerprint(file, this.options).then(function (fingerprint) {\n        if (fingerprint == null) {\n          log('No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.');\n        } else {\n          log(\"Calculated fingerprint: \".concat(fingerprint));\n        }\n\n        _this2._fingerprint = fingerprint;\n\n        if (_this2._source) {\n          return _this2._source;\n        }\n\n        return _this2.options.fileReader.openFile(file, _this2.options.chunkSize);\n      }).then(function (source) {\n        _this2._source = source; // First, we look at the uploadLengthDeferred option.\n        // Next, we check if the caller has supplied a manual upload size.\n        // Finally, we try to use the calculated size from the source object.\n\n        if (_this2.options.uploadLengthDeferred) {\n          _this2._size = null;\n        } else if (_this2.options.uploadSize != null) {\n          _this2._size = Number(_this2.options.uploadSize);\n\n          if (Number.isNaN(_this2._size)) {\n            _this2._emitError(new Error('tus: cannot convert `uploadSize` option into a number'));\n\n            return;\n          }\n        } else {\n          _this2._size = _this2._source.size;\n\n          if (_this2._size == null) {\n            _this2._emitError(new Error(\"tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option\"));\n\n            return;\n          }\n        } // If the upload was configured to use multiple requests or if we resume from\n        // an upload which used multiple requests, we start a parallel upload.\n\n\n        if (_this2.options.parallelUploads > 1 || _this2._parallelUploadUrls != null) {\n          _this2._startParallelUpload();\n        } else {\n          _this2._startSingleUpload();\n        }\n      })[\"catch\"](function (err) {\n        _this2._emitError(err);\n      });\n    }\n    /**\n     * Initiate the uploading procedure for a parallelized upload, where one file is split into\n     * multiple request which are run in parallel.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_startParallelUpload\",\n    value: function _startParallelUpload() {\n      var _this$options$paralle,\n          _this3 = this;\n\n      var totalSize = this._size;\n      var totalProgress = 0;\n      this._parallelUploads = [];\n      var partCount = this._parallelUploadUrls != null ? this._parallelUploadUrls.length : this.options.parallelUploads; // The input file will be split into multiple slices which are uploaded in separate\n      // requests. Here we get the start and end position for the slices.\n\n      var parts = (_this$options$paralle = this.options.parallelUploadBoundaries) !== null && _this$options$paralle !== void 0 ? _this$options$paralle : splitSizeIntoParts(this._source.size, partCount); // Attach URLs from previous uploads, if available.\n\n      if (this._parallelUploadUrls) {\n        parts.forEach(function (part, index) {\n          part.uploadUrl = _this3._parallelUploadUrls[index] || null;\n        });\n      } // Create an empty list for storing the upload URLs\n\n\n      this._parallelUploadUrls = new Array(parts.length); // Generate a promise for each slice that will be resolve if the respective\n      // upload is completed.\n\n      var uploads = parts.map(function (part, index) {\n        var lastPartProgress = 0;\n        return _this3._source.slice(part.start, part.end).then(function (_ref) {\n          var value = _ref.value;\n          return new Promise(function (resolve, reject) {\n            // Merge with the user supplied options but overwrite some values.\n            var options = _objectSpread(_objectSpread({}, _this3.options), {}, {\n              // If available, the partial upload should be resumed from a previous URL.\n              uploadUrl: part.uploadUrl || null,\n              // We take manually care of resuming for partial uploads, so they should\n              // not be stored in the URL storage.\n              storeFingerprintForResuming: false,\n              removeFingerprintOnSuccess: false,\n              // Reset the parallelUploads option to not cause recursion.\n              parallelUploads: 1,\n              // Reset this option as we are not doing a parallel upload.\n              parallelUploadBoundaries: null,\n              metadata: {},\n              // Add the header to indicate the this is a partial upload.\n              headers: _objectSpread(_objectSpread({}, _this3.options.headers), {}, {\n                'Upload-Concat': 'partial'\n              }),\n              // Reject or resolve the promise if the upload errors or completes.\n              onSuccess: resolve,\n              onError: reject,\n              // Based in the progress for this partial upload, calculate the progress\n              // for the entire final upload.\n              onProgress: function onProgress(newPartProgress) {\n                totalProgress = totalProgress - lastPartProgress + newPartProgress;\n                lastPartProgress = newPartProgress;\n\n                _this3._emitProgress(totalProgress, totalSize);\n              },\n              // Wait until every partial upload has an upload URL, so we can add\n              // them to the URL storage.\n              _onUploadUrlAvailable: function _onUploadUrlAvailable() {\n                _this3._parallelUploadUrls[index] = upload.url; // Test if all uploads have received an URL\n\n                if (_this3._parallelUploadUrls.filter(function (u) {\n                  return Boolean(u);\n                }).length === parts.length) {\n                  _this3._saveUploadInUrlStorage();\n                }\n              }\n            });\n\n            var upload = new BaseUpload(value, options);\n            upload.start(); // Store the upload in an array, so we can later abort them if necessary.\n\n            _this3._parallelUploads.push(upload);\n          });\n        });\n      });\n      var req; // Wait until all partial uploads are finished and we can send the POST request for\n      // creating the final upload.\n\n      Promise.all(uploads).then(function () {\n        req = _this3._openRequest('POST', _this3.options.endpoint);\n        req.setHeader('Upload-Concat', \"final;\".concat(_this3._parallelUploadUrls.join(' '))); // Add metadata if values have been added\n\n        var metadata = encodeMetadata(_this3.options.metadata);\n\n        if (metadata !== '') {\n          req.setHeader('Upload-Metadata', metadata);\n        }\n\n        return _this3._sendRequest(req, null);\n      }).then(function (res) {\n        if (!inStatusCategory(res.getStatus(), 200)) {\n          _this3._emitHttpError(req, res, 'tus: unexpected response while creating upload');\n\n          return;\n        }\n\n        var location = res.getHeader('Location');\n\n        if (location == null) {\n          _this3._emitHttpError(req, res, 'tus: invalid or missing Location header');\n\n          return;\n        }\n\n        _this3.url = resolveUrl(_this3.options.endpoint, location);\n        log(\"Created upload at \".concat(_this3.url));\n\n        _this3._emitSuccess();\n      })[\"catch\"](function (err) {\n        _this3._emitError(err);\n      });\n    }\n    /**\n     * Initiate the uploading procedure for a non-parallel upload. Here the entire file is\n     * uploaded in a sequential matter.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_startSingleUpload\",\n    value: function _startSingleUpload() {\n      // Reset the aborted flag when the upload is started or else the\n      // _performUpload will stop before sending a request if the upload has been\n      // aborted previously.\n      this._aborted = false; // The upload had been started previously and we should reuse this URL.\n\n      if (this.url != null) {\n        log(\"Resuming upload from previous URL: \".concat(this.url));\n\n        this._resumeUpload();\n\n        return;\n      } // A URL has manually been specified, so we try to resume\n\n\n      if (this.options.uploadUrl != null) {\n        log(\"Resuming upload from provided URL: \".concat(this.options.uploadUrl));\n        this.url = this.options.uploadUrl;\n\n        this._resumeUpload();\n\n        return;\n      } // An upload has not started for the file yet, so we start a new one\n\n\n      log('Creating a new upload');\n\n      this._createUpload();\n    }\n    /**\n     * Abort any running request and stop the current upload. After abort is called, no event\n     * handler will be invoked anymore. You can use the `start` method to resume the upload\n     * again.\n     * If `shouldTerminate` is true, the `terminate` function will be called to remove the\n     * current upload from the server.\n     *\n     * @param {boolean} shouldTerminate True if the upload should be deleted from the server.\n     * @return {Promise} The Promise will be resolved/rejected when the requests finish.\n     */\n\n  }, {\n    key: \"abort\",\n    value: function abort(shouldTerminate) {\n      var _this4 = this;\n\n      // Stop any parallel partial uploads, that have been started in _startParallelUploads.\n      if (this._parallelUploads != null) {\n        this._parallelUploads.forEach(function (upload) {\n          upload.abort(shouldTerminate);\n        });\n      } // Stop any current running request.\n\n\n      if (this._req !== null) {\n        this._req.abort(); // Note: We do not close the file source here, so the user can resume in the future.\n\n      }\n\n      this._aborted = true; // Stop any timeout used for initiating a retry.\n\n      if (this._retryTimeout != null) {\n        clearTimeout(this._retryTimeout);\n        this._retryTimeout = null;\n      }\n\n      if (!shouldTerminate || this.url == null) {\n        return Promise.resolve();\n      }\n\n      return BaseUpload.terminate(this.url, this.options) // Remove entry from the URL storage since the upload URL is no longer valid.\n      .then(function () {\n        return _this4._removeFromUrlStorage();\n      });\n    }\n  }, {\n    key: \"_emitHttpError\",\n    value: function _emitHttpError(req, res, message, causingErr) {\n      this._emitError(new DetailedError(message, causingErr, req, res));\n    }\n  }, {\n    key: \"_emitError\",\n    value: function _emitError(err) {\n      var _this5 = this;\n\n      // Do not emit errors, e.g. from aborted HTTP requests, if the upload has been stopped.\n      if (this._aborted) return; // Check if we should retry, when enabled, before sending the error to the user.\n\n      if (this.options.retryDelays != null) {\n        // We will reset the attempt counter if\n        // - we were already able to connect to the server (offset != null) and\n        // - we were able to upload a small chunk of data to the server\n        var shouldResetDelays = this._offset != null && this._offset > this._offsetBeforeRetry;\n\n        if (shouldResetDelays) {\n          this._retryAttempt = 0;\n        }\n\n        if (shouldRetry(err, this._retryAttempt, this.options)) {\n          var delay = this.options.retryDelays[this._retryAttempt++];\n          this._offsetBeforeRetry = this._offset;\n          this._retryTimeout = setTimeout(function () {\n            _this5.start();\n          }, delay);\n          return;\n        }\n      }\n\n      if (typeof this.options.onError === 'function') {\n        this.options.onError(err);\n      } else {\n        throw err;\n      }\n    }\n    /**\n     * Publishes notification if the upload has been successfully completed.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_emitSuccess\",\n    value: function _emitSuccess() {\n      if (this.options.removeFingerprintOnSuccess) {\n        // Remove stored fingerprint and corresponding endpoint. This causes\n        // new uploads of the same file to be treated as a different file.\n        this._removeFromUrlStorage();\n      }\n\n      if (typeof this.options.onSuccess === 'function') {\n        this.options.onSuccess();\n      }\n    }\n    /**\n     * Publishes notification when data has been sent to the server. This\n     * data may not have been accepted by the server yet.\n     *\n     * @param {number} bytesSent  Number of bytes sent to the server.\n     * @param {number} bytesTotal Total number of bytes to be sent to the server.\n     * @api private\n     */\n\n  }, {\n    key: \"_emitProgress\",\n    value: function _emitProgress(bytesSent, bytesTotal) {\n      if (typeof this.options.onProgress === 'function') {\n        this.options.onProgress(bytesSent, bytesTotal);\n      }\n    }\n    /**\n     * Publishes notification when a chunk of data has been sent to the server\n     * and accepted by the server.\n     * @param {number} chunkSize  Size of the chunk that was accepted by the server.\n     * @param {number} bytesAccepted Total number of bytes that have been\n     *                                accepted by the server.\n     * @param {number} bytesTotal Total number of bytes to be sent to the server.\n     * @api private\n     */\n\n  }, {\n    key: \"_emitChunkComplete\",\n    value: function _emitChunkComplete(chunkSize, bytesAccepted, bytesTotal) {\n      if (typeof this.options.onChunkComplete === 'function') {\n        this.options.onChunkComplete(chunkSize, bytesAccepted, bytesTotal);\n      }\n    }\n    /**\n     * Create a new upload using the creation extension by sending a POST\n     * request to the endpoint. After successful creation the file will be\n     * uploaded\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_createUpload\",\n    value: function _createUpload() {\n      var _this6 = this;\n\n      if (!this.options.endpoint) {\n        this._emitError(new Error('tus: unable to create upload because no endpoint is provided'));\n\n        return;\n      }\n\n      var req = this._openRequest('POST', this.options.endpoint);\n\n      if (this.options.uploadLengthDeferred) {\n        req.setHeader('Upload-Defer-Length', 1);\n      } else {\n        req.setHeader('Upload-Length', this._size);\n      } // Add metadata if values have been added\n\n\n      var metadata = encodeMetadata(this.options.metadata);\n\n      if (metadata !== '') {\n        req.setHeader('Upload-Metadata', metadata);\n      }\n\n      var promise;\n\n      if (this.options.uploadDataDuringCreation && !this.options.uploadLengthDeferred) {\n        this._offset = 0;\n        promise = this._addChunkToRequest(req);\n      } else {\n        promise = this._sendRequest(req, null);\n      }\n\n      promise.then(function (res) {\n        if (!inStatusCategory(res.getStatus(), 200)) {\n          _this6._emitHttpError(req, res, 'tus: unexpected response while creating upload');\n\n          return;\n        }\n\n        var location = res.getHeader('Location');\n\n        if (location == null) {\n          _this6._emitHttpError(req, res, 'tus: invalid or missing Location header');\n\n          return;\n        }\n\n        _this6.url = resolveUrl(_this6.options.endpoint, location);\n        log(\"Created upload at \".concat(_this6.url));\n\n        if (typeof _this6.options._onUploadUrlAvailable === 'function') {\n          _this6.options._onUploadUrlAvailable();\n        }\n\n        if (_this6._size === 0) {\n          // Nothing to upload and file was successfully created\n          _this6._emitSuccess();\n\n          _this6._source.close();\n\n          return;\n        }\n\n        _this6._saveUploadInUrlStorage().then(function () {\n          if (_this6.options.uploadDataDuringCreation) {\n            _this6._handleUploadResponse(req, res);\n          } else {\n            _this6._offset = 0;\n\n            _this6._performUpload();\n          }\n        });\n      })[\"catch\"](function (err) {\n        _this6._emitHttpError(req, null, 'tus: failed to create upload', err);\n      });\n    }\n    /*\n     * Try to resume an existing upload. First a HEAD request will be sent\n     * to retrieve the offset. If the request fails a new upload will be\n     * created. In the case of a successful response the file will be uploaded.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_resumeUpload\",\n    value: function _resumeUpload() {\n      var _this7 = this;\n\n      var req = this._openRequest('HEAD', this.url);\n\n      var promise = this._sendRequest(req, null);\n\n      promise.then(function (res) {\n        var status = res.getStatus();\n\n        if (!inStatusCategory(status, 200)) {\n          // If the upload is locked (indicated by the 423 Locked status code), we\n          // emit an error instead of directly starting a new upload. This way the\n          // retry logic can catch the error and will retry the upload. An upload\n          // is usually locked for a short period of time and will be available\n          // afterwards.\n          if (status === 423) {\n            _this7._emitHttpError(req, res, 'tus: upload is currently locked; retry later');\n\n            return;\n          }\n\n          if (inStatusCategory(status, 400)) {\n            // Remove stored fingerprint and corresponding endpoint,\n            // on client errors since the file can not be found\n            _this7._removeFromUrlStorage();\n          }\n\n          if (!_this7.options.endpoint) {\n            // Don't attempt to create a new upload if no endpoint is provided.\n            _this7._emitHttpError(req, res, 'tus: unable to resume upload (new upload cannot be created without an endpoint)');\n\n            return;\n          } // Try to create a new upload\n\n\n          _this7.url = null;\n\n          _this7._createUpload();\n\n          return;\n        }\n\n        var offset = parseInt(res.getHeader('Upload-Offset'), 10);\n\n        if (Number.isNaN(offset)) {\n          _this7._emitHttpError(req, res, 'tus: invalid or missing offset value');\n\n          return;\n        }\n\n        var length = parseInt(res.getHeader('Upload-Length'), 10);\n\n        if (Number.isNaN(length) && !_this7.options.uploadLengthDeferred) {\n          _this7._emitHttpError(req, res, 'tus: invalid or missing length value');\n\n          return;\n        }\n\n        if (typeof _this7.options._onUploadUrlAvailable === 'function') {\n          _this7.options._onUploadUrlAvailable();\n        }\n\n        _this7._saveUploadInUrlStorage().then(function () {\n          // Upload has already been completed and we do not need to send additional\n          // data to the server\n          if (offset === length) {\n            _this7._emitProgress(length, length);\n\n            _this7._emitSuccess();\n\n            return;\n          }\n\n          _this7._offset = offset;\n\n          _this7._performUpload();\n        });\n      })[\"catch\"](function (err) {\n        _this7._emitHttpError(req, null, 'tus: failed to resume upload', err);\n      });\n    }\n    /**\n     * Start uploading the file using PATCH requests. The file will be divided\n     * into chunks as specified in the chunkSize option. During the upload\n     * the onProgress event handler may be invoked multiple times.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_performUpload\",\n    value: function _performUpload() {\n      var _this8 = this;\n\n      // If the upload has been aborted, we will not send the next PATCH request.\n      // This is important if the abort method was called during a callback, such\n      // as onChunkComplete or onProgress.\n      if (this._aborted) {\n        return;\n      }\n\n      var req; // Some browser and servers may not support the PATCH method. For those\n      // cases, you can tell tus-js-client to use a POST request with the\n      // X-HTTP-Method-Override header for simulating a PATCH request.\n\n      if (this.options.overridePatchMethod) {\n        req = this._openRequest('POST', this.url);\n        req.setHeader('X-HTTP-Method-Override', 'PATCH');\n      } else {\n        req = this._openRequest('PATCH', this.url);\n      }\n\n      req.setHeader('Upload-Offset', this._offset);\n\n      var promise = this._addChunkToRequest(req);\n\n      promise.then(function (res) {\n        if (!inStatusCategory(res.getStatus(), 200)) {\n          _this8._emitHttpError(req, res, 'tus: unexpected response while uploading chunk');\n\n          return;\n        }\n\n        _this8._handleUploadResponse(req, res);\n      })[\"catch\"](function (err) {\n        // Don't emit an error if the upload was aborted manually\n        if (_this8._aborted) {\n          return;\n        }\n\n        _this8._emitHttpError(req, null, \"tus: failed to upload chunk at offset \".concat(_this8._offset), err);\n      });\n    }\n    /**\n     * _addChunktoRequest reads a chunk from the source and sends it using the\n     * supplied request object. It will not handle the response.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_addChunkToRequest\",\n    value: function _addChunkToRequest(req) {\n      var _this9 = this;\n\n      var start = this._offset;\n      var end = this._offset + this.options.chunkSize;\n      req.setProgressHandler(function (bytesSent) {\n        _this9._emitProgress(start + bytesSent, _this9._size);\n      });\n      req.setHeader('Content-Type', 'application/offset+octet-stream'); // The specified chunkSize may be Infinity or the calcluated end position\n      // may exceed the file's size. In both cases, we limit the end position to\n      // the input's total size for simpler calculations and correctness.\n\n      if ((end === Infinity || end > this._size) && !this.options.uploadLengthDeferred) {\n        end = this._size;\n      }\n\n      return this._source.slice(start, end).then(function (_ref2) {\n        var value = _ref2.value,\n            done = _ref2.done;\n\n        // If the upload length is deferred, the upload size was not specified during\n        // upload creation. So, if the file reader is done reading, we know the total\n        // upload size and can tell the tus server.\n        if (_this9.options.uploadLengthDeferred && done) {\n          _this9._size = _this9._offset + (value && value.size ? value.size : 0);\n          req.setHeader('Upload-Length', _this9._size);\n        }\n\n        if (value === null) {\n          return _this9._sendRequest(req);\n        }\n\n        _this9._emitProgress(_this9._offset, _this9._size);\n\n        return _this9._sendRequest(req, value);\n      });\n    }\n    /**\n     * _handleUploadResponse is used by requests that haven been sent using _addChunkToRequest\n     * and already have received a response.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_handleUploadResponse\",\n    value: function _handleUploadResponse(req, res) {\n      var offset = parseInt(res.getHeader('Upload-Offset'), 10);\n\n      if (Number.isNaN(offset)) {\n        this._emitHttpError(req, res, 'tus: invalid or missing offset value');\n\n        return;\n      }\n\n      this._emitProgress(offset, this._size);\n\n      this._emitChunkComplete(offset - this._offset, offset, this._size);\n\n      this._offset = offset;\n\n      if (offset === this._size) {\n        // Yay, finally done :)\n        this._emitSuccess();\n\n        this._source.close();\n\n        return;\n      }\n\n      this._performUpload();\n    }\n    /**\n     * Create a new HTTP request object with the given method and URL.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_openRequest\",\n    value: function _openRequest(method, url) {\n      var req = openRequest(method, url, this.options);\n      this._req = req;\n      return req;\n    }\n    /**\n     * Remove the entry in the URL storage, if it has been saved before.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_removeFromUrlStorage\",\n    value: function _removeFromUrlStorage() {\n      var _this10 = this;\n\n      if (!this._urlStorageKey) return;\n\n      this._urlStorage.removeUpload(this._urlStorageKey)[\"catch\"](function (err) {\n        _this10._emitError(err);\n      });\n\n      this._urlStorageKey = null;\n    }\n    /**\n     * Add the upload URL to the URL storage, if possible.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_saveUploadInUrlStorage\",\n    value: function _saveUploadInUrlStorage() {\n      var _this11 = this;\n\n      // We do not store the upload URL\n      // - if it was disabled in the option, or\n      // - if no fingerprint was calculated for the input (i.e. a stream), or\n      // - if the URL is already stored (i.e. key is set alread).\n      if (!this.options.storeFingerprintForResuming || !this._fingerprint || this._urlStorageKey !== null) {\n        return Promise.resolve();\n      }\n\n      var storedUpload = {\n        size: this._size,\n        metadata: this.options.metadata,\n        creationTime: new Date().toString()\n      };\n\n      if (this._parallelUploads) {\n        // Save multiple URLs if the parallelUploads option is used ...\n        storedUpload.parallelUploadUrls = this._parallelUploadUrls;\n      } else {\n        // ... otherwise we just save the one available URL.\n        storedUpload.uploadUrl = this.url;\n      }\n\n      return this._urlStorage.addUpload(this._fingerprint, storedUpload).then(function (urlStorageKey) {\n        _this11._urlStorageKey = urlStorageKey;\n      });\n    }\n    /**\n     * Send a request with the provided body.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_sendRequest\",\n    value: function _sendRequest(req) {\n      var body = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      return sendRequest(req, body, this.options);\n    }\n  }], [{\n    key: \"terminate\",\n    value: function terminate(url) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var req = openRequest('DELETE', url, options);\n      return sendRequest(req, null, options).then(function (res) {\n        // A 204 response indicates a successfull request\n        if (res.getStatus() === 204) {\n          return;\n        }\n\n        throw new DetailedError('tus: unexpected response while terminating upload', null, req, res);\n      })[\"catch\"](function (err) {\n        if (!(err instanceof DetailedError)) {\n          err = new DetailedError('tus: failed to terminate upload', err, req, null);\n        }\n\n        if (!shouldRetry(err, 0, options)) {\n          throw err;\n        } // Instead of keeping track of the retry attempts, we remove the first element from the delays\n        // array. If the array is empty, all retry attempts are used up and we will bubble up the error.\n        // We recursively call the terminate function will removing elements from the retryDelays array.\n\n\n        var delay = options.retryDelays[0];\n        var remainingDelays = options.retryDelays.slice(1);\n\n        var newOptions = _objectSpread(_objectSpread({}, options), {}, {\n          retryDelays: remainingDelays\n        });\n\n        return new Promise(function (resolve) {\n          return setTimeout(resolve, delay);\n        }).then(function () {\n          return BaseUpload.terminate(url, newOptions);\n        });\n      });\n    }\n  }]);\n\n  return BaseUpload;\n}();\n\nfunction encodeMetadata(metadata) {\n  return Object.entries(metadata).map(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        key = _ref4[0],\n        value = _ref4[1];\n\n    return \"\".concat(key, \" \").concat(Base64.encode(String(value)));\n  }).join(',');\n}\n/**\n * Checks whether a given status is in the range of the expected category.\n * For example, only a status between 200 and 299 will satisfy the category 200.\n *\n * @api private\n */\n\n\nfunction inStatusCategory(status, category) {\n  return status >= category && status < category + 100;\n}\n/**\n * Create a new HTTP request with the specified method and URL.\n * The necessary headers that are included in every request\n * will be added, including the request ID.\n *\n * @api private\n */\n\n\nfunction openRequest(method, url, options) {\n  var req = options.httpStack.createRequest(method, url);\n  req.setHeader('Tus-Resumable', '1.0.0');\n  var headers = options.headers || {};\n  Object.entries(headers).forEach(function (_ref5) {\n    var _ref6 = _slicedToArray(_ref5, 2),\n        name = _ref6[0],\n        value = _ref6[1];\n\n    req.setHeader(name, value);\n  });\n\n  if (options.addRequestId) {\n    var requestId = uuid();\n    req.setHeader('X-Request-ID', requestId);\n  }\n\n  return req;\n}\n/**\n * Send a request with the provided body while invoking the onBeforeRequest\n * and onAfterResponse callbacks.\n *\n * @api private\n */\n\n\nfunction sendRequest(req, body, options) {\n  var onBeforeRequestPromise = typeof options.onBeforeRequest === 'function' ? Promise.resolve(options.onBeforeRequest(req)) : Promise.resolve();\n  return onBeforeRequestPromise.then(function () {\n    return req.send(body).then(function (res) {\n      var onAfterResponsePromise = typeof options.onAfterResponse === 'function' ? Promise.resolve(options.onAfterResponse(req, res)) : Promise.resolve();\n      return onAfterResponsePromise.then(function () {\n        return res;\n      });\n    });\n  });\n}\n/**\n * Checks whether the browser running this code has internet access.\n * This function will always return true in the node.js environment\n *\n * @api private\n */\n\n\nfunction isOnline() {\n  var online = true;\n\n  if (typeof window !== 'undefined' && 'navigator' in window // eslint-disable-line no-undef\n  && window.navigator.onLine === false) {\n    // eslint-disable-line no-undef\n    online = false;\n  }\n\n  return online;\n}\n/**\n * Checks whether or not it is ok to retry a request.\n * @param {Error} err the error returned from the last request\n * @param {number} retryAttempt the number of times the request has already been retried\n * @param {object} options tus Upload options\n *\n * @api private\n */\n\n\nfunction shouldRetry(err, retryAttempt, options) {\n  // We only attempt a retry if\n  // - retryDelays option is set\n  // - we didn't exceed the maxium number of retries, yet, and\n  // - this error was caused by a request or it's response and\n  // - the error is server error (i.e. not a status 4xx except a 409 or 423) or\n  // a onShouldRetry is specified and returns true\n  // - the browser does not indicate that we are offline\n  if (options.retryDelays == null || retryAttempt >= options.retryDelays.length || err.originalRequest == null) {\n    return false;\n  }\n\n  if (options && typeof options.onShouldRetry === 'function') {\n    return options.onShouldRetry(err, retryAttempt, options);\n  }\n\n  var status = err.originalResponse ? err.originalResponse.getStatus() : 0;\n  return (!inStatusCategory(status, 400) || status === 409 || status === 423) && isOnline();\n}\n/**\n * Resolve a relative link given the origin as source. For example,\n * if a HTTP request to http://example.com/files/ returns a Location\n * header with the value /upload/abc, the resolved URL will be:\n * http://example.com/upload/abc\n */\n\n\nfunction resolveUrl(origin, link) {\n  return new URL(link, origin).toString();\n}\n/**\n * Calculate the start and end positions for the parts if an upload\n * is split into multiple parallel requests.\n *\n * @param {number} totalSize The byte size of the upload, which will be split.\n * @param {number} partCount The number in how many parts the upload will be split.\n * @return {object[]}\n * @api private\n */\n\n\nfunction splitSizeIntoParts(totalSize, partCount) {\n  var partSize = Math.floor(totalSize / partCount);\n  var parts = [];\n\n  for (var i = 0; i < partCount; i++) {\n    parts.push({\n      start: partSize * i,\n      end: partSize * (i + 1)\n    });\n  }\n\n  parts[partCount - 1].end = totalSize;\n  return parts;\n}\n\nBaseUpload.defaultOptions = defaultOptions;\nexport default BaseUpload;","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/* eslint no-unused-vars: \"off\" */\nvar NoopUrlStorage = /*#__PURE__*/function () {\n  function NoopUrlStorage() {\n    _classCallCheck(this, NoopUrlStorage);\n  }\n\n  _createClass(NoopUrlStorage, [{\n    key: \"listAllUploads\",\n    value: function listAllUploads() {\n      return Promise.resolve([]);\n    }\n  }, {\n    key: \"findUploadsByFingerprint\",\n    value: function findUploadsByFingerprint(fingerprint) {\n      return Promise.resolve([]);\n    }\n  }, {\n    key: \"removeUpload\",\n    value: function removeUpload(urlStorageKey) {\n      return Promise.resolve();\n    }\n  }, {\n    key: \"addUpload\",\n    value: function addUpload(fingerprint, upload) {\n      return Promise.resolve(null);\n    }\n  }]);\n\n  return NoopUrlStorage;\n}();\n\nexport { NoopUrlStorage as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nvar hasStorage = false;\n\ntry {\n  hasStorage = 'localStorage' in window; // Attempt to store and read entries from the local storage to detect Private\n  // Mode on Safari on iOS (see #49)\n\n  var key = 'tusSupport';\n  localStorage.setItem(key, localStorage.getItem(key));\n} catch (e) {\n  // If we try to access localStorage inside a sandboxed iframe, a SecurityError\n  // is thrown. When in private mode on iOS Safari, a QuotaExceededError is\n  // thrown (see #49)\n  if (e.code === e.SECURITY_ERR || e.code === e.QUOTA_EXCEEDED_ERR) {\n    hasStorage = false;\n  } else {\n    throw e;\n  }\n}\n\nexport var canStoreURLs = hasStorage;\nexport var WebStorageUrlStorage = /*#__PURE__*/function () {\n  function WebStorageUrlStorage() {\n    _classCallCheck(this, WebStorageUrlStorage);\n  }\n\n  _createClass(WebStorageUrlStorage, [{\n    key: \"findAllUploads\",\n    value: function findAllUploads() {\n      var results = this._findEntries('tus::');\n\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"findUploadsByFingerprint\",\n    value: function findUploadsByFingerprint(fingerprint) {\n      var results = this._findEntries(\"tus::\".concat(fingerprint, \"::\"));\n\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"removeUpload\",\n    value: function removeUpload(urlStorageKey) {\n      localStorage.removeItem(urlStorageKey);\n      return Promise.resolve();\n    }\n  }, {\n    key: \"addUpload\",\n    value: function addUpload(fingerprint, upload) {\n      var id = Math.round(Math.random() * 1e12);\n      var key = \"tus::\".concat(fingerprint, \"::\").concat(id);\n      localStorage.setItem(key, JSON.stringify(upload));\n      return Promise.resolve(key);\n    }\n  }, {\n    key: \"_findEntries\",\n    value: function _findEntries(prefix) {\n      var results = [];\n\n      for (var i = 0; i < localStorage.length; i++) {\n        var _key = localStorage.key(i);\n\n        if (_key.indexOf(prefix) !== 0) continue;\n\n        try {\n          var upload = JSON.parse(localStorage.getItem(_key));\n          upload.urlStorageKey = _key;\n          results.push(upload);\n        } catch (e) {// The JSON parse error is intentionally ignored here, so a malformed\n          // entry in the storage cannot prevent an upload.\n        }\n      }\n\n      return results;\n    }\n  }]);\n\n  return WebStorageUrlStorage;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/* eslint-disable max-classes-per-file */\nvar XHRHttpStack = /*#__PURE__*/function () {\n  function XHRHttpStack() {\n    _classCallCheck(this, XHRHttpStack);\n  }\n\n  _createClass(XHRHttpStack, [{\n    key: \"createRequest\",\n    value: function createRequest(method, url) {\n      return new Request(method, url);\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return 'XHRHttpStack';\n    }\n  }]);\n\n  return XHRHttpStack;\n}();\n\nexport { XHRHttpStack as default };\n\nvar Request = /*#__PURE__*/function () {\n  function Request(method, url) {\n    _classCallCheck(this, Request);\n\n    this._xhr = new XMLHttpRequest();\n\n    this._xhr.open(method, url, true);\n\n    this._method = method;\n    this._url = url;\n    this._headers = {};\n  }\n\n  _createClass(Request, [{\n    key: \"getMethod\",\n    value: function getMethod() {\n      return this._method;\n    }\n  }, {\n    key: \"getURL\",\n    value: function getURL() {\n      return this._url;\n    }\n  }, {\n    key: \"setHeader\",\n    value: function setHeader(header, value) {\n      this._xhr.setRequestHeader(header, value);\n\n      this._headers[header] = value;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(header) {\n      return this._headers[header];\n    }\n  }, {\n    key: \"setProgressHandler\",\n    value: function setProgressHandler(progressHandler) {\n      // Test support for progress events before attaching an event listener\n      if (!('upload' in this._xhr)) {\n        return;\n      }\n\n      this._xhr.upload.onprogress = function (e) {\n        if (!e.lengthComputable) {\n          return;\n        }\n\n        progressHandler(e.loaded);\n      };\n    }\n  }, {\n    key: \"send\",\n    value: function send() {\n      var _this = this;\n\n      var body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      return new Promise(function (resolve, reject) {\n        _this._xhr.onload = function () {\n          resolve(new Response(_this._xhr));\n        };\n\n        _this._xhr.onerror = function (err) {\n          reject(err);\n        };\n\n        _this._xhr.send(body);\n      });\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      this._xhr.abort();\n\n      return Promise.resolve();\n    }\n  }, {\n    key: \"getUnderlyingObject\",\n    value: function getUnderlyingObject() {\n      return this._xhr;\n    }\n  }]);\n\n  return Request;\n}();\n\nvar Response = /*#__PURE__*/function () {\n  function Response(xhr) {\n    _classCallCheck(this, Response);\n\n    this._xhr = xhr;\n  }\n\n  _createClass(Response, [{\n    key: \"getStatus\",\n    value: function getStatus() {\n      return this._xhr.status;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(header) {\n      return this._xhr.getResponseHeader(header);\n    }\n  }, {\n    key: \"getBody\",\n    value: function getBody() {\n      return this._xhr.responseText;\n    }\n  }, {\n    key: \"getUnderlyingObject\",\n    value: function getUnderlyingObject() {\n      return this._xhr;\n    }\n  }]);\n\n  return Response;\n}();","var isReactNative = function isReactNative() {\n  return typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative';\n};\n\nexport default isReactNative;","/**\n * uriToBlob resolves a URI to a Blob object. This is used for\n * React Native to retrieve a file (identified by a file://\n * URI) as a blob.\n */\nexport default function uriToBlob(uri) {\n  return new Promise(function (resolve, reject) {\n    var xhr = new XMLHttpRequest();\n    xhr.responseType = 'blob';\n\n    xhr.onload = function () {\n      var blob = xhr.response;\n      resolve(blob);\n    };\n\n    xhr.onerror = function (err) {\n      reject(err);\n    };\n\n    xhr.open('GET', uri);\n    xhr.send();\n  });\n}","var isCordova = function isCordova() {\n  return typeof window !== 'undefined' && (typeof window.PhoneGap !== 'undefined' || typeof window.Cordova !== 'undefined' || typeof window.cordova !== 'undefined');\n};\n\nexport default isCordova;","/**\n * readAsByteArray converts a File object to a Uint8Array.\n * This function is only used on the Apache Cordova platform.\n * See https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-file/index.html#read-a-file\n */\nexport default function readAsByteArray(chunk) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n\n    reader.onload = function () {\n      var value = new Uint8Array(reader.result);\n      resolve({\n        value: value\n      });\n    };\n\n    reader.onerror = function (err) {\n      reject(err);\n    };\n\n    reader.readAsArrayBuffer(chunk);\n  });\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport isCordova from './isCordova.js';\nimport readAsByteArray from './readAsByteArray.js';\n\nvar FileSource = /*#__PURE__*/function () {\n  // Make this.size a method\n  function FileSource(file) {\n    _classCallCheck(this, FileSource);\n\n    this._file = file;\n    this.size = file.size;\n  }\n\n  _createClass(FileSource, [{\n    key: \"slice\",\n    value: function slice(start, end) {\n      // In Apache Cordova applications, a File must be resolved using\n      // FileReader instances, see\n      // https://cordova.apache.org/docs/en/8.x/reference/cordova-plugin-file/index.html#read-a-file\n      if (isCordova()) {\n        return readAsByteArray(this._file.slice(start, end));\n      }\n\n      var value = this._file.slice(start, end);\n\n      return Promise.resolve({\n        value: value\n      });\n    }\n  }, {\n    key: \"close\",\n    value: function close() {// Nothing to do here since we don't need to release any resources.\n    }\n  }]);\n\n  return FileSource;\n}();\n\nexport { FileSource as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction len(blobOrArray) {\n  if (blobOrArray === undefined) return 0;\n  if (blobOrArray.size !== undefined) return blobOrArray.size;\n  return blobOrArray.length;\n}\n/*\n  Typed arrays and blobs don't have a concat method.\n  This function helps StreamSource accumulate data to reach chunkSize.\n*/\n\n\nfunction concat(a, b) {\n  if (a.concat) {\n    // Is `a` an Array?\n    return a.concat(b);\n  }\n\n  if (a instanceof Blob) {\n    return new Blob([a, b], {\n      type: a.type\n    });\n  }\n\n  if (a.set) {\n    // Is `a` a typed array?\n    var c = new a.constructor(a.length + b.length);\n    c.set(a);\n    c.set(b, a.length);\n    return c;\n  }\n\n  throw new Error('Unknown data type');\n}\n\nvar StreamSource = /*#__PURE__*/function () {\n  function StreamSource(reader) {\n    _classCallCheck(this, StreamSource);\n\n    this._buffer = undefined;\n    this._bufferOffset = 0;\n    this._reader = reader;\n    this._done = false;\n  }\n\n  _createClass(StreamSource, [{\n    key: \"slice\",\n    value: function slice(start, end) {\n      if (start < this._bufferOffset) {\n        return Promise.reject(new Error(\"Requested data is before the reader's current offset\"));\n      }\n\n      return this._readUntilEnoughDataOrDone(start, end);\n    }\n  }, {\n    key: \"_readUntilEnoughDataOrDone\",\n    value: function _readUntilEnoughDataOrDone(start, end) {\n      var _this = this;\n\n      var hasEnoughData = end <= this._bufferOffset + len(this._buffer);\n\n      if (this._done || hasEnoughData) {\n        var value = this._getDataFromBuffer(start, end);\n\n        var done = value == null ? this._done : false;\n        return Promise.resolve({\n          value: value,\n          done: done\n        });\n      }\n\n      return this._reader.read().then(function (_ref) {\n        var value = _ref.value,\n            done = _ref.done;\n\n        if (done) {\n          _this._done = true;\n        } else if (_this._buffer === undefined) {\n          _this._buffer = value;\n        } else {\n          _this._buffer = concat(_this._buffer, value);\n        }\n\n        return _this._readUntilEnoughDataOrDone(start, end);\n      });\n    }\n  }, {\n    key: \"_getDataFromBuffer\",\n    value: function _getDataFromBuffer(start, end) {\n      // Remove data from buffer before `start`.\n      // Data might be reread from the buffer if an upload fails, so we can only\n      // safely delete data when it comes *before* what is currently being read.\n      if (start > this._bufferOffset) {\n        this._buffer = this._buffer.slice(start - this._bufferOffset);\n        this._bufferOffset = start;\n      } // If the buffer is empty after removing old data, all data has been read.\n\n\n      var hasAllDataBeenRead = len(this._buffer) === 0;\n\n      if (this._done && hasAllDataBeenRead) {\n        return null;\n      } // We already removed data before `start`, so we just return the first\n      // chunk from the buffer.\n\n\n      return this._buffer.slice(0, end - start);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      if (this._reader.cancel) {\n        this._reader.cancel();\n      }\n    }\n  }]);\n\n  return StreamSource;\n}();\n\nexport { StreamSource as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport isReactNative from './isReactNative.js';\nimport uriToBlob from './uriToBlob.js';\nimport FileSource from './sources/FileSource.js';\nimport StreamSource from './sources/StreamSource.js';\n\nvar FileReader = /*#__PURE__*/function () {\n  function FileReader() {\n    _classCallCheck(this, FileReader);\n  }\n\n  _createClass(FileReader, [{\n    key: \"openFile\",\n    value: function openFile(input, chunkSize) {\n      // In React Native, when user selects a file, instead of a File or Blob,\n      // you usually get a file object {} with a uri property that contains\n      // a local path to the file. We use XMLHttpRequest to fetch\n      // the file blob, before uploading with tus.\n      if (isReactNative() && input && typeof input.uri !== 'undefined') {\n        return uriToBlob(input.uri).then(function (blob) {\n          return new FileSource(blob);\n        })[\"catch\"](function (err) {\n          throw new Error(\"tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. \".concat(err));\n        });\n      } // Since we emulate the Blob type in our tests (not all target browsers\n      // support it), we cannot use `instanceof` for testing whether the input value\n      // can be handled. Instead, we simply check is the slice() function and the\n      // size property are available.\n\n\n      if (typeof input.slice === 'function' && typeof input.size !== 'undefined') {\n        return Promise.resolve(new FileSource(input));\n      }\n\n      if (typeof input.read === 'function') {\n        chunkSize = Number(chunkSize);\n\n        if (!Number.isFinite(chunkSize)) {\n          return Promise.reject(new Error('cannot create source for stream without a finite value for the `chunkSize` option'));\n        }\n\n        return Promise.resolve(new StreamSource(input, chunkSize));\n      }\n\n      return Promise.reject(new Error('source object may only be an instance of File, Blob, or Reader in this environment'));\n    }\n  }]);\n\n  return FileReader;\n}();\n\nexport { FileReader as default };","import isReactNative from './isReactNative.js'; // TODO: Differenciate between input types\n\n/**\n * Generate a fingerprint for a file which will be used the store the endpoint\n *\n * @param {File} file\n * @param {Object} options\n * @param {Function} callback\n */\n\nexport default function fingerprint(file, options) {\n  if (isReactNative()) {\n    return Promise.resolve(reactNativeFingerprint(file, options));\n  }\n\n  return Promise.resolve(['tus-br', file.name, file.type, file.size, file.lastModified, options.endpoint].join('-'));\n}\n\nfunction reactNativeFingerprint(file, options) {\n  var exifHash = file.exif ? hashCode(JSON.stringify(file.exif)) : 'noexif';\n  return ['tus-rn', file.name || 'noname', file.size || 'nosize', exifHash, options.endpoint].join('/');\n}\n\nfunction hashCode(str) {\n  /* eslint-disable no-bitwise */\n  // from https://stackoverflow.com/a/8831937/151666\n  var hash = 0;\n\n  if (str.length === 0) {\n    return hash;\n  }\n\n  for (var i = 0; i < str.length; i++) {\n    var _char = str.charCodeAt(i);\n\n    hash = (hash << 5) - hash + _char;\n    hash &= hash; // Convert to 32bit integer\n  }\n\n  return hash;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport BaseUpload from '../upload.js';\nimport NoopUrlStorage from '../noopUrlStorage.js';\nimport { enableDebugLog } from '../logger.js';\nimport DetailedError from '../error.js';\nimport { canStoreURLs, WebStorageUrlStorage } from './urlStorage.js';\nimport DefaultHttpStack from './httpStack.js';\nimport FileReader from './fileReader.js';\nimport fingerprint from './fileSignature.js';\n\nvar defaultOptions = _objectSpread(_objectSpread({}, BaseUpload.defaultOptions), {}, {\n  httpStack: new DefaultHttpStack(),\n  fileReader: new FileReader(),\n  urlStorage: canStoreURLs ? new WebStorageUrlStorage() : new NoopUrlStorage(),\n  fingerprint: fingerprint\n});\n\nvar Upload = /*#__PURE__*/function (_BaseUpload) {\n  _inherits(Upload, _BaseUpload);\n\n  var _super = _createSuper(Upload);\n\n  function Upload() {\n    var file = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Upload);\n\n    options = _objectSpread(_objectSpread({}, defaultOptions), options);\n    return _super.call(this, file, options);\n  }\n\n  _createClass(Upload, null, [{\n    key: \"terminate\",\n    value: function terminate(url) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      options = _objectSpread(_objectSpread({}, defaultOptions), options);\n      return BaseUpload.terminate(url, options);\n    }\n  }]);\n\n  return Upload;\n}(BaseUpload);\n\nvar _window = window,\n    XMLHttpRequest = _window.XMLHttpRequest,\n    Blob = _window.Blob;\nvar isSupported = XMLHttpRequest && Blob && typeof Blob.prototype.slice === 'function';\nexport { Upload, canStoreURLs, defaultOptions, isSupported, enableDebugLog, DefaultHttpStack, DetailedError };","import {Upload} from 'tus-js-client';\nimport {UploadedFile} from '../../uploaded-file';\nimport {UploadStrategy, UploadStrategyConfig} from './upload-strategy';\nimport {FileEntry} from '../../file-entry';\nimport {getAxiosErrorMessage} from '../../../utils/http/get-axios-error-message';\nimport {apiClient} from '../../../http/query-client';\nimport {getCookie} from 'react-use-cookie';\n\nexport class TusUpload implements UploadStrategy {\n  constructor(private upload: Upload) {}\n\n  start() {\n    this.upload.start();\n  }\n\n  abort() {\n    return this.upload.abort(true);\n  }\n\n  static async create(\n    file: UploadedFile,\n    {onProgress, onSuccess, onError, metadata, chunkSize}: UploadStrategyConfig\n  ): Promise<TusUpload> {\n    const tusFingerprint = ['tus', file.fingerprint, 'drive'].join('-');\n    const upload = new Upload(file.native, {\n      fingerprint: () => Promise.resolve(tusFingerprint),\n      removeFingerprintOnSuccess: true,\n      endpoint: 'api/v1/tus/upload',\n      chunkSize,\n      retryDelays: [0, 3000, 5000, 10000, 20000],\n      overridePatchMethod: true,\n      metadata: {\n        name: window.btoa(file.id),\n        clientName: file.name,\n        clientExtension: file.extension,\n        clientMime: file.mime || '',\n        clientSize: `${file.size}`,\n        ...(metadata as Record<string, string>),\n      },\n      headers: {\n        'X-XSRF-TOKEN': getCookie('XSRF-TOKEN'),\n      },\n      onError: err => {\n        if ('originalResponse' in err) {\n          try {\n            const message = JSON.parse(err.originalResponse.getBody())?.message;\n            onError?.(message);\n          } catch (e) {\n            onError?.();\n          }\n        } else {\n          onError?.();\n        }\n      },\n      onProgress(bytesUploaded, bytesTotal) {\n        onProgress?.({bytesUploaded, bytesTotal});\n      },\n      onSuccess: async () => {\n        const uploadKey = upload.url?.split('/').pop();\n        try {\n          if (uploadKey) {\n            const response = await createFileEntry(uploadKey);\n            onSuccess?.(response.fileEntry);\n          }\n        } catch (err) {\n          localStorage.removeItem(tusFingerprint);\n          onError?.(getAxiosErrorMessage(err));\n        }\n      },\n    });\n\n    const previousUploads = await upload.findPreviousUploads();\n    if (previousUploads.length) {\n      upload.resumeFromPreviousUpload(previousUploads[0]);\n    }\n\n    return new TusUpload(upload);\n  }\n}\n\nfunction createFileEntry(uploadKey: string): Promise<{fileEntry: FileEntry}> {\n  return apiClient.post('tus/entries', {uploadKey}).then(r => r.data);\n}\n","import {UploadedFile} from '../../uploaded-file';\nimport {UploadStrategy, UploadStrategyConfig} from './upload-strategy';\nimport {apiClient} from '../../../http/query-client';\nimport {getAxiosErrorMessage} from '../../../utils/http/get-axios-error-message';\n\nexport class AxiosUpload implements UploadStrategy {\n  private abortController: AbortController;\n  constructor(\n    private file: UploadedFile,\n    private config: UploadStrategyConfig\n  ) {\n    this.abortController = new AbortController();\n  }\n\n  async start() {\n    const formData = new FormData();\n    const {onSuccess, onError, onProgress, metadata} = this.config;\n\n    formData.set('file', this.file.native);\n    if (metadata) {\n      Object.entries(metadata).forEach(([key, value]) => {\n        formData.set(key, `${value}`);\n      });\n    }\n\n    const response = await apiClient\n      .post('file-entries', formData, {\n        onUploadProgress: (e: ProgressEvent) => {\n          if (e.lengthComputable) {\n            onProgress?.({\n              bytesUploaded: e.loaded,\n              bytesTotal: e.total,\n            });\n          }\n        },\n        signal: this.abortController.signal,\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      })\n      .catch(err => {\n        if (err.code !== 'ERR_CANCELED') {\n          onError?.(getAxiosErrorMessage(err));\n        }\n      });\n\n    // if upload was aborted, it will be handled and set\n    // as \"aborted\" already, no need to set it as \"failed\"\n    if (this.abortController.signal.aborted) {\n      return;\n    }\n\n    if (response && response.data.fileEntry) {\n      onSuccess?.(response.data.fileEntry);\n    }\n  }\n\n  abort() {\n    this.abortController.abort();\n    return Promise.resolve();\n  }\n\n  static async create(\n    file: UploadedFile,\n    config: UploadStrategyConfig\n  ): Promise<AxiosUpload> {\n    return new AxiosUpload(file, config);\n  }\n}\n","import {UploadStrategy, UploadStrategyConfig} from './upload-strategy';\nimport {UploadedFile} from '../../uploaded-file';\nimport axios from 'axios';\nimport {FileEntry} from '../../file-entry';\nimport {getAxiosErrorMessage} from '../../../utils/http/get-axios-error-message';\nimport {apiClient} from '../../../http/query-client';\n\ninterface PresignedRequest {\n  url: string;\n  key: string;\n  acl: string;\n}\n\nexport class S3Upload implements UploadStrategy {\n  private abortController: AbortController;\n  private presignedRequest?: PresignedRequest;\n\n  constructor(\n    private file: UploadedFile,\n    private config: UploadStrategyConfig\n  ) {\n    this.abortController = new AbortController();\n  }\n\n  async start() {\n    this.presignedRequest = await this.presignPostUrl();\n    if (!this.presignedRequest) return;\n\n    const result = await this.uploadFileToS3();\n    if (result !== 'uploaded') return;\n\n    const response = await this.createFileEntry();\n    if (response?.fileEntry) {\n      this.config.onSuccess?.(response.fileEntry);\n    } else if (!this.abortController.signal) {\n      this.config.onError?.();\n    }\n  }\n\n  abort() {\n    this.abortController.abort();\n    return Promise.resolve();\n  }\n\n  private presignPostUrl(): Promise<PresignedRequest> {\n    return apiClient\n      .post(\n        's3/simple/presign',\n        {\n          filename: this.file.name,\n          mime: this.file.mime,\n          disk: this.config.metadata?.disk,\n          size: this.file.size,\n          extension: this.file.extension,\n          ...this.config.metadata,\n        },\n        {signal: this.abortController.signal}\n      )\n      .then(r => r.data)\n      .catch(err => {\n        if (err.code !== 'ERR_CANCELED') {\n          this.config.onError?.(getAxiosErrorMessage(err));\n        }\n      });\n  }\n\n  private uploadFileToS3() {\n    const {url, acl} = this.presignedRequest!;\n    return axios\n      .put(url, this.file.native, {\n        signal: this.abortController.signal,\n        withCredentials: false,\n        headers: {\n          'Content-Type': this.file.mime,\n          'x-amz-acl': acl,\n        },\n        onUploadProgress: (e: ProgressEvent) => {\n          if (e.lengthComputable) {\n            this.config.onProgress?.({\n              bytesUploaded: e.loaded,\n              bytesTotal: e.total,\n            });\n          }\n        },\n      })\n      .then(() => 'uploaded')\n      .catch(err => {\n        if (err.code !== 'ERR_CANCELED') {\n          this.config.onError?.(getAxiosErrorMessage(err));\n        }\n      });\n  }\n\n  private async createFileEntry() {\n    return await apiClient\n      .post('s3/entries', {\n        ...this.config.metadata,\n        clientMime: this.file.mime,\n        clientName: this.file.name,\n        filename: this.presignedRequest!.key.split('/').pop(),\n        size: this.file.size,\n        clientExtension: this.file.extension,\n      })\n      .then(r => {\n        return r.data as {fileEntry: FileEntry};\n      })\n      .catch(err => {\n        if (err.code !== 'ERR_CANCELED') {\n          this.config.onError?.(getAxiosErrorMessage(err));\n        }\n      });\n  }\n\n  static async create(\n    file: UploadedFile,\n    config: UploadStrategyConfig\n  ): Promise<S3Upload> {\n    return new S3Upload(file, config);\n  }\n}\n","export class ProgressTimeout {\n  public aliveTimer: any;\n  public isDone = false;\n  public timeout = 30000;\n  public timeoutHandler: (() => void) | null = null;\n\n  progress() {\n    // Some browsers fire another progress event when the upload is\n    // cancelled, so we have to ignore progress after the timer was\n    // told to stop.\n    if (this.isDone || !this.timeoutHandler) return;\n\n    if (this.timeout > 0) {\n      clearTimeout(this.aliveTimer);\n      this.aliveTimer = setTimeout(this.timeoutHandler, this.timeout);\n    }\n  }\n\n  done() {\n    if (!this.isDone) {\n      clearTimeout(this.aliveTimer);\n      this.aliveTimer = null;\n      this.isDone = true;\n    }\n  }\n}\n","// Adapted from https://github.com/Flet/prettier-bytes/\n// Changing 1000 bytes to 1024, so we can keep uppercase KB vs kB\n// ISC License (c) Dan Flettre https://github.com/Flet/prettier-bytes/blob/master/LICENSE\nexport function prettyBytes(num?: number): string {\n  if (num == null || Number.isNaN(num)) return '';\n  const neg = num < 0;\n  const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n  if (neg) {\n    num = -num;\n  }\n\n  if (num < 1) {\n    return `${(neg ? '-' : '') + num} B`;\n  }\n\n  const exponent = Math.min(\n    Math.floor(Math.log(num) / Math.log(1024)),\n    units.length - 1\n  );\n  num = Number(num / Math.pow(1024, exponent));\n  const unit = units[exponent];\n\n  if (num >= 10 || num % 1 === 0) {\n    // Do not show decimals when the number is two-digit, or if the number has no\n    // decimal component.\n    return `${(neg ? '-' : '') + num.toFixed(0)} ${unit}`;\n  }\n  return `${(neg ? '-' : '') + num.toFixed(1)} ${unit}`;\n}\n","/* jshint node: true */\n'use strict';\n\n/**\n  # wildcard\n\n  Very simple wildcard matching, which is designed to provide the same\n  functionality that is found in the\n  [eve](https://github.com/adobe-webplatform/eve) eventing library.\n\n  ## Usage\n\n  It works with strings:\n\n  <<< examples/strings.js\n\n  Arrays:\n\n  <<< examples/arrays.js\n\n  Objects (matching against keys):\n\n  <<< examples/objects.js\n\n  While the library works in Node, if you are are looking for file-based\n  wildcard matching then you should have a look at:\n\n  <https://github.com/isaacs/node-glob>\n**/\n\nfunction WildcardMatcher(text, separator) {\n  this.text = text = text || '';\n  this.hasWild = ~text.indexOf('*');\n  this.separator = separator;\n  this.parts = text.split(separator);\n}\n\nWildcardMatcher.prototype.match = function(input) {\n  var matches = true;\n  var parts = this.parts;\n  var ii;\n  var partsCount = parts.length;\n  var testParts;\n\n  if (typeof input == 'string' || input instanceof String) {\n    if (!this.hasWild && this.text != input) {\n      matches = false;\n    } else {\n      testParts = (input || '').split(this.separator);\n      for (ii = 0; matches && ii < partsCount; ii++) {\n        if (parts[ii] === '*')  {\n          continue;\n        } else if (ii < testParts.length) {\n          matches = parts[ii] === testParts[ii];\n        } else {\n          matches = false;\n        }\n      }\n\n      // If matches, then return the component parts\n      matches = matches && testParts;\n    }\n  }\n  else if (typeof input.splice == 'function') {\n    matches = [];\n\n    for (ii = input.length; ii--; ) {\n      if (this.match(input[ii])) {\n        matches[matches.length] = input[ii];\n      }\n    }\n  }\n  else if (typeof input == 'object') {\n    matches = {};\n\n    for (var key in input) {\n      if (this.match(key)) {\n        matches[key] = input[key];\n      }\n    }\n  }\n\n  return matches;\n};\n\nmodule.exports = function(text, test, separator) {\n  var matcher = new WildcardMatcher(text, separator || /[\\/\\.]/);\n  if (typeof test != 'undefined') {\n    return matcher.match(test);\n  }\n\n  return matcher;\n};\n","var wildcard = require('wildcard');\nvar reMimePartSplit = /[\\/\\+\\.]/;\n\n/**\n  # mime-match\n\n  A simple function to checker whether a target mime type matches a mime-type\n  pattern (e.g. image/jpeg matches image/jpeg OR image/*).\n\n  ## Example Usage\n\n  <<< example.js\n\n**/\nmodule.exports = function(target, pattern) {\n  function test(pattern) {\n    var result = wildcard(pattern, target, reMimePartSplit);\n\n    // ensure that we have a valid mime type (should have two parts)\n    return result && result.length >= 2;\n  }\n\n  return pattern ? test(pattern.split(';')[0]) : test;\n};\n","import {UploadedFile} from '../uploaded-file';\nimport {message} from '../../i18n/message';\nimport {prettyBytes} from '../utils/pretty-bytes';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\nimport match from 'mime-match';\n\nexport interface Restrictions {\n  maxFileSize?: number;\n  allowedFileTypes?: string[];\n  blockedFileTypes?: string[];\n}\n\nexport function validateUpload(\n  file: UploadedFile,\n  restrictions?: Restrictions\n): MessageDescriptor | void {\n  if (!restrictions) return;\n\n  const {maxFileSize, allowedFileTypes, blockedFileTypes} = restrictions;\n\n  if (maxFileSize && file.size != null && file.size > maxFileSize) {\n    return message('`:file` exceeds maximum allowed size of :size', {\n      values: {file: file.name, size: prettyBytes(maxFileSize)},\n    });\n  }\n\n  if (allowedFileTypes?.length) {\n    if (!fileMatchesTypes(file, allowedFileTypes)) {\n      return message('This file type is not allowed');\n    }\n  }\n\n  if (blockedFileTypes?.length) {\n    if (fileMatchesTypes(file, blockedFileTypes)) {\n      return message('This file type is not allowed');\n    }\n  }\n}\n\nfunction fileMatchesTypes(file: UploadedFile, types: string[]): boolean {\n  return types.some(type => {\n    // check if this is a mime-type\n    if (type.includes('/')) {\n      if (!file.mime) return false;\n      return match(file.mime.replace(/;.*?$/, ''), type);\n    }\n\n    // otherwise this is likely an extension\n    if (type.replace('.', '') && file.extension) {\n      return file.extension.toLowerCase() === type.toLowerCase();\n    }\n    return false;\n  });\n}\n","import create from 'zustand';\nimport {immer} from 'zustand/middleware/immer';\nimport {enableMapSet} from 'immer';\nimport {WritableDraft} from 'immer/dist/types/types-external';\nimport {UploadedFile} from '../uploaded-file';\nimport {UploadStrategy, UploadStrategyConfig} from './strategy/upload-strategy';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\nimport {FileEntry} from '../file-entry';\nimport {S3MultipartUpload} from './strategy/s3-multipart-upload';\nimport {Settings} from '../../core/settings/settings';\nimport {Disk} from '../types/backend-metadata';\nimport {TusUpload} from './strategy/tus-upload';\nimport {AxiosUpload} from './strategy/axios-upload';\nimport {S3Upload} from './strategy/s3-upload';\nimport {ProgressTimeout} from './progress-timeout';\nimport {message} from '../../i18n/message';\nimport {validateUpload} from './validate-upload';\nimport {toast} from '../../ui/toast/toast';\n\nenableMapSet();\n\ninterface FileUpload {\n  file: UploadedFile;\n  percentage: number;\n  bytesUploaded: number;\n  status: 'pending' | 'inProgress' | 'aborted' | 'failed' | 'completed';\n  errorMessage?: string | MessageDescriptor;\n  entry?: FileEntry;\n  request?: UploadStrategy;\n  timer?: ProgressTimeout;\n}\n\nexport interface FileUploadState {\n  concurrency: number;\n  fileUploads: Map<string, FileUpload>;\n  inProgressUploadsCount: number;\n  completedUploadsCount: number;\n  uploadMultiple: (\n    files: (File | UploadedFile)[] | FileList,\n    options?: Omit<\n      UploadStrategyConfig,\n      'onProgress' | 'showToastOnRestrictionFail'\n    > // progress would be called for each upload simultaneously\n  ) => string[];\n  uploadSingle: (\n    file: File | UploadedFile,\n    options?: UploadStrategyConfig\n  ) => string;\n  clearInactive: () => void;\n  abortUpload: (id: string) => void;\n  updateFileUpload: (id: string, state: Partial<FileUpload>) => void;\n  addFileUpload: (file: UploadedFile, options: Partial<FileUpload>) => void;\n  runQueue: () => void;\n}\n\ninterface StoreProps {\n  settings: Settings;\n}\n\nexport const createFileUploadStore = ({settings}: StoreProps) =>\n  create<FileUploadState>()(\n    immer((set, get) => ({\n      concurrency: 3,\n      fileUploads: new Map<string, FileUpload>(),\n      inProgressUploadsCount: 0,\n      completedUploadsCount: 0,\n\n      clearInactive() {\n        set(state => {\n          state.fileUploads.forEach((upload, key) => {\n            if (upload.status !== 'inProgress') {\n              state.fileUploads.delete(key);\n            }\n          });\n        });\n        get().runQueue();\n      },\n\n      abortUpload(id) {\n        const upload = get().fileUploads.get(id);\n        if (upload) {\n          upload.request?.abort();\n          get().updateFileUpload(id, {status: 'aborted'});\n          get().runQueue();\n        }\n      },\n\n      updateFileUpload(id, newUploadState) {\n        set(state => {\n          const fileUpload = state.fileUploads.get(id);\n          if (fileUpload) {\n            state.fileUploads.set(id, {\n              ...fileUpload,\n              ...newUploadState,\n            });\n\n            // only need to update inProgress count if status of the uploads in queue change\n            if ('status' in newUploadState) {\n              updateTotals(state);\n            }\n          }\n        });\n      },\n\n      addFileUpload(file, options) {\n        set(state => {\n          // abort upload after 30sec of no progress\n          if (options.timer && options.request) {\n            options.timer.timeoutHandler = () => {\n              options.request?.abort();\n              get().updateFileUpload(file.id, {\n                status: 'failed',\n                errorMessage: message('Upload timed out'),\n              });\n              get().runQueue();\n            };\n          }\n          state.fileUploads.set(file.id, {\n            file,\n            percentage: 0,\n            bytesUploaded: 0,\n            status: 'pending',\n            ...options,\n          });\n          updateTotals(state);\n        });\n      },\n\n      runQueue() {\n        const uploads = [...get().fileUploads.values()];\n        const activeUploads = uploads.filter(u => u.status === 'inProgress');\n\n        let concurrency = get().concurrency;\n        if (\n          activeUploads.filter(\n            activeUpload =>\n              // only upload one file from folder at a time to avoid creating duplicate folders\n              activeUpload.file.relativePath ||\n              // only allow one s3 multipart upload at a time, it will already upload multiple parts in parallel\n              activeUpload.request instanceof S3MultipartUpload ||\n              // only allow one tus upload if file is larger than chunk size, tus will have parallel uploads already in that case\n              (activeUpload.request instanceof TusUpload &&\n                settings.uploads.chunk_size &&\n                activeUpload.file.size > settings.uploads.chunk_size)\n          ).length\n        ) {\n          concurrency = 1;\n        }\n\n        if (activeUploads.length < concurrency) {\n          const pendingUploads = uploads.filter(u => u.status === 'pending');\n          const next = pendingUploads.find(a => !!a.request);\n          if (next) {\n            get().updateFileUpload(next.file.id, {\n              status: 'inProgress',\n            });\n            next.request!.start();\n          }\n        }\n      },\n\n      uploadSingle(file, userOptions) {\n        const uploadedFile =\n          file instanceof UploadedFile ? file : new UploadedFile(file);\n\n        if (userOptions?.restrictions) {\n          const errorMessage = validateUpload(\n            uploadedFile,\n            userOptions.restrictions\n          );\n          if (errorMessage) {\n            get().addFileUpload(uploadedFile, {\n              errorMessage,\n              status: 'failed',\n            });\n\n            if (userOptions.showToastOnRestrictionFail) {\n              toast.danger(errorMessage);\n            }\n\n            get().runQueue();\n\n            return uploadedFile.id;\n          }\n        }\n\n        const timer = new ProgressTimeout();\n        const config: UploadStrategyConfig = {\n          metadata: {\n            ...userOptions?.metadata,\n            relativePath: uploadedFile.relativePath,\n            disk: userOptions?.metadata?.disk || Disk.uploads,\n            parentId: userOptions?.metadata?.parentId || '',\n          },\n          chunkSize: settings.uploads.chunk_size,\n          onError: errorMessage => {\n            get().updateFileUpload(uploadedFile.id, {\n              errorMessage,\n              status: 'failed',\n            });\n            get().runQueue();\n            timer.done();\n            userOptions?.onError?.();\n          },\n          onSuccess: entry => {\n            get().updateFileUpload(uploadedFile.id, {\n              status: 'completed',\n              entry,\n            });\n            get().runQueue();\n            timer.done();\n            userOptions?.onSuccess?.(entry);\n          },\n          onProgress: ({bytesUploaded, bytesTotal}) => {\n            const percentage = (bytesUploaded / bytesTotal) * 100;\n            get().updateFileUpload(uploadedFile.id, {\n              percentage,\n              bytesUploaded,\n            });\n            timer.progress();\n            userOptions?.onProgress?.({bytesUploaded, bytesTotal});\n          },\n        };\n\n        const strategy = chooseUploadStrategy({\n          settings,\n          file: uploadedFile,\n          strategyConfig: config,\n        });\n\n        strategy.create(uploadedFile, config).then(request => {\n          get().addFileUpload(uploadedFile, {request, timer});\n          get().runQueue();\n        });\n\n        return uploadedFile.id;\n      },\n\n      uploadMultiple: (files, options) => {\n        return [...files].map(file => {\n          return get().uploadSingle(file, options);\n        });\n      },\n    }))\n  );\n\nconst OneMB = 1024 * 1024;\nconst FourMB = 4 * OneMB;\nconst HundredMB = 100 * OneMB;\n\ninterface ChooseUploadStrategyProps {\n  settings: Settings;\n  strategyConfig: UploadStrategyConfig;\n  file: UploadedFile;\n}\nconst chooseUploadStrategy = ({\n  settings,\n  strategyConfig,\n  file,\n}: ChooseUploadStrategyProps) => {\n  const disk = strategyConfig.metadata?.disk || Disk.uploads;\n  const driver =\n    disk === Disk.uploads\n      ? settings.uploads.uploads_driver\n      : settings.uploads.public_driver;\n\n  if (driver?.endsWith('s3') && settings.uploads.s3_direct_upload) {\n    return file.size >= HundredMB ? S3MultipartUpload : S3Upload;\n  } else {\n    // 4MB = Axios, otherwise Tus\n    return file.size >= FourMB && !settings.uploads.disable_tus\n      ? TusUpload\n      : AxiosUpload;\n  }\n};\n\nconst updateTotals = (state: WritableDraft<FileUploadState>) => {\n  state.completedUploadsCount = [...state.fileUploads.values()].filter(\n    u => u.status === 'completed'\n  ).length;\n  state.inProgressUploadsCount = [...state.fileUploads.values()].filter(\n    u => u.status === 'inProgress'\n  ).length;\n};\n","import createContext from 'zustand/context';\nimport {StoreApi} from 'zustand';\nimport {ReactNode} from 'react';\nimport {createFileUploadStore, FileUploadState} from './file-upload-store';\nimport {useSettings} from '../../core/settings/use-settings';\n\nconst {Provider, useStore} = createContext<StoreApi<FileUploadState>>();\nexport const useFileUploadStore = useStore;\n\ninterface FileUploadProviderProps {\n  children: ReactNode;\n}\nexport function FileUploadProvider({children}: FileUploadProviderProps) {\n  const settings = useSettings();\n  return (\n    <Provider createStore={() => createFileUploadStore({settings})}>\n      {children}\n    </Provider>\n  );\n}\n","import {ChipValue} from './chip-field';\n\nexport function stringToChipValue(string: string | number): ChipValue {\n  // add both name and description so \"validateWith\" works properly in chip field, if it depends on description\n  return {id: string, name: `${string}`, description: `${string}`};\n}\n","import React, {\n  HTMLAttributes,\n  Key,\n  ReactElement,\n  ReactNode,\n  Ref,\n  RefObject,\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {useFocusManager} from '@react-aria/focus';\nimport clsx from 'clsx';\nimport {mergeProps, useLayoutEffect, useObjectRef} from '@react-aria/utils';\nimport {useControlledState} from '@react-stately/utils';\nimport {ChipList} from './chip-list';\nimport {Field} from '../field';\nimport {Input} from '../input';\nimport {Chip, ChipProps} from './chip';\nimport {NormalizedModel} from '../../../../datatable/filters/normalized-model';\nimport {getInputFieldClassNames} from '../get-input-field-class-names';\nimport {ProgressCircle} from '../../../progress/progress-circle';\nimport {useField} from '../use-field';\nimport {Avatar} from '../../../images/avatar';\nimport {Listbox} from '../../listbox/listbox';\nimport {useListbox} from '../../listbox/use-listbox';\nimport {BaseFieldPropsWithDom} from '../base-field-props';\nimport {useListboxKeyboardNavigation} from '../../listbox/use-listbox-keyboard-navigation';\nimport {createEventHandler} from '../../../../utils/dom/create-event-handler';\nimport {ListBoxChildren, ListboxProps} from '../../listbox/types';\nimport {stringToChipValue} from './string-to-chip-value';\nimport {Popover} from '../../../overlays/popover';\n\nexport interface ChipValue extends Omit<NormalizedModel, 'model_type'> {\n  invalid?: boolean;\n  errorMessage?: string;\n}\n\nexport type ChipFieldProps<T> = Omit<\n  ListboxProps,\n  'selectionMode' | 'displayWith'\n> &\n  Omit<\n    BaseFieldPropsWithDom<HTMLInputElement>,\n    'value' | 'onChange' | 'defaultValue'\n  > & {\n    value?: (ChipValue | string)[];\n    defaultValue?: (ChipValue | string)[];\n    displayWith?: (value: ChipValue) => ReactNode;\n    validateWith?: (value: ChipValue) => ChipValue;\n    onChange?: (value: ChipValue[]) => void;\n    suggestions?: T[];\n    children?: ListBoxChildren<T>['children'];\n    placeholder?: string;\n    chipSize?: ChipProps['size'];\n    openMenuOnFocus?: boolean;\n    valueKey?: 'id' | 'name';\n  };\n\nfunction ChipFieldInner<T>(\n  props: ChipFieldProps<T>,\n  ref: Ref<HTMLInputElement>\n) {\n  const fieldRef = useRef<HTMLDivElement>(null);\n  const inputRef = useObjectRef(ref);\n  const {\n    displayWith = v => v.name,\n    validateWith,\n    children,\n    suggestions,\n    isLoading,\n    inputValue,\n    onInputValueChange,\n    onItemSelected,\n    placeholder,\n    onOpenChange,\n    chipSize = 'md',\n    openMenuOnFocus = true,\n    showEmptyMessage,\n    value: propsValue,\n    defaultValue,\n    onChange: propsOnChange,\n    valueKey,\n    isAsync,\n    ...inputFieldProps\n  } = props;\n  const fieldClassNames = getInputFieldClassNames({\n    ...props,\n    flexibleHeight: true,\n  });\n\n  const [value, onChange] = useChipFieldValueState(props);\n\n  const [listboxIsOpen, setListboxIsOpen] = useState(false);\n\n  const loadingIndicator = (\n    <ProgressCircle isIndeterminate size=\"sm\" aria-label=\"loading...\" />\n  );\n\n  const {fieldProps, inputProps} = useField({\n    ...inputFieldProps,\n    focusRef: inputRef,\n    endAdornment: isLoading && listboxIsOpen ? loadingIndicator : null,\n  });\n\n  return (\n    <Field fieldClassNames={fieldClassNames} {...fieldProps}>\n      <Input\n        ref={fieldRef}\n        className={clsx('flex items-center flex-wrap', fieldClassNames.input)}\n        onClick={() => {\n          // refocus input when clicking outside it, but while still inside chip field\n          inputRef.current?.focus();\n        }}\n      >\n        <ListWrapper\n          displayChipUsing={displayWith}\n          items={value}\n          setItems={onChange}\n          chipSize={chipSize}\n        />\n        <ChipInput\n          showEmptyMessage={showEmptyMessage}\n          inputProps={inputProps}\n          inputValue={inputValue}\n          onInputValueChange={onInputValueChange}\n          fieldRef={fieldRef}\n          inputRef={inputRef}\n          chips={value}\n          setChips={onChange}\n          validateWith={validateWith}\n          isLoading={isLoading}\n          suggestions={suggestions}\n          placeholder={placeholder}\n          openMenuOnFocus={openMenuOnFocus}\n          listboxIsOpen={listboxIsOpen}\n          setListboxIsOpen={setListboxIsOpen}\n        >\n          {children}\n        </ChipInput>\n      </Input>\n    </Field>\n  );\n}\n\ninterface ListWrapperProps {\n  items: ChipValue[];\n  setItems: (items: ChipValue[]) => void;\n  displayChipUsing: (value: ChipValue) => ReactNode;\n  chipSize?: ChipProps['size'];\n}\nfunction ListWrapper({\n  items,\n  setItems,\n  displayChipUsing,\n  chipSize,\n}: ListWrapperProps) {\n  const manager = useFocusManager();\n  const removeItem = useCallback(\n    (key: Key) => {\n      const i = items.findIndex(cr => cr.id === key);\n      const newItems = [...items];\n      if (i > -1) {\n        newItems.splice(i, 1);\n        setItems(newItems);\n      }\n      return newItems;\n    },\n    [items, setItems]\n  );\n\n  return (\n    <ChipList\n      className=\"flex-shrink-0 flex-wrap max-w-full my-8\"\n      size={chipSize}\n      selectable\n    >\n      {items.map(item => (\n        <Chip\n          key={item.id}\n          errorMessage={item.errorMessage}\n          adornment={item.image ? <Avatar circle src={item.image} /> : null}\n          onRemove={() => {\n            const newItems = removeItem(item.id);\n            if (newItems.length) {\n              // focus previous chip\n              manager.focusPrevious({tabbable: true});\n            } else {\n              // focus input\n              manager.focusLast();\n            }\n          }}\n        >\n          {displayChipUsing(item)}\n        </Chip>\n      ))}\n    </ChipList>\n  );\n}\n\ninterface ChipInputProps<T> {\n  showEmptyMessage?: boolean;\n  inputProps: ReturnType<typeof useField>['inputProps'];\n  inputValue?: string;\n  onInputValueChange?: (value: string) => void;\n  fieldRef: RefObject<HTMLDivElement>;\n  inputRef: RefObject<HTMLInputElement>;\n  chips: ChipValue[];\n  setChips: (items: ChipValue[]) => void;\n  validateWith?: (value: ChipValue) => ChipValue;\n  isLoading?: boolean;\n  suggestions?: T[];\n  placeholder?: string;\n  openMenuOnFocus?: boolean;\n  listboxIsOpen: boolean;\n  setListboxIsOpen: (value: boolean) => void;\n  children: ListBoxChildren<T>['children'];\n}\nfunction ChipInput<T>(props: ChipInputProps<T>) {\n  const {\n    inputRef,\n    fieldRef,\n    validateWith,\n    setChips,\n    chips,\n    suggestions,\n    inputProps,\n    placeholder,\n    openMenuOnFocus,\n    listboxIsOpen,\n    setListboxIsOpen,\n  } = props;\n  const inputClassName = 'outline-none text-sm mx-8 my-4 h-30 flex-auto';\n  const manager = useFocusManager();\n\n  const addItems = useCallback(\n    (items?: ChipValue[]) => {\n      items = (items || []).filter(item => {\n        const invalid = !item || !item.id || !item.name;\n        const alreadyExists = chips.findIndex(cr => cr.id === item?.id) > -1;\n        return !alreadyExists && !invalid;\n      });\n      if (!items.length) return;\n\n      if (validateWith) {\n        items = items.map(item => validateWith(item));\n      }\n      setChips([...chips, ...items]);\n    },\n    [chips, setChips, validateWith]\n  );\n\n  const listbox = useListbox<T>({\n    ...props,\n    clearInputOnItemSelection: true,\n    isOpen: listboxIsOpen,\n    onOpenChange: setListboxIsOpen,\n    items: suggestions,\n    selectionMode: 'none',\n    role: 'listbox',\n    virtualFocus: true,\n    onItemSelected: value => {\n      handleItemSelection(value as string);\n    },\n  });\n\n  const {\n    state: {\n      activeIndex,\n      setActiveIndex,\n      isOpen,\n      setIsOpen,\n      inputValue,\n      setInputValue,\n    },\n    refs,\n    listboxId,\n    collection,\n    onInputChange,\n  } = listbox;\n\n  const handleItemSelection = (textValue: string) => {\n    const option =\n      collection.size && activeIndex != null\n        ? [...collection.values()][activeIndex]\n        : null;\n    if (option?.item) {\n      addItems([option.item]);\n    } else {\n      addItems([stringToChipValue(option ? option.value : textValue)]);\n    }\n\n    setInputValue('');\n    setActiveIndex(null);\n    setIsOpen(false);\n  };\n\n  // position dropdown relative to whole chip field, not the input\n  useLayoutEffect(() => {\n    if (fieldRef.current && refs.reference.current !== fieldRef.current) {\n      listbox.reference(fieldRef.current);\n    }\n  }, [fieldRef, listbox, refs]);\n\n  const {handleTriggerKeyDown, handleListboxKeyboardNavigation} =\n    useListboxKeyboardNavigation(listbox);\n\n  const handleFocusAndClick = createEventHandler(() => {\n    if (openMenuOnFocus && !isOpen) {\n      setIsOpen(true);\n    }\n  });\n\n  return (\n    <Listbox\n      listbox={listbox}\n      mobileOverlay={Popover}\n      onPointerDown={e => {\n        // prevent focus from leaving input when scrolling listbox via mouse\n        e.preventDefault();\n      }}\n    >\n      <input\n        type=\"text\"\n        className={clsx(inputClassName, 'bg-transparent')}\n        placeholder={placeholder}\n        {...mergeProps(inputProps, {\n          ref: inputRef,\n          value: inputValue,\n          onChange: onInputChange,\n          onPaste: e => {\n            const paste = e.clipboardData.getData('text');\n            const emails = paste.match(\n              /([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi\n            );\n            if (emails) {\n              e.preventDefault();\n              const selection = window.getSelection();\n              if (selection?.rangeCount) {\n                selection.deleteFromDocument();\n                addItems(emails.map(email => stringToChipValue(email)));\n              }\n            }\n          },\n          'aria-autocomplete': 'list',\n          'aria-controls': isOpen ? listboxId : undefined,\n          autoComplete: 'off',\n          autoCorrect: 'off',\n          spellCheck: 'false',\n          onKeyDown: e => {\n            const input = e.target as HTMLInputElement;\n\n            if (e.key === 'Enter') {\n              // prevent form submitting\n              e.preventDefault();\n              // add chip from selected listbox option or current input text value\n              handleItemSelection(input.value);\n              return;\n            }\n\n            // on escape, clear input and close dropdown\n            if (e.key === 'Escape' && isOpen) {\n              setIsOpen(false);\n              setInputValue('');\n            }\n\n            // move focus to input when focus is on first item and prevent arrow up from cycling listbox\n            if (\n              e.key === 'ArrowUp' &&\n              isOpen &&\n              (activeIndex === 0 || activeIndex == null)\n            ) {\n              setActiveIndex(null);\n              return;\n            }\n\n            // block left and right arrows from navigating in input, if focus is on listbox\n            if (\n              activeIndex != null &&\n              (e.key === 'ArrowLeft' || e.key === 'ArrowRight')\n            ) {\n              e.preventDefault();\n              return;\n            }\n\n            // move focus on the last chip, if focus is at the  start of input\n            if (\n              (e.key === 'ArrowLeft' ||\n                e.key === 'Backspace' ||\n                e.key === 'Delete') &&\n              input.selectionStart === 0 &&\n              activeIndex == null &&\n              chips.length\n            ) {\n              manager.focusPrevious({tabbable: true});\n              return;\n            }\n\n            // fallthrough to listbox navigation handlers for arrow keys\n            const handled = handleTriggerKeyDown(e);\n            if (!handled) {\n              handleListboxKeyboardNavigation(e);\n            }\n          },\n          onFocus: handleFocusAndClick,\n          onClick: handleFocusAndClick,\n        } as HTMLAttributes<HTMLInputElement>)}\n      />\n    </Listbox>\n  );\n}\n\nfunction useChipFieldValueState({\n  onChange,\n  value,\n  defaultValue,\n  valueKey,\n}: ChipFieldProps<any>) {\n  // convert value from string[] to ChipValue[], if needed\n  const propsValue = useMemo(() => {\n    return mixedValueToChipValue(value);\n  }, [value]);\n\n  // convert defaultValue from string[] to ChipValue[], if needed\n  const propsDefaultValue = useMemo(() => {\n    return mixedValueToChipValue(defaultValue);\n  }, [defaultValue]);\n\n  // emit string[] or ChipValue[] on change, based on \"valueKey\" prop\n  const handleChange = useCallback(\n    (value: ChipValue[]) => {\n      const newValue = valueKey ? value.map(v => v[valueKey]) : value;\n      onChange?.(newValue as any);\n    },\n    [onChange, valueKey]\n  );\n\n  return useControlledState<ChipValue[]>(\n    !propsValue ? undefined : propsValue,\n    propsDefaultValue || [],\n    handleChange\n  );\n}\n\nfunction mixedValueToChipValue(\n  value?: (string | number | ChipValue)[] | null\n): ChipValue[] | undefined {\n  if (value == null) {\n    return undefined;\n  }\n  if (typeof value[0] !== 'object') {\n    return value.map(v => stringToChipValue(v as string));\n  }\n  return value as ChipValue[];\n}\n\nexport const ChipField = React.forwardRef(ChipFieldInner) as <T>(\n  props: ChipFieldProps<T> & {ref?: Ref<HTMLInputElement>}\n) => ReactElement;\n","import React, {ComponentPropsWithoutRef, ReactNode, useId} from 'react';\nimport clsx from 'clsx';\nimport {useController} from 'react-hook-form';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {InputSize} from '../input-field/input-size';\nimport {getInputFieldClassNames} from '../input-field/get-input-field-class-names';\nimport {AutoFocusProps, useAutoFocus} from '../../focus/use-auto-focus';\n\ninterface SwitchProps\n  extends AutoFocusProps,\n    Omit<ComponentPropsWithoutRef<'input'>, 'size'> {\n  size?: InputSize;\n  className?: string;\n  description?: ReactNode;\n  invalid?: boolean;\n  errorMessage?: string;\n}\nexport const Switch = React.forwardRef<HTMLInputElement, SwitchProps>(\n  (props, ref) => {\n    const {\n      children,\n      size = 'sm',\n      description,\n      className,\n      invalid,\n      autoFocus,\n      errorMessage,\n      ...domProps\n    } = props;\n\n    const inputRef = useObjectRef(ref);\n    useAutoFocus({autoFocus}, inputRef);\n\n    const style = getSizeClassName(size);\n    const fieldClassNames = getInputFieldClassNames(props);\n\n    const descriptionId = useId();\n\n    return (\n      <div className={clsx(className, 'isolate')}>\n        <label className=\"flex items-center select-none\">\n          <input\n            {...domProps}\n            type=\"checkbox\"\n            role=\"switch\"\n            aria-invalid={invalid || undefined}\n            aria-describedby={description ? descriptionId : undefined}\n            ref={inputRef}\n            className={clsx(\n              style,\n              !invalid &&\n                'checked:bg-primary dark:checked:bg-primary-dark checked:border-primary dark:checked:border-primary-dark',\n              invalid && 'checked:bg-danger checked:border-danger',\n              'outline-none cursor-pointer bg-chip border-chip border checked:bg-primary checked:border-primary p-0 overflow-hidden relative rounded-3xl appearance-none transition-colors flex-shrink-0 flex items-center outline-none',\n              'before:z-10 before:border before:rounded-3xl before:block before:bg-white before:transition-transform before:translate-x-2',\n              'checked:before:border-white',\n              'focus-visible:ring',\n              props.disabled && 'opacity-80 cursor-not-allowed'\n            )}\n          />\n          {children && (\n            <span\n              className={clsx(\n                fieldClassNames.size.font,\n                'ml-12',\n                invalid && 'text-danger',\n                props.disabled && 'text-disabled'\n              )}\n            >\n              {children}\n            </span>\n          )}\n        </label>\n        {description && !errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.description}>\n            {description}\n          </div>\n        )}\n        {errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.error}>\n            {errorMessage}\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\ninterface FormSwitchProps extends SwitchProps {\n  name: string;\n}\nexport function FormSwitch(props: FormSwitchProps) {\n  const {\n    field: {onChange, onBlur, value = false, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<SwitchProps> = {\n    onChange,\n    onBlur,\n    checked: value,\n    invalid,\n    errorMessage: error?.message,\n  };\n\n  return <Switch ref={ref} {...mergeProps(props, formProps)} />;\n}\n\nfunction getSizeClassName(size: InputSize): string {\n  switch (size) {\n    case 'xl':\n      return 'w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36';\n    case 'lg':\n      return 'w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30';\n    case 'md':\n      return 'w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24';\n    case 'xs':\n      return 'w-30 h-16 before:w-12 before:h-12 checked:before:translate-x-16';\n    default:\n      return 'w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20';\n  }\n}\n","export function randomString(length: number = 36) {\n  let random = '';\n  const possible =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n  for (let i = 0; i < length; i += 1) {\n    random += possible.charAt(Math.floor(Math.random() * possible.length));\n  }\n\n  return random;\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DeleteIcon = createSvgIcon(\n  <path d=\"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z\" />\n, 'DeleteOutlined');\n","import {DragMonitor} from './use-drag-monitor';\nimport {ConnectedDraggable, DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport type DragSessionStatus =\n  | 'dropSuccess'\n  | 'dropFail'\n  | 'dragging'\n  | 'inactive';\n\nexport interface DragSession {\n  dragTargetId?: DraggableId;\n  status: DragSessionStatus;\n}\n\nexport const draggables = new Map<DraggableId, ConnectedDraggable>();\nexport const droppables = new Map<DraggableId, ConnectedDroppable>();\nexport const dragMonitors = new Map<DraggableId, DragMonitor>();\nexport const dragSession: DragSession = {\n  status: 'inactive',\n};\n","import React from 'react';\n\ntype NativeEvent =\n  | React.PointerEvent\n  | PointerEvent\n  | React.DragEvent<HTMLElement>\n  | DragEvent;\n\nexport interface InteractableEvent {\n  x: number;\n  y: number;\n  deltaX: number;\n  deltaY: number;\n  rect: InteractableRect;\n  nativeEvent: NativeEvent;\n}\n\nexport interface InteractableRect {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n  angle?: number;\n}\n\nexport function interactableEvent({\n  e,\n  rect,\n  deltaX,\n  deltaY,\n}: {\n  e: NativeEvent;\n  rect: InteractableRect;\n  deltaX?: number;\n  deltaY?: number;\n}): InteractableEvent {\n  return {\n    rect,\n    x: e.clientX,\n    y: e.clientY,\n    deltaX: deltaX ?? 0,\n    deltaY: deltaY ?? 0,\n    nativeEvent: e,\n  };\n}\n","type InteractionName = null | 'resize' | 'rotate' | 'drag' | 'move';\n\nexport let activeInteraction: InteractionName = null;\n\nexport function setActiveInteraction(name: InteractionName) {\n  activeInteraction = name;\n}\n","import {InteractableRect} from '../interactable-event';\n\nexport function domRectToObj(rect: DOMRect): InteractableRect {\n  return {\n    left: rect.left,\n    top: rect.top,\n    width: rect.width,\n    height: rect.height,\n  };\n}\n","// use intersection observer instead of getBoundingClientRect for better performance as this will be called in onPointerMove event\nimport {InteractableRect} from '../interactable-event';\nimport {ConnectedMouseSelectable} from './mouse-selection/use-mouse-selectable';\nimport {DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport function updateRects(\n  targets: Map<DraggableId, ConnectedDroppable | ConnectedMouseSelectable>\n) {\n  const observer = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      const {width, height, left, top} = entry.boundingClientRect;\n      const [id, target] =\n        [...targets].find(\n          ([, target]) => target.ref.current === entry.target\n        ) || [];\n      if (id == null || target == null) return;\n\n      const rect: InteractableRect = {\n        width,\n        height,\n        left,\n        top,\n      };\n      targets.set(id, {...target, rect});\n    });\n    observer.disconnect();\n  });\n\n  [...targets.values()].forEach(target => {\n    if (target.ref.current) {\n      observer.observe(target.ref.current);\n    }\n  });\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragMonitors, dragSession, droppables} from './drag-state';\nimport {\n  InteractableEvent,\n  interactableEvent,\n  InteractableRect,\n} from '../interactable-event';\nimport {activeInteraction, setActiveInteraction} from '../active-interaction';\nimport {domRectToObj} from '../utils/dom-rect-to-obj';\nimport {updateRects} from './update-rects';\nimport {useGlobalListeners} from '@react-aria/utils';\nimport {DragMonitor} from './use-drag-monitor';\nimport {NativeFileDraggable} from './use-droppable';\n\ninterface DragState {\n  currentRect?: InteractableRect;\n  lastPosition: {x: number; y: number};\n  clickedEl?: HTMLElement;\n}\n\nexport type DragPreviewRenderer = (\n  draggable: ConnectedDraggable,\n  callback: (node: HTMLElement) => void\n) => void;\n\nexport type DraggableId = string | number | object;\n\nexport interface ConnectedDraggable<T = any> {\n  type: string;\n  id: DraggableId;\n  getData: () => T;\n  ref: RefObject<HTMLElement>;\n}\n\n// Either draggable from within the app, or file dragged in from the desktop\nexport type MixedDraggable = ConnectedDraggable | NativeFileDraggable;\n\ninterface UseDragProps extends ConnectedDraggable {\n  disabled?: boolean;\n  onDragStart?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragMove?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragEnd?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  preview?: RefObject<DragPreviewRenderer>;\n  hidePreview?: boolean;\n}\nexport function useDraggable({\n  id,\n  disabled,\n  ref,\n  preview,\n  hidePreview,\n  ...options\n}: UseDragProps) {\n  const dragHandleRef = useRef<HTMLButtonElement>(null);\n  const {addGlobalListener, removeAllGlobalListeners} = useGlobalListeners();\n\n  const state = useRef<DragState>({\n    lastPosition: {x: 0, y: 0},\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    if (!disabled) {\n      draggables.set(id, {\n        ...draggables.get(id),\n        id,\n        ref,\n        type: optionsRef.current.type,\n        getData: optionsRef.current.getData,\n      });\n    } else {\n      draggables.delete(id);\n    }\n    return () => {\n      draggables.delete(id);\n    };\n  }, [id, disabled, optionsRef, ref]);\n\n  // notify monitors connected to the same drag type as this draggable\n  const notifyMonitors = (callback: (m: DragMonitor) => void) => {\n    dragMonitors.forEach(monitor => {\n      if (monitor.type === draggables.get(id)?.type) {\n        callback(monitor);\n      }\n    });\n  };\n\n  const onDragStart = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = draggables.get(id);\n    const el = ref.current;\n    const clickedOnHandle =\n      !dragHandleRef.current ||\n      !state.clickedEl ||\n      dragHandleRef.current.contains(state.clickedEl);\n\n    // if another interaction is in progress (rotate, resize, drag etc.), bail\n    if (activeInteraction || !el || !draggable || !clickedOnHandle) {\n      e.preventDefault();\n      e.stopPropagation();\n      return;\n    }\n\n    updateRects(droppables);\n    setActiveInteraction('drag');\n\n    // hide default browser ghost image\n    if (hidePreview) {\n      hideNativeGhostImage(e);\n    }\n    // this will hide default browser cursor icon, if \"dropEffect\" is not set in dragOver/dragEnter\n    e.dataTransfer.effectAllowed = 'move';\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = domRectToObj(el.getBoundingClientRect());\n    const ie = interactableEvent({rect: state.currentRect!, e});\n\n    // If there is a preview option, use it to render a custom preview image that will\n    // appear under the pointer while dragging. If not, the element itself is dragged by the browser.\n    if (preview?.current) {\n      preview.current(draggable, node => {\n        // Compute the offset that the preview will appear under the mouse.\n        // If possible, this is based on the point the user clicked on the target.\n        // If the preview is much smaller, then just use the center point of the preview.\n        const size = node.getBoundingClientRect();\n        const rect = e.currentTarget.getBoundingClientRect();\n        let x = e.clientX - rect.x;\n        let y = e.clientY - rect.y;\n        if (x > size.width || y > size.height) {\n          x = size.width / 2;\n          y = size.height / 2;\n        }\n\n        // Rounding height to an even number prevents blurry preview seen on some screens\n        const height = 2 * Math.round(rect.height / 2);\n        node.style.height = `${height}px`;\n\n        e.dataTransfer.setDragImage(node, 0, 0);\n      });\n    }\n\n    dragSession.status = 'dragging';\n    dragSession.dragTargetId = id;\n    if (ref.current) {\n      ref.current.dataset.dragging = 'true';\n    }\n\n    optionsRef.current.onDragStart?.(ie, draggable);\n\n    // wait until next frame so changes made in \"onDragStart\" are reflected in drag monitors\n    requestAnimationFrame(() => {\n      notifyMonitors(m => m.onDragStart?.(ie, draggable));\n    });\n\n    // firefox does not provide clientX/clientY in \"onDrag\", need to listen for dragOver on window instead\n    addGlobalListener(window, 'dragover', onDragOver, true);\n  };\n\n  const onDragOver = (e: React.DragEvent<HTMLElement> | DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!state.currentRect) return;\n\n    const deltaX = e.clientX - state.lastPosition.x;\n    const deltaY = e.clientY - state.lastPosition.y;\n\n    const newRect = {\n      ...state.currentRect,\n      left: state.currentRect.left + deltaX,\n      top: state.currentRect.top + deltaY,\n    };\n\n    const ie = interactableEvent({rect: newRect, e, deltaX, deltaY});\n\n    const target = draggables.get(id);\n    if (target) {\n      optionsRef.current.onDragMove?.(ie, target);\n      notifyMonitors(m => m.onDragMove?.(ie, target));\n    }\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = newRect;\n  };\n\n  const onDragEnd = (e: React.DragEvent<HTMLElement>) => {\n    removeAllGlobalListeners();\n    if (!state.currentRect) return;\n\n    setActiveInteraction(null);\n    if (emptyImage) {\n      emptyImage.remove();\n    }\n\n    const ie = interactableEvent({rect: state.currentRect, e});\n\n    const draggable = draggables.get(id);\n    if (draggable) {\n      optionsRef.current.onDragEnd?.(ie, draggable);\n      notifyMonitors(m => m.onDragEnd?.(ie, draggable, dragSession!.status));\n    }\n\n    // wait a frame before clearing so monitors have a chance to use drag session status\n    requestAnimationFrame(() => {\n      dragSession.dragTargetId = undefined;\n      dragSession.status = 'inactive';\n      if (ref.current) {\n        delete ref.current.dataset.dragging;\n      }\n    });\n  };\n\n  const draggableProps = {\n    draggable: true,\n    onDragStart,\n    onDragEnd,\n    onPointerDown: (e: React.PointerEvent) => {\n      state.clickedEl = e.target as HTMLElement;\n    },\n  };\n\n  return {draggableProps, dragHandleRef};\n}\n\nlet emptyImage: HTMLImageElement | undefined;\nfunction hideNativeGhostImage(e: React.DragEvent) {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    // image needs to be in the dom to prevent \"globe\" icon in chrome\n    document.body.append(emptyImage);\n    emptyImage.src =\n      'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  e.dataTransfer.setDragImage(emptyImage, 0, 0);\n}\n","import {UploadedFile} from '../../../uploads/uploaded-file';\n\nexport async function* readFilesFromDataTransfer(dataTransfer: DataTransfer) {\n  for (const item of dataTransfer.items) {\n    if (item.kind === 'file') {\n      if (typeof item.webkitGetAsEntry === 'function') {\n        const entry: FileSystemEntry | null = item.webkitGetAsEntry();\n        if (!entry) continue;\n\n        if (entry.isFile) {\n          if (entry.name === '.DS_Store') continue;\n          yield new UploadedFile(item.getAsFile()!, entry.fullPath);\n        } else if (entry.isDirectory) {\n          yield* getEntries(entry as FileSystemDirectoryEntry);\n        }\n      } else {\n        const file = item.getAsFile();\n        if (!file || file.name === '.DS_Store') continue;\n        yield new UploadedFile(file, (item as any).fullPath);\n      }\n    }\n  }\n}\n\nasync function* getEntries(item: FileSystemDirectoryEntry): AsyncIterable<any> {\n  const reader = item.createReader();\n\n  // We must call readEntries repeatedly because there may be a limit to the\n  // number of entries that are returned at once.\n  let entries: FileSystemEntry[];\n  do {\n    entries = await new Promise((resolve, reject) => {\n      reader.readEntries(resolve, reject);\n    });\n\n    for (const entry of entries) {\n      if (entry.isFile) {\n        if (entry.name === '.DS_Store') continue;\n        const file = await getEntryFile(entry as FileSystemFileEntry);\n        yield new UploadedFile(file, entry.fullPath);\n      } else if (entry.isDirectory) {\n        yield* getEntries(entry as FileSystemDirectoryEntry);\n      }\n    }\n  } while (entries.length > 0);\n}\n\nfunction getEntryFile(entry: FileSystemFileEntry): Promise<File> {\n  return new Promise((resolve, reject) => entry.file(resolve, reject));\n}\n","export async function asyncIterableToArray<T>(\n  iterator: AsyncIterable<T>\n): Promise<T[]> {\n  const items: T[] = [];\n  for await (const item of iterator) {\n    items.push(item);\n  }\n  return items;\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragSession, droppables} from './drag-state';\nimport {readFilesFromDataTransfer} from './read-files-from-data-transfer';\nimport {asyncIterableToArray} from '../../../utils/array/async-iterable-to-array';\nimport {InteractableRect} from '../interactable-event';\nimport {DraggableId, MixedDraggable} from './use-draggable';\n\nexport interface ConnectedDroppable {\n  id: DraggableId;\n  rect?: InteractableRect;\n  disabled?: boolean;\n  ref: RefObject<HTMLElement>;\n}\n\n// File dragged in from desktop\nexport interface NativeFileDraggable {\n  type: 'nativeFile';\n  el: null;\n  ref: null;\n  getData: () => Promise<File[]>;\n}\n\ninterface UseDroppableProps<T extends HTMLElement> {\n  id: DraggableId;\n  disabled?: boolean;\n  types: ('nativeFile' | string)[];\n  ref: RefObject<T>;\n  onDragEnter?: (target: MixedDraggable) => void;\n  onDragLeave?: (target: MixedDraggable) => void;\n  // Handler that is called after draggable is held over droppable for a period of time.\n  // This typically opens the item so that the user can drop within it.\n  onDropActivate?: (e: MixedDraggable) => void;\n  onDrop?: (target: MixedDraggable) => void | Promise<void> | false;\n  acceptsDrop?: (target: MixedDraggable) => boolean;\n}\n\ninterface DroppableState {\n  dragOverElements: Set<Element>;\n  dropActivateTimer: ReturnType<typeof setTimeout> | undefined;\n}\n\nconst DROP_ACTIVATE_TIMEOUT = 400;\n\nexport function useDroppable<T extends HTMLElement>({\n  id,\n  disabled,\n  ref,\n  ...options\n}: UseDroppableProps<T>) {\n  const state = useRef<DroppableState>({\n    dragOverElements: new Set<Element>(),\n    dropActivateTimer: undefined,\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    droppables.set(id, {\n      ...droppables.get(id),\n      disabled,\n      id,\n      ref,\n    });\n    return () => {\n      droppables.delete(id);\n    };\n  }, [id, optionsRef, disabled, ref]);\n\n  // check if drop target accepted drag target\n  const canDrop = (draggable: MixedDraggable): boolean => {\n    const options = optionsRef.current;\n\n    return !!(\n      draggable?.type &&\n      ref.current !== draggable.ref?.current &&\n      options.types.includes(draggable.type) &&\n      (!options.acceptsDrop || options.acceptsDrop(draggable))\n    );\n  };\n\n  const fireDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n    }\n  };\n\n  const onDragEnter = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    state.dragOverElements.add(e.target as Element);\n    if (state.dragOverElements.size > 1) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      optionsRef.current.onDragEnter?.(draggable);\n\n      clearTimeout(state.dropActivateTimer);\n      if (typeof optionsRef.current.onDropActivate === 'function') {\n        state.dropActivateTimer = setTimeout(() => {\n          if (draggable) {\n            optionsRef.current.onDropActivate?.(draggable);\n          }\n        }, DROP_ACTIVATE_TIMEOUT);\n      }\n    }\n  };\n\n  const onDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    // Track all the targets of dragenter events in a set, and remove them\n    // in dragleave. When the set becomes empty, we've left the drop target completely.\n    // We must also remove any elements that are no longer in the DOM, because dragleave\n    // events will never be fired for these. This can happen, for example, with drop\n    // indicators between items, which disappear when the drop target changes.\n    state.dragOverElements.delete(e.target as Element);\n    for (const element of state.dragOverElements) {\n      if (!e.currentTarget.contains(element)) {\n        state.dragOverElements.delete(element);\n      }\n    }\n\n    if (state.dragOverElements.size > 0) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      fireDragLeave(e);\n      clearTimeout(state.dropActivateTimer);\n    }\n  };\n\n  const onDrop = async (e: React.DragEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    state.dragOverElements.clear();\n\n    fireDragLeave(e);\n    clearTimeout(state.dropActivateTimer);\n\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n\n      // drop target does not accept this type of droppable\n      if (!canDrop(draggable)) {\n        if (dragSession.status !== 'inactive') {\n          dragSession.status = 'dropFail';\n        }\n        // drop target accepts this type, but it might still reject the drop in callback\n      } else {\n        // allow callback to mark drop as failed\n        const dropResult = optionsRef.current.onDrop?.(draggable);\n\n        // drag session will only be active for draggables within the app, never for files dragged in from desktop\n        if (dragSession.status !== 'inactive') {\n          dragSession.status =\n            dropResult === false ? 'dropFail' : 'dropSuccess';\n        }\n      }\n    }\n  };\n\n  const droppableProps = {\n    onDragOver: (e: React.DragEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    onDragEnter,\n    onDragLeave,\n    onDrop,\n  };\n\n  return {\n    droppableProps: disabled ? {} : droppableProps,\n  };\n}\n\nfunction getDraggable(\n  e: React.DragEvent<HTMLElement>\n): MixedDraggable | undefined {\n  if (dragSession.dragTargetId != null) {\n    return draggables.get(dragSession.dragTargetId);\n  } else if (e.dataTransfer.types.includes('Files')) {\n    return {\n      type: 'nativeFile',\n      el: null,\n      ref: null,\n      getData: () => {\n        return asyncIterableToArray(readFilesFromDataTransfer(e.dataTransfer));\n      },\n    };\n  }\n}\n","import {Permission} from './permission';\nimport {Subscription} from '../billing/subscription';\nimport {Role} from './role';\nimport {SocialProfile} from './social-profile';\nimport {AccessToken} from './access-token';\n\nexport const USER_MODEL = 'user';\n\nexport interface User {\n  id: number;\n  display_name: string;\n  username?: string;\n  first_name?: string;\n  last_name?: string;\n  avatar?: string;\n  email_verified_at: string;\n  permissions?: Permission[];\n  email: string;\n  password: string;\n  language: string;\n  timezone: string;\n  country: string;\n  created_at: string;\n  updated_at: string;\n  subscriptions?: Omit<Subscription, 'user'>[];\n  roles: Role[];\n  social_profiles: SocialProfile[];\n  tokens?: AccessToken[];\n  has_password: boolean;\n  available_space: number | null;\n  unread_notifications_count?: number;\n  card_last_four?: number;\n  card_brand?: string;\n  card_expires?: string;\n  model_type: 'user';\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const LinkIcon = createSvgIcon(\n  <path d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z\" />\n, 'LinkOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MoreVertIcon = createSvgIcon(\n  <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\n, 'MoreVertOutlined');\n","import React, {useContext} from 'react';\nimport {FileEntry} from '../file-entry';\nimport {useSettings} from '../../core/settings/use-settings';\n\nexport function useFileEntryUrls(\n  entry?: FileEntry,\n  options?: {thumbnail?: boolean; downloadHashes?: string[]}\n): {previewUrl?: string; downloadUrl?: string} {\n  const {base_url} = useSettings();\n  const urlSearchParams = useContext(FileEntryUrlsContext);\n\n  if (!entry) {\n    return {};\n  }\n\n  const urls = {\n    previewUrl: `${base_url}/${entry.url}`,\n    downloadUrl: `${base_url}/api/v1/file-entries/download/${\n      options?.downloadHashes || entry.hash\n    }`,\n  };\n\n  if (urlSearchParams) {\n    // preview url\n    urls.previewUrl = addParams(\n      urls.previewUrl,\n      {...urlSearchParams, thumbnail: options?.thumbnail ? 'true' : ''},\n      base_url\n    );\n\n    // download url\n    urls.downloadUrl = addParams(urls.downloadUrl, urlSearchParams, base_url);\n  }\n\n  return urls;\n}\n\nexport const FileEntryUrlsContext = React.createContext<\n  Record<string, string | number | null | undefined>\n>(null!);\n\nfunction addParams(urlString: string, params: object, baseUrl: string): string {\n  const url = new URL(urlString, baseUrl);\n  Object.entries(params).forEach(([key, value]) => {\n    url.searchParams.append(key, value as string);\n  });\n  return url.toString();\n}\n","import React from 'react';\nimport {FileEntry} from '../file-entry';\n\nexport interface FilePreviewContextValue {\n  entries: FileEntry[];\n  activeIndex: number;\n}\n\nexport const FilePreviewContext = React.createContext<FilePreviewContextValue>(\n  null!\n);\n","import {ReactNode, useContext} from 'react';\nimport clsx from 'clsx';\nimport {Button} from '../../../ui/buttons/button';\nimport {downloadFileFromUrl} from '../../utils/download-file-from-url';\nimport {FilePreviewContext} from '../file-preview-context';\nimport {Trans} from '../../../i18n/trans';\nimport {FilePreviewProps} from './file-preview-props';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\n\ninterface Props extends FilePreviewProps {\n  message?: ReactNode;\n}\nexport function DefaultFilePreview({message, className, allowDownload}: Props) {\n  const {entries, activeIndex} = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const content = message || <Trans message=\"No file preview available\" />;\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\n  return (\n    <div\n      className={clsx(\n        className,\n        'shadow bg-paper max-w-400 w-[calc(100%-40px)] text-center p-40 rounded'\n      )}\n    >\n      <div className=\"text-lg\">{content}</div>\n      {allowDownload && (\n        <div className=\"block mt-20 text-center\">\n          <Button\n            variant=\"flat\"\n            color=\"primary\"\n            onClick={() => {\n              if (downloadUrl) {\n                downloadFileFromUrl(downloadUrl);\n              }\n            }}\n          >\n            <Trans message=\"Download\" />\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}\n","import clsx from 'clsx';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\n\nexport function ImageFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <img\n      className={clsx(className, 'shadow')}\n      src={previewUrl}\n      alt={trans({\n        message: 'Preview for :name',\n        values: {name: entry.name},\n      })}\n    />\n  );\n}\n","import {useEffect, useState} from 'react';\nimport clsx from 'clsx';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {ProgressCircle} from '../../../ui/progress/progress-circle';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {Trans} from '../../../i18n/trans';\nimport {apiClient} from '../../../http/query-client';\n\nconst FIVE_MB = 5242880;\n\nexport function TextFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const [tooLarge, setTooLarge] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isFailed, setIsFailed] = useState(false);\n  const [contents, setContents] = useState<string | null>(null);\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  useEffect(() => {\n    if (!entry) return;\n    if (!previewUrl) {\n      setIsFailed(true);\n    } else if (entry.file_size! >= FIVE_MB) {\n      setTooLarge(true);\n      setIsLoading(false);\n    } else {\n      getFileContents(previewUrl)\n        .then(response => {\n          setContents(response.data);\n        })\n        .catch(() => {\n          setIsFailed(true);\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [entry, previewUrl]);\n\n  if (isLoading) {\n    return (\n      <ProgressCircle\n        isIndeterminate\n        aria-label={trans({message: 'Loading file contents'})}\n      />\n    );\n  }\n\n  if (tooLarge) {\n    return (\n      <DefaultFilePreview\n        {...props}\n        message={<Trans message=\"This file is too large to preview.\" />}\n      />\n    );\n  }\n\n  if (isFailed) {\n    return (\n      <DefaultFilePreview\n        {...props}\n        message={<Trans message=\"There was an issue previewing this file\" />}\n      />\n    );\n  }\n\n  return (\n    <pre\n      className={clsx(\n        'rounded bg-paper p-20 text-sm whitespace-pre-wrap break-words h-full overflow-y-auto w-full',\n        className\n      )}\n    >\n      <div className=\"container mx-auto\">{contents}</div>\n    </pre>\n  );\n}\n\nfunction getFileContents(src: string) {\n  return apiClient.get(src, {responseType: 'text'});\n}\n","import {useEffect, useRef, useState} from 'react';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\n\nexport function VideoFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {previewUrl} = useFileEntryUrls(entry);\n  const ref = useRef<HTMLVideoElement>(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <video\n      className={className}\n      ref={ref}\n      controls\n      controlsList=\"nodownload noremoteplayback\"\n      playsInline\n      autoPlay\n    >\n      <source\n        src={previewUrl}\n        type={entry.mime}\n        onError={() => {\n          setMediaInvalid(true);\n        }}\n      />\n    </video>\n  );\n}\n","import {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\nimport {useEffect, useRef, useState} from 'react';\n\nexport function AudioFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {previewUrl} = useFileEntryUrls(entry);\n  const ref = useRef<HTMLAudioElement>(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <audio\n      className={className}\n      ref={ref}\n      controls\n      controlsList=\"nodownload noremoteplayback\"\n      autoPlay\n    >\n      <source\n        src={previewUrl}\n        type={entry.mime}\n        onError={() => {\n          setMediaInvalid(true);\n        }}\n      />\n    </audio>\n  );\n}\n","import clsx from 'clsx';\nimport {FilePreviewProps} from './file-preview-props';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {DefaultFilePreview} from './default-file-preview';\n\nexport function PdfFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <iframe\n      title={trans({\n        message: 'Preview for :name',\n        values: {name: entry.name},\n      })}\n      className={clsx(className, 'w-full h-full')}\n      src={`${previewUrl}#toolbar=0`}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport {useEffect, useRef, useState} from 'react';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {ProgressCircle} from '../../../ui/progress/progress-circle';\nimport {FileEntry} from '../../file-entry';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {apiClient} from '../../../http/query-client';\n\nexport function WordDocumentFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const ref = useRef<HTMLIFrameElement>(null);\n  const [showDefault, setShowDefault] = useState(false);\n  const timeoutId = useRef<any>();\n  const [isLoading, setIsLoading] = useState(false);\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  useEffect(() => {\n    // Google Docs viewer only supports files up to 25MB\n    if (!previewUrl) {\n      setShowDefault(true);\n    } else if (entry.file_size && entry.file_size > 25000000) {\n      setShowDefault(true);\n    } else if (ref.current) {\n      ref.current.onload = () => {\n        clearTimeout(timeoutId.current);\n        setIsLoading(false);\n      };\n\n      buildPreviewUrl(previewUrl, entry).then(url => {\n        if (ref.current) {\n          ref.current.src = url;\n        }\n      });\n\n      // if preview iframe is not loaded\n      // after 5 seconds, bail and show default preview\n      timeoutId.current = setTimeout(() => {\n        setShowDefault(true);\n      }, 5000);\n    }\n  }, [entry, previewUrl]);\n\n  if (showDefault) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <div className={clsx(className, 'w-full h-full')}>\n      {isLoading && <ProgressCircle />}\n      <iframe\n        ref={ref}\n        title={trans({\n          message: 'Preview for :name',\n          values: {name: entry.name},\n        })}\n        className={clsx('w-full h-full', isLoading && 'hidden')}\n      />\n    </div>\n  );\n}\n\nasync function buildPreviewUrl(\n  urlString: string,\n  entry: FileEntry\n): Promise<string> {\n  const url = new URL(urlString);\n  // if we're not trying to preview shareable link we will need to generate\n  // preview token, otherwise it won't be publicly accessible\n  if (!url.searchParams.has('shareable_link')) {\n    const {data} = await apiClient.post(\n      `file-entries/${entry.id}/add-preview-token`\n    );\n    url.searchParams.append('preview_token', data.preview_token);\n  }\n\n  return buildOfficeLivePreviewUrl(url);\n}\n\nfunction buildOfficeLivePreviewUrl(url: URL) {\n  // https://docs.google.com/gview?embedded=true&url=\n  return `https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(\n    url.toString()\n  )}`;\n}\n","import {ImageFilePreview} from './file-preview/image-file-preview';\nimport {FileEntry} from '../file-entry';\nimport {DefaultFilePreview} from './file-preview/default-file-preview';\nimport {TextFilePreview} from './file-preview/text-file-preview';\nimport {VideoFilePreview} from './file-preview/video-file-preview';\nimport {AudioFilePreview} from './file-preview/audio-file-preview';\nimport {PdfFilePreview} from './file-preview/pdf-file-preview';\nimport {WordDocumentFilePreview} from './file-preview/word-document-file-preview';\n\nexport const AvailablePreviews = {\n  text: TextFilePreview,\n  video: VideoFilePreview,\n  audio: AudioFilePreview,\n  image: ImageFilePreview,\n  pdf: PdfFilePreview,\n  spreadsheet: WordDocumentFilePreview,\n  powerPoint: WordDocumentFilePreview,\n  word: WordDocumentFilePreview,\n  'text/rtf': DefaultFilePreview,\n} as const;\n\nexport function getPreviewForEntry(entry: FileEntry) {\n  const mime = entry?.mime as keyof typeof AvailablePreviews;\n  const type = entry?.type as keyof typeof AvailablePreviews;\n  return (\n    AvailablePreviews[mime] || AvailablePreviews[type] || DefaultFilePreview\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ChevronLeftIcon = createSvgIcon(\n  <path d=\"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z\" />\n, 'ChevronLeftOutlined');\n","import clsx from 'clsx';\nimport {FileTypeIcon} from './file-type-icon';\nimport {useFileEntryUrls} from '../hooks/file-entry-urls';\nimport {useTrans} from '../../i18n/use-trans';\nimport {FileEntry} from '../file-entry';\n\ninterface Props {\n  file: FileEntry;\n  className?: string;\n  iconClassName?: string;\n  showImage?: boolean;\n}\nexport function FileThumbnail({\n  file,\n  className,\n  iconClassName,\n  showImage = true,\n}: Props) {\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(file, {thumbnail: true});\n\n  if (showImage && file.type === 'image' && previewUrl) {\n    const alt = trans({\n      message: ':fileName thumbnail',\n      values: {fileName: file.name},\n    });\n    return (\n      <img\n        className={clsx(className, 'object-cover')}\n        src={previewUrl}\n        alt={alt}\n        draggable={false}\n      />\n    );\n  }\n  return <FileTypeIcon className={iconClassName} type={file.type} />;\n}\n","import {AnimatePresence, m} from 'framer-motion';\nimport {Fragment, ReactNode, useContext, useMemo} from 'react';\nimport clsx from 'clsx';\nimport {getPreviewForEntry} from './available-previews';\nimport {FileEntry} from '../file-entry';\nimport {FilePreviewContext} from './file-preview-context';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {ChevronLeftIcon} from '../../icons/material/ChevronLeft';\nimport {ChevronRightIcon} from '../../icons/material/ChevronRight';\nimport {FileDownloadIcon} from '../../icons/material/FileDownload';\nimport {downloadFileFromUrl} from '../utils/download-file-from-url';\nimport {useFileEntryUrls} from '../hooks/file-entry-urls';\nimport {Trans} from '../../i18n/trans';\nimport {Button} from '../../ui/buttons/button';\nimport {CloseIcon} from '../../icons/material/Close';\nimport {FileThumbnail} from '../file-type-icon/file-thumbnail';\nimport {useMediaQuery} from '../../utils/hooks/use-media-query';\nimport {KeyboardArrowLeftIcon} from '../../icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '../../icons/material/KeyboardArrowRight';\nimport {useControlledState} from '@react-stately/utils';\nimport {opacityAnimation} from '../../ui/animation/opacity-animation';\n\nexport interface FilePreviewContainerProps {\n  entries: FileEntry[];\n  activeIndex?: number;\n  defaultActiveIndex?: number;\n  onActiveIndexChange?: (index: number) => void;\n  onClose?: () => void;\n  showHeader?: boolean;\n  headerActionsLeft?: ReactNode;\n  className?: string;\n  allowDownload?: boolean;\n}\nexport function FilePreviewContainer({\n  entries,\n  onClose,\n  showHeader = true,\n  className,\n  headerActionsLeft,\n  allowDownload = true,\n  ...props\n}: FilePreviewContainerProps) {\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n\n  const [activeIndex, setActiveIndex] = useControlledState(\n    props.activeIndex,\n    props.defaultActiveIndex || 0,\n    props.onActiveIndexChange\n  );\n\n  const activeEntry = entries[activeIndex];\n  const contextValue = useMemo(() => {\n    return {entries, activeIndex};\n  }, [entries, activeIndex]);\n  const Preview = getPreviewForEntry(activeEntry);\n\n  if (!activeEntry) {\n    onClose?.();\n    return null;\n  }\n\n  const canOpenNext = entries.length - 1 > activeIndex;\n  const openNext = () => {\n    setActiveIndex(activeIndex + 1);\n  };\n  const canOpenPrevious = activeIndex > 0;\n  const openPrevious = () => {\n    setActiveIndex(activeIndex - 1);\n  };\n\n  return (\n    <FilePreviewContext.Provider value={contextValue}>\n      {showHeader && (\n        <Header\n          actionsLeft={headerActionsLeft}\n          isMobile={isMobile}\n          onClose={onClose}\n          onNext={canOpenNext ? openNext : undefined}\n          onPrevious={canOpenPrevious ? openPrevious : undefined}\n          allowDownload={allowDownload}\n        />\n      )}\n      <div className={clsx('overflow-hidden relative flex-auto', className)}>\n        {isMobile && (\n          <IconButton\n            size=\"lg\"\n            className=\"text-muted absolute left-0 top-1/2 transform -translate-y-1/2 z-10\"\n            disabled={!canOpenPrevious}\n            onClick={openPrevious}\n          >\n            <KeyboardArrowLeftIcon />\n          </IconButton>\n        )}\n        <AnimatePresence initial={false}>\n          <m.div\n            className=\"absolute inset-0 flex items-center justify-center\"\n            key={activeEntry.id}\n            {...opacityAnimation}\n          >\n            <Preview\n              className=\"max-h-[calc(100%-30px)]\"\n              entry={activeEntry}\n              allowDownload={allowDownload}\n            />\n          </m.div>\n        </AnimatePresence>\n        {isMobile && (\n          <IconButton\n            size=\"lg\"\n            className=\"text-muted absolute right-0 top-1/2 transform -translate-y-1/2 z-10\"\n            disabled={!canOpenNext}\n            onClick={openNext}\n          >\n            <KeyboardArrowRightIcon />\n          </IconButton>\n        )}\n      </div>\n    </FilePreviewContext.Provider>\n  );\n}\n\ninterface HeaderProps {\n  onNext?: () => void;\n  onPrevious?: () => void;\n  onClose?: () => void;\n  isMobile: boolean | null;\n  actionsLeft?: ReactNode;\n  allowDownload?: boolean;\n}\nfunction Header({\n  onNext,\n  onPrevious,\n  onClose,\n  isMobile,\n  actionsLeft,\n  allowDownload,\n}: HeaderProps) {\n  const {entries, activeIndex} = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\n\n  const desktopDownloadButton = (\n    <Button\n      startIcon={<FileDownloadIcon />}\n      variant=\"text\"\n      onClick={() => {\n        if (downloadUrl) {\n          downloadFileFromUrl(downloadUrl);\n        }\n      }}\n    >\n      <Trans message=\"Download\" />\n    </Button>\n  );\n\n  const mobileDownloadButton = (\n    <IconButton\n      onClick={() => {\n        if (downloadUrl) {\n          downloadFileFromUrl(downloadUrl);\n        }\n      }}\n    >\n      <FileDownloadIcon />\n    </IconButton>\n  );\n\n  const downloadButton = isMobile\n    ? mobileDownloadButton\n    : desktopDownloadButton;\n\n  return (\n    <div className=\"flex items-center justify-between gap-20 bg-paper border-b flex-shrink-0 text-sm min-h-50 px-10 text-muted\">\n      <div className=\"flex items-center gap-4 w-1/3 justify-start\">\n        {actionsLeft}\n        {allowDownload ? downloadButton : undefined}\n      </div>\n      <div className=\"flex items-center gap-10 w-1/3 justify-center flex-nowrap text-main\">\n        <FileThumbnail\n          file={activeEntry}\n          iconClassName=\"w-16 h-16\"\n          showImage={false}\n        />\n        <div className=\"whitespace-nowrap overflow-hidden overflow-ellipsis\">\n          {activeEntry.name}\n        </div>\n      </div>\n      <div className=\"w-1/3 flex items-center gap-10 justify-end whitespace-nowrap\">\n        {!isMobile && (\n          <Fragment>\n            <IconButton disabled={!onPrevious} onClick={onPrevious}>\n              <ChevronLeftIcon />\n            </IconButton>\n            <div>{activeIndex + 1}</div>\n            <div>/</div>\n            <div>{entries.length}</div>\n            <IconButton disabled={!onNext} onClick={onNext}>\n              <ChevronRightIcon />\n            </IconButton>\n            <div className=\"bg-divider w-1 h-24 mx-20\" />\n          </Fragment>\n        )}\n        <IconButton radius=\"rounded-none\" onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n","import {\n  FilePreviewContainer,\n  FilePreviewContainerProps,\n} from './file-preview-container';\nimport {useDialogContext} from '../../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../../ui/overlays/dialog/dialog';\n\ninterface Props extends Omit<FilePreviewContainerProps, 'onClose'> {}\nexport function FilePreviewDialog(props: Props) {\n  return (\n    <Dialog\n      size=\"fullscreenTakeover\"\n      background=\"bg-alt\"\n      className=\"flex flex-col\"\n    >\n      <Content {...props} />\n    </Dialog>\n  );\n}\n\nfunction Content(props: Props) {\n  const {close} = useDialogContext();\n  return <FilePreviewContainer onClose={close} {...props} />;\n}\n","import {\n  BackendFilter,\n  FilterControlType,\n} from '../../datatable/filters/backend-filter';\nimport {\n  CreatedAtFilter,\n  UpdatedAtFilter,\n} from '../../datatable/filters/timestamp-filters';\nimport {message} from '../../i18n/message';\nimport {USER_MODEL} from '../../auth/user';\n\nexport const FILE_ENTRY_TYPE_FILTER = new BackendFilter({\n  type: FilterControlType.Select,\n  key: 'type',\n  label: message('Type'),\n  description: message('Type of the file'),\n  defaultValue: '05',\n  options: [\n    {key: '02', label: message('Text'), value: 'text'},\n    {\n      key: '03',\n      label: message('Audio'),\n      value: 'audio',\n    },\n    {\n      key: '04',\n      label: message('Video'),\n      value: 'video',\n    },\n    {\n      key: '05',\n      label: message('Image'),\n      value: 'image',\n    },\n    {key: '06', label: message('PDF'), value: 'pdf'},\n    {\n      key: '07',\n      label: message('Spreadsheet'),\n      value: 'spreadsheet',\n    },\n    {\n      key: '08',\n      label: message('Word Document'),\n      value: 'word',\n    },\n    {\n      key: '09',\n      label: message('Photoshop'),\n      value: 'photoshop',\n    },\n    {\n      key: '10',\n      label: message('Archive'),\n      value: 'archive',\n    },\n    {\n      key: '11',\n      label: message('Folder'),\n      value: 'folder',\n    },\n  ],\n});\n\nexport const FILE_ENTRY_INDEX_FILTERS: BackendFilter[] = [\n  FILE_ENTRY_TYPE_FILTER,\n  new BackendFilter({\n    type: FilterControlType.Select,\n    key: 'public',\n    label: message('Visibility'),\n    defaultValue: '01',\n    description: message('Whether file is publicly accessible'),\n    options: [\n      {key: '01', label: message('Private'), value: false},\n      {key: '02', label: message('Public'), value: true},\n    ],\n  }),\n  new CreatedAtFilter({\n    description: message('Date file was uploaded'),\n  }),\n  new UpdatedAtFilter({\n    description: message('Date file was last changed'),\n  }),\n  new BackendFilter({\n    type: FilterControlType.SelectModel,\n    model: USER_MODEL,\n    key: 'owner_id',\n    label: message('Uploader'),\n    description: message('User that this file was uploaded by'),\n  }),\n];\n","import {useControlledState} from '@react-stately/utils';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  CalendarDate,\n  DateValue,\n  getLocalTimeZone,\n  isSameDay,\n  now,\n  toCalendarDate,\n  toZoned,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\n\nconst Now = now(getLocalTimeZone());\n\nexport type Granularity = 'day' | 'minute';\n\nexport type DatePickerState = BaseDatePickerState;\n\nexport interface BaseDatePickerState<T = ZonedDateTime, P = boolean> {\n  timeZone: string;\n  granularity: Granularity;\n  selectedValue: T;\n  setSelectedValue: (value: T) => void;\n  calendarIsOpen: boolean;\n  setCalendarIsOpen: (isOpen: boolean) => void;\n  calendarDates: CalendarDate[];\n  setCalendarDates: (dates: CalendarDate[]) => void;\n  dayIsActive: (day: CalendarDate) => boolean;\n  dayIsHighlighted: (day: CalendarDate) => boolean;\n  dayIsRangeStart: (day: CalendarDate) => boolean;\n  dayIsRangeEnd: (day: CalendarDate) => boolean;\n  isPlaceholder: P;\n  setIsPlaceholder: (value: P) => void;\n  min?: ZonedDateTime;\n  max?: ZonedDateTime;\n  closeDialogOnSelection: boolean;\n  getCellProps: (\n    date: CalendarDate,\n    isSameMonth: boolean\n  ) => HTMLAttributes<HTMLElement>;\n}\n\nexport interface DatePickerValueProps<T> {\n  value?: T | null | '';\n  defaultValue?: T | null;\n  onChange?: (value: T) => void;\n  min?: DateValue;\n  max?: DateValue;\n  granularity?: Granularity;\n  closeDialogOnSelection?: boolean;\n}\nexport function useDatePickerState(\n  props: DatePickerValueProps<ZonedDateTime>\n): BaseDatePickerState {\n  const [isPlaceholder, setIsPlaceholder] = useState(\n    !props.value && !props.defaultValue\n  );\n\n  const [selectedValue, setSelectedStateValue] = useControlledState(\n    props.value || Now,\n    props.defaultValue || Now,\n    props.onChange\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timeZone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(selectedValue, props);\n\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return [toCalendarDate(selectedValue)];\n  });\n\n  const setSelectedValue = useCallback(\n    (newValue: DateValue) => {\n      if (min && newValue.compare(min) < 0) {\n        newValue = min;\n      } else if (max && newValue.compare(max) > 0) {\n        newValue = max;\n      }\n\n      // preserve time\n      const value = selectedValue\n        ? selectedValue.set(newValue)\n        : toZoned(newValue, getLocalTimeZone());\n      setSelectedStateValue(value);\n      setCalendarDates([toCalendarDate(value)]);\n      setIsPlaceholder(false);\n    },\n    [setSelectedStateValue, min, max, selectedValue]\n  );\n\n  const dayIsActive = useCallback(\n    (day: DateValue) => !isPlaceholder && isSameDay(selectedValue, day),\n    [selectedValue, isPlaceholder]\n  );\n\n  const getCellProps = useCallback(\n    (date: DateValue): HTMLAttributes<HTMLElement> => {\n      return {\n        onClick: () => {\n          setSelectedValue?.(date);\n          if (closeDialogOnSelection) {\n            setCalendarIsOpen?.(false);\n          }\n        },\n      };\n    },\n    [setSelectedValue, setCalendarIsOpen, closeDialogOnSelection]\n  );\n\n  return {\n    selectedValue,\n    setSelectedValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted: () => false,\n    dayIsRangeStart: () => false,\n    dayIsRangeEnd: () => false,\n    getCellProps,\n    calendarDates,\n    setCalendarDates,\n    isPlaceholder,\n    setIsPlaceholder,\n    min,\n    max,\n    granularity,\n    timeZone,\n    closeDialogOnSelection,\n  };\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  Fragment,\n  MouseEvent,\n  useRef,\n} from 'react';\nimport {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport {\n  DatePickerValueProps,\n  useDatePickerState,\n} from './use-date-picker-state';\nimport {DialogTrigger} from '../../../../overlays/dialog/dialog-trigger';\nimport {DateRangeIcon} from '../../../../../icons/material/DateRange';\nimport {Dialog} from '../../../../overlays/dialog/dialog';\nimport {DialogBody} from '../../../../overlays/dialog/dialog-body';\nimport {Calendar} from '../calendar/calendar';\nimport {\n  DatePickerField,\n  DatePickerFieldProps,\n} from '../date-range-picker/date-picker-field';\nimport {DateSegmentList} from '../segments/date-segment-list';\nimport {useDateFormatter} from '../../../../../i18n/use-date-formatter';\nimport {useTrans} from '../../../../../i18n/use-trans';\n\nexport interface DatePickerProps\n  extends Omit<DatePickerFieldProps, 'children'>,\n    DatePickerValueProps<ZonedDateTime> {}\nexport function DatePicker(props: DatePickerProps) {\n  const state = useDatePickerState(props);\n  const inputRef = useRef<HTMLDivElement>(null);\n\n  const dialog = (\n    <DialogTrigger\n      offset={8}\n      placement=\"bottom-start\"\n      isOpen={state.calendarIsOpen}\n      onOpenChange={state.setCalendarIsOpen}\n      type=\"popover\"\n      triggerRef={inputRef}\n      returnFocusToTrigger={false}\n      moveFocusToDialog={false}\n    >\n      <Dialog size=\"auto\">\n        <DialogBody className=\"flex items-start gap-40\">\n          <Calendar state={state} visibleMonths={1} />\n        </DialogBody>\n      </Dialog>\n    </DialogTrigger>\n  );\n\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    },\n  };\n\n  return (\n    <Fragment>\n      <DatePickerField\n        ref={inputRef}\n        wrapperProps={openOnClick}\n        endAdornment={<DateRangeIcon />}\n        {...props}\n      >\n        <DateSegmentList\n          segmentProps={openOnClick}\n          state={state}\n          value={state.selectedValue}\n          onChange={state.setSelectedValue}\n          isPlaceholder={state.isPlaceholder}\n        />\n      </DatePickerField>\n      {dialog}\n    </Fragment>\n  );\n}\n\ninterface FormDatePickerProps extends DatePickerProps {\n  name: string;\n}\nexport function FormDatePicker(props: FormDatePickerProps) {\n  const {min, max} = props;\n  const {trans} = useTrans();\n  const {format} = useDateFormatter();\n  const {\n    field: {onChange, onBlur, value = null, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n    rules: {\n      validate: v => {\n        if (!v) return;\n        const date = parseAbsoluteToLocal(v);\n        if (min && date.compare(min) < 0) {\n          return trans({\n            message: 'Enter a date after :date',\n            values: {date: format(v)},\n          });\n        }\n        if (max && date.compare(max) > 0) {\n          return trans({\n            message: 'Enter a date before :date',\n            values: {date: format(v)},\n          });\n        }\n      },\n    },\n  });\n\n  const parsedValue: null | ZonedDateTime = value\n    ? parseAbsoluteToLocal(value)\n    : null;\n\n  const formProps: Partial<DatePickerProps> = {\n    onChange: e => {\n      onChange(e.toAbsoluteString());\n    },\n    onBlur,\n    value: parsedValue,\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref,\n  };\n\n  return <DatePicker {...mergeProps(formProps, props)} />;\n}\n\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\n  return ['hour', 'minute', 'dayPeriod'].includes(\n    (e.currentTarget as HTMLElement).ariaLabel || ''\n  );\n}\n"],"names":["DashboardLayoutContext","createContext","useBlockBodyOverflow","useEffect","DashboardLayout","children","leftSidenavStatus","leftSidenav","onLeftSidenavChange","rightSidenavStatus","rightSidenav","onRightSidenavChange","name","leftSidenavCanBeCompact","domProps","isMobile","useMediaQuery","defaultLeftSidenavStatus","useMemo","getFromLocalStorage","setLeftSidenavStatus","useControlledState","rightSidenavStatusDefault","userSelected","_setRightSidenavStatus","setRightSidenavStatus","useCallback","status","setInLocalStorage","shouldShowUnderlay","_jsx","isMobileMode","AnimatePresence","Underlay","DashboardContent","cloneElement","className","clsx","props","DashboardSidenav","position","useContext","variants","open","display","width","compact","closed","transitionEnd","size","getSize","m","type","duration","e","target","closest","minWidth","isCompactMode","MenuIcon","createSvgIcon","DashboardNavbar","hideToggleButton","shouldToggleCompactMode","shouldShowToggle","handleToggle","handleCompactModeToggle","newStatus","Navbar","IconButton","undefined","BackendFilter","options","__publicField","FilterOperator","FilterControlType","Now","now","getLocalTimeZone","DateRangePresets","message","DateRangeIcon","Input","React","forwardRef","ref","inputProps","wrapperProps","autoFocus","style","onClick","FocusScope","DatePickerField","inputRef","onBlur","other","fieldClassNames","getInputFieldClassNames","objRef","useObjectRef","fieldProps","useField","focusRef","labelElementType","Field","mergeProps","current","contains","relatedTarget","createFocusManager","focusFirst","input","getDefaultGranularity","date","CalendarDate","dateIsInvalid","min","max","useBaseDatePickerState","selectedDate","calendarIsOpen","setCalendarIsOpen","useState","closeDialogOnSelection","_a","defaultFormatter","useDateFormatter","resolvedOptions","timeZone","granularity","toZoned","useDateRangePickerState","isPlaceholder","setIsPlaceholder","_b","selectedValue","setSelectedStateValue","completeRange","anchorDate","setAnchorDate","isHighlighting","setIsHighlighting","highlightedRange","setHighlightedRange","calendarDates","setCalendarDates","rangeToCalendarDates","prepareValue","newDate","oldDate","setSelectedValue","newValue","value","dayIsActive","day","isSameDay","dayIsHighlighted","dayIsRangeStart","dayIsRangeEnd","getCellProps","isSameMonth","makeRange","finalRange","range","start","toCalendarDate","startOfMonth","end","endOfMonth","ArrowRightAltIcon","adjustSegment","part","amount","hours","isPM","setSegment","segmentValue","wasPM","PAGE_STEP","EditableDateSegment","segment","onChange","state","useIsMobileMediaQuery","enteredKeys","useRef","localeCode","useSelectedLocale","focusManager","useFocusManager","formatter","parser","NumberParser","maximumFractionDigits","setSegmentValue","adjustSegmentValue","backspace","isValidPartialNumber","text","slice","parsed","parse","length","today","onKeyDown","ctrlKey","metaKey","shiftKey","altKey","key","preventDefault","stopPropagation","focusPrevious","focusNext","requestSubmit","maxValue","minValue","onInput","amPmFormatter","hour","hour12","am","amDate","Date","setHours","formatToParts","find","pm","pmDate","toLowerCase","startsWith","numberValue","allowsZero","hourCycle","Number","isNaN","shouldSetValue","String","spinButtonProps","tabIndex","onFocus","scrollIntoView","block","padStart","minLength","LiteralDateSegment","pointerType","from","getSegmentLimits","getMinimumMonthInYear","getMinimumDayInMonth","DateSegmentList","segmentProps","memoOptions","year","month","minute","dateValue","toDate","segments","map","limits","textValue","placeholder","index","KeyboardArrowLeftIcon","KeyboardArrowRightIcon","CalendarCell","currentMonth","dayOfWeek","getDayOfWeek","isActive","isHighlighted","isRangeStart","isRangeEnd","dayIsToday","isToday","sameMonth","isDisabled","calendar","getDaysInMonth","CalendarMonth","startDate","isFirst","isLast","weeksInMonth","getWeeksInMonth","monthStart","startOfWeek","CalendarMonthHeader","_jsxs","WeekdayHeader","Array","keys","weekIndex","dayIndex","add","weeks","days","shiftCalendars","direction","count","newDates","months","subtract","monthFormatter","era","identifier","isBackwardDisabled","isForwardDisabled","format","dayFormatter","weekday","dateDay","Calendar","visibleMonths","_Fragment","DateFormatPresets","numeric","short","long","FormattedDateTimeRange","memo","dates","useSettings","formatted","setFormatted","formatRange","castToDate","Fragment","shallowEqual","parseAbsolute","List","ListItem","onSelected","borderRadius","listItemProps","isSelectable","setIsActive","focusLast","ListItemBase","matches","DatePresetList","onPresetSelected","preset","getRangeValue","Trans","label","DateRangeDialog","showInlineDatePickerField","close","useDialogContext","initialStateRef","hasPlaceholder","Dialog","DialogBody","Calendars","DialogFooter","dateStyle","Button","overflow","InlineDatePickerField","DateRangePicker","onDialogClose","hideCalendarIcon","dialog","DialogTrigger","openOnClick","isHourSegment","includes","currentTarget","ariaLabel","FormDateRangePicker","field","fieldState","invalid","error","useController","formProps","dateRangeToAbsoluteRange","absoluteRangeToDateRange","errorMessage","dateRange","parseAbsoluteToLocal","absoluteRange","toAbsoluteString","TimestampFilter","CreatedAtFilter","UpdatedAtFilter","Avatar","circle","src","getSizeClassName","BackendFiltersUrlKey","decodeBackendFilters","encodedFilters","filtersFromQuery","filterValue","encodeBackendFilters","filters","item","transformValue","fm","filterConfig","f","option","o","useBackendFilterUrlParams","pinnedFilters","searchParams","useSearchParams","navigate","useNavigate","decodedFilters","decoded","config","a","b","getDecodedWithoutKeys","values","newFilters","replaceAll","filterValues","remove","ProgressBarBase","showValueLabel","isIndeterminate","labelPosition","role","formatOptions","id","useId","clamp","percentage","useNumberFormatter","valueLabel","valueToFormat","barStyle","Math","round","barSize","labelEl","cellStyle","isRowHeader","column","defaultWidth","finalWidth","userPadding","justify","rowStyle","isHeader","isSelected","isCtrlKeyPressed","isMac","useGridNavigation","cellCount","rowCount","focusSiblingCell","focusFirstElementAfterGrid","operations","grid","currentCell","row","rowIndex","cellIndex","rowOpCount","_c","_d","_e","cellOpCount","_g","_f","_h","_i","nextCell","nextFocusableElement","getFocusableTreeWalker","walker","next","last","focusWithoutScrolling","TableContext","CheckboxCell","selectedRows","enableSelection","toggleRow","selectionStyle","Checkbox","TableCell","columns","body","usePointerEvents","onMoveStart","onMove","onMoveEnd","minimumMovement","onPress","onLongPress","addGlobalListener","removeGlobalListener","useGlobalListeners","onPointerDown","onPointerMove","onPointerUp","deltaX","deltaY","longPressTriggered","createEventHandler","isCtrlOrShiftPressed","useIsTouchDevice","interactableElements","TableRow","renderAs","isTouchDevice","selectRow","onAction","isRowSelected","clickedOnInteractable","join","doubleClickHandler","anyRowsSelected","handleRowTap","keyboardHandler","contextMenuHandler","tableRowProps","onDoubleClick","onContextMenu","ArrowDownwardIcon","HeaderCell","sortDescriptor","onSortChange","isHovered","setIsHovered","sortingKey","allowSorting","allowsSorting","orderBy","orderDir","sortActive","ariaSort","toggleSorting","newSort","sortVisible","sortVariants","visible","opacity","y","hidden","hideHeader","header","SelectAllCell","trans","useTrans","data","onSelectionChange","allRowsSelected","someRowsSelected","d","Table","ariaLabelledBy","hideHeaderRow","renderRowAs","defaultSelectedRows","newValues","push","indexOf","splice","merge","contextValue","navProps","headerRow","columnIndex","SearchIcon","SelectFilterPanel","filter","FormSelect","Item","DateFilterPanel","endpoint","model","useNormalizedModels","params","useQuery","fetchUsers","apiClient","r","modelName","modelId","useNormalizedModel","fetchModel","NormalizedModelField","modelType","defaultValue","description","openMenuOnFocus","inputValue","setInputValue","query","SelectedModelPreview","requestAnimationFrame","focus","ComboBox","isFetching","results","image","onEditClick","isLoading","LoadingSkeleton","opacityAnimation","Tooltip","EditIcon","Skeleton","FormNormalizedModelField","NormalizedModelFilterPanel","FilterOperatorNames","InputFilterPanel","operators","operator","FormTextField","inputType","FilterListTriggerButton","isInactive","InactiveFilterButton","ActiveFilterButton","KeyboardArrowDownIcon","isBoolean","BooleanToggle","FilterListItemDialogTrigger","onValueChange","FilterListControlDialog","panel","form","useForm","defaultValues","formId","DialogHeader","Form","formValue","FilterListControl","DatePicker","DatePickerControl","BooleanToggleControl","Select","SelectControl","InputControl","SelectModel","SelectModelControl","operatorLabel","skeleton","modelPreview","FilterList","handleValueChange","payload","defaultOperator","CloseIcon","valueKey","AddIcon","FileDownloadIcon","downloadFileFromUrl","url","link","ChipList","color","radius","selectable","Children","chip","isValidElement","ZustandContext","createContext$1","createStore","storeRef","createElement","selector","equalityFn","store","useStore","denyList","isRetryAllowed","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","_asyncToGenerator","fn","self","args","err","ownKeys","object","enumerableOnly","symbols","sym","_objectSpread","i","source","_defineProperty","obj","namespace","isNetworkError","SAFE_HTTP_METHODS","IDEMPOTENT_HTTP_METHODS","isRetryableError","isSafeRequestError","isIdempotentRequestError","isNetworkOrIdempotentRequestError","noDelay","exponentialDelay","retryNumber","delay","randomSum","getCurrentState","currentState","getRequestOptions","defaultOptions","fixConfig","axios","shouldRetry","_x","_x2","_x3","_x4","_shouldRetry","retries","retryCondition","shouldRetryOrPromise","shouldRetryPromiseResult","axiosRetry","_ref","retryDelay","shouldResetTimeout","onRetry","lastRequestDuration","_x5","oneMB","desiredChunkSize","batchSize","concurrency","S3MultipartUpload","file","storedUrl","response","removeFromLocalStorage","pendingChunks","c","signedUrls","pendingUploads","batch","partNumber","chunk","totalUploaded","n","etag","getAxiosErrorMessage","fileKey","uploadId","minChunkSize","chunkSize","previouslyUploaded","p","Disk","version","VERSION","_hasatob","_hasbtoa","_hasBuffer","_TD","_TE","b64ch","b64chs","b64tab","tab","b64re","_fromCC","_U8Afrom","it","x","_mkUriSafe","m0","_tidyB64","s","btoaPolyfill","bin","u32","c0","c1","c2","asc","pad","_btoa","_fromUint8Array","u8a","strs","l","fromUint8Array","urlsafe","cb_utob","cc","re_utob","utob","u","_encode","encode","encodeURI","re_btou","cb_btou","cccc","cp","offset","btou","atobPolyfill","u24","r1","r2","_atob","_toUint8Array","toUint8Array","_unURI","_decode","decode","isValid","_noEnum","v","extendString","_add","extendUint8Array","extendBuiltins","gBase64","_typeof","_defineProperties","descriptor","_createClass","Constructor","protoProps","staticProps","_classCallCheck","instance","_inherits","subClass","superClass","_setPrototypeOf","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","_getPrototypeOf","result","NewTarget","_possibleConstructorReturn","call","_assertThisInitialized","_wrapNativeSuper","Class","_cache","_isNativeFunction","Wrapper","_construct","Parent","DetailedError","_Error","_super","_this","causingErr","req","res","requestId","method","uuid","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","len","arr2","_arr","_n","_s","BaseUpload","fingerprint","previousUpload","_this2","retryDelays","optionName","_this$options$paralle","_this3","totalSize","totalProgress","partCount","parts","splitSizeIntoParts","uploads","lastPartProgress","newPartProgress","upload","metadata","encodeMetadata","inStatusCategory","location","resolveUrl","shouldTerminate","_this4","_this5","shouldResetDelays","bytesSent","bytesTotal","bytesAccepted","_this6","promise","_this7","_this8","_this9","_ref2","done","openRequest","_this10","_this11","storedUpload","urlStorageKey","sendRequest","remainingDelays","newOptions","_ref3","_ref4","Base64","category","headers","_ref5","_ref6","onBeforeRequestPromise","onAfterResponsePromise","isOnline","online","retryAttempt","origin","URL","partSize","NoopUrlStorage","hasStorage","canStoreURLs","WebStorageUrlStorage","prefix","_key","XHRHttpStack","Request","progressHandler","Response","xhr","isReactNative","uriToBlob","uri","blob","isCordova","readAsByteArray","reader","FileSource","blobOrArray","concat","StreamSource","hasEnoughData","hasAllDataBeenRead","FileReader","reactNativeFingerprint","exifHash","hashCode","str","hash","_char","DefaultHttpStack","Upload","_BaseUpload","TusUpload","onProgress","onSuccess","onError","tusFingerprint","getCookie","bytesUploaded","uploadKey","createFileEntry","previousUploads","AxiosUpload","formData","S3Upload","acl","ProgressTimeout","prettyBytes","num","neg","units","exponent","unit","WildcardMatcher","separator","ii","partsCount","testParts","wildcard","test","matcher","require$$0","reMimePartSplit","mimeMatch","pattern","validateUpload","restrictions","maxFileSize","allowedFileTypes","blockedFileTypes","fileMatchesTypes","types","match","enableMapSet","createFileUploadStore","settings","create","immer","set","get","newUploadState","fileUpload","updateTotals","activeUploads","activeUpload","userOptions","uploadedFile","UploadedFile","toast","timer","entry","chooseUploadStrategy","request","files","OneMB","FourMB","HundredMB","strategyConfig","driver","Provider","useFileUploadStore","FileUploadProvider","stringToChipValue","string","ChipFieldInner","fieldRef","displayWith","validateWith","suggestions","onInputValueChange","onItemSelected","onOpenChange","chipSize","showEmptyMessage","propsValue","propsOnChange","isAsync","inputFieldProps","flexibleHeight","useChipFieldValueState","listboxIsOpen","setListboxIsOpen","loadingIndicator","ProgressCircle","endAdornment","ListWrapper","ChipInput","items","setItems","displayChipUsing","manager","removeItem","findIndex","cr","newItems","Chip","tabbable","setChips","chips","inputClassName","addItems","listbox","useListbox","clearInputOnItemSelection","isOpen","selectionMode","virtualFocus","handleItemSelection","activeIndex","setActiveIndex","setIsOpen","refs","listboxId","collection","onInputChange","useLayoutEffect","reference","handleTriggerKeyDown","handleListboxKeyboardNavigation","useListboxKeyboardNavigation","handleFocusAndClick","Listbox","Popover","onPaste","emails","clipboardData","getData","selection","window","getSelection","rangeCount","deleteFromDocument","email","autoComplete","autoCorrect","spellCheck","selectionStart","mixedValueToChipValue","propsDefaultValue","handleChange","ChipField","Switch","useAutoFocus","descriptionId","disabled","font","FormSwitch","checked","randomString","random","possible","DeleteIcon","draggables","droppables","dragMonitors","dragSession","interactableEvent","rect","activeInteraction","setActiveInteraction","domRectToObj","updateRects","targets","observer","entries","height","left","top","useDraggable","preview","hidePreview","dragHandleRef","removeAllGlobalListeners","optionsRef","notifyMonitors","callback","monitor","onDragStart","draggable","el","clickedOnHandle","hideNativeGhostImage","ie","node","onDragOver","newRect","emptyImage","readFilesFromDataTransfer","dataTransfer","getEntries","getEntryFile","asyncIterableToArray","iterator","DROP_ACTIVATE_TIMEOUT","useDroppable","canDrop","fireDragLeave","getDraggable","element","dropResult","USER_MODEL","LinkIcon","MoreVertIcon","useFileEntryUrls","base_url","urlSearchParams","FileEntryUrlsContext","urls","addParams","urlString","baseUrl","FilePreviewContext","DefaultFilePreview","allowDownload","activeEntry","content","downloadUrl","ImageFilePreview","previewUrl","FIVE_MB","TextFilePreview","tooLarge","setTooLarge","setIsLoading","isFailed","setIsFailed","contents","setContents","file_size","then","catch","finally","getFileContents","responseType","VideoFilePreview","mediaInvalid","setMediaInvalid","canPlayType","mime","AudioFilePreview","PdfFilePreview","WordDocumentFilePreview","showDefault","setShowDefault","timeoutId","onload","clearTimeout","buildPreviewUrl","setTimeout","has","post","append","preview_token","buildOfficeLivePreviewUrl","encodeURIComponent","toString","AvailablePreviews","getPreviewForEntry","ChevronLeftIcon","FileThumbnail","iconClassName","showImage","thumbnail","alt","fileName","FileTypeIcon","FilePreviewContainer","onClose","showHeader","headerActionsLeft","defaultActiveIndex","onActiveIndexChange","Preview","canOpenNext","openNext","canOpenPrevious","openPrevious","Header","onNext","onPrevious","actionsLeft","ChevronRightIcon","FilePreviewDialog","Content","FILE_ENTRY_TYPE_FILTER","FILE_ENTRY_INDEX_FILTERS","useDatePickerState","FormDatePicker","rules","validate","compare","parsedValue"],"mappings":"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"}